<!DOCTYPE html>
<html>

  <head lang="ja">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>KERI's Lab</title>
	<meta name="description" content="KERI's Lab へようこそ。ここでは、趣味の電子工作やサーバーづくりなどを紹介しています。">

	<link rel="stylesheet" href="/css/main.css">
	<link rel="canonical" href="http://kerikeri.top/tags/">
	<link rel="alternate" type="application/rss+xml" title="KERI's Lab" href="http://kerikeri.top/feed.xml">
	<link rel="shortcut icon" href="/favicon.ico">

	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script language="JavaScript">
		$(document).ready( function () {
			$("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
		})
	</script>

</head>


  <body>

    <!-- includes/header.html -->

<header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">KERI's Lab</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/blogs/">ブログ</a>
          
        
          
          <a class="page-link" href="/explanations/">解説文</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/memos/">備忘録</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/works/">作品</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <h1 class="page-heading">Tags</h1>
<div class="tag-list">
	
	<a href="/tags/#tag-index-ソーラー" style="font-size:17px">ソーラー</a>
	, 
	
	<a href="/tags/#tag-index-電子工作" style="font-size:44px">電子工作</a>
	, 
	
	<a href="/tags/#tag-index-太陽光電池" style="font-size:15px">太陽光電池</a>
	, 
	
	<a href="/tags/#tag-index-自作" style="font-size:23px">自作</a>
	, 
	
	<a href="/tags/#tag-index-マイコン" style="font-size:16px">マイコン</a>
	, 
	
	<a href="/tags/#tag-index-充電器" style="font-size:17px">充電器</a>
	, 
	
	<a href="/tags/#tag-index-節電" style="font-size:15px">節電</a>
	, 
	
	<a href="/tags/#tag-index-Charge Station" style="font-size:16px">Charge Station</a>
	, 
	
	<a href="/tags/#tag-index-PIC" style="font-size:23px">PIC</a>
	, 
	
	<a href="/tags/#tag-index-めだか" style="font-size:17px">めだか</a>
	, 
	
	<a href="/tags/#tag-index-LED" style="font-size:18px">LED</a>
	, 
	
	<a href="/tags/#tag-index-PIC18F27J53" style="font-size:20px">PIC18F27J53</a>
	, 
	
	<a href="/tags/#tag-index-パワーLED" style="font-size:15px">パワーLED</a>
	, 
	
	<a href="/tags/#tag-index-制御" style="font-size:16px">制御</a>
	, 
	
	<a href="/tags/#tag-index-シリアル" style="font-size:16px">シリアル</a>
	, 
	
	<a href="/tags/#tag-index-ターミナル" style="font-size:21px">ターミナル</a>
	, 
	
	<a href="/tags/#tag-index-ロボコン" style="font-size:15px">ロボコン</a>
	, 
	
	<a href="/tags/#tag-index-シンガポール" style="font-size:15px">シンガポール</a>
	, 
	
	<a href="/tags/#tag-index-IDC" style="font-size:15px">IDC</a>
	, 
	
	<a href="/tags/#tag-index-創造設計第一" style="font-size:15px">創造設計第一</a>
	, 
	
	<a href="/tags/#tag-index-Raspberry Pi" style="font-size:17px">Raspberry Pi</a>
	, 
	
	<a href="/tags/#tag-index-サーバー" style="font-size:21px">サーバー</a>
	, 
	
	<a href="/tags/#tag-index-ラズパイ" style="font-size:23px">ラズパイ</a>
	, 
	
	<a href="/tags/#tag-index-vim" style="font-size:15px">vim</a>
	, 
	
	<a href="/tags/#tag-index-Git" style="font-size:15px">Git</a>
	, 
	
	<a href="/tags/#tag-index-link" style="font-size:15px">link</a>
	, 
	
	<a href="/tags/#tag-index-SSH" style="font-size:16px">SSH</a>
	, 
	
	<a href="/tags/#tag-index-Surface" style="font-size:15px">Surface</a>
	, 
	
	<a href="/tags/#tag-index-Windows" style="font-size:17px">Windows</a>
	, 
	
	<a href="/tags/#tag-index-Ubuntu" style="font-size:15px">Ubuntu</a>
	, 
	
	<a href="/tags/#tag-index-Linux" style="font-size:15px">Linux</a>
	, 
	
	<a href="/tags/#tag-index-UEFI" style="font-size:15px">UEFI</a>
	, 
	
	<a href="/tags/#tag-index-CPU" style="font-size:15px">CPU</a>
	, 
	
	<a href="/tags/#tag-index-入門" style="font-size:16px">入門</a>
	, 
	
	<a href="/tags/#tag-index-論理回路" style="font-size:15px">論理回路</a>
	, 
	
	<a href="/tags/#tag-index-書籍" style="font-size:15px">書籍</a>
	, 
	
	<a href="/tags/#tag-index-はんだ付け" style="font-size:15px">はんだ付け</a>
	, 
	
	<a href="/tags/#tag-index-ファイアウォール" style="font-size:15px">ファイアウォール</a>
	, 
	
	<a href="/tags/#tag-index-NAS" style="font-size:15px">NAS</a>
	, 
	
	<a href="/tags/#tag-index-Samba" style="font-size:15px">Samba</a>
	, 
	
	<a href="/tags/#tag-index-Cygwin" style="font-size:15px">Cygwin</a>
	, 
	
	<a href="/tags/#tag-index-インストール" style="font-size:15px">インストール</a>
	, 
	
	<a href="/tags/#tag-index-IR-Station" style="font-size:21px">IR-Station</a>
	, 
	
	<a href="/tags/#tag-index-ESP8266" style="font-size:24px">ESP8266</a>
	, 
	
	<a href="/tags/#tag-index-ESP-WROOM-02" style="font-size:24px">ESP-WROOM-02</a>
	, 
	
	<a href="/tags/#tag-index-Arduino" style="font-size:23px">Arduino</a>
	, 
	
	<a href="/tags/#tag-index-WiFi" style="font-size:19px">WiFi</a>
	, 
	
	<a href="/tags/#tag-index-キーボード" style="font-size:16px">キーボード</a>
	, 
	
	<a href="/tags/#tag-index-yamy" style="font-size:15px">yamy</a>
	, 
	
	<a href="/tags/#tag-index-Ctrl" style="font-size:15px">Ctrl</a>
	, 
	
	<a href="/tags/#tag-index-カスタマイズ" style="font-size:15px">カスタマイズ</a>
	, 
	
	<a href="/tags/#tag-index-USB" style="font-size:17px">USB</a>
	, 
	
	<a href="/tags/#tag-index-FT232" style="font-size:15px">FT232</a>
	, 
	
	<a href="/tags/#tag-index-ブートローダ" style="font-size:15px">ブートローダ</a>
	, 
	
	<a href="/tags/#tag-index-C言語" style="font-size:17px">C言語</a>
	, 
	
	<a href="/tags/#tag-index-Microchip Library for Application" style="font-size:15px">Microchip Library for Application</a>
	, 
	
	<a href="/tags/#tag-index-MLA" style="font-size:15px">MLA</a>
	, 
	
	<a href="/tags/#tag-index-IR" style="font-size:15px">IR</a>
	, 
	
	<a href="/tags/#tag-index-Remote Control" style="font-size:15px">Remote Control</a>
	, 
	
	<a href="/tags/#tag-index-Server" style="font-size:15px">Server</a>
	, 
	
	<a href="/tags/#tag-index-Sinatra" style="font-size:15px">Sinatra</a>
	, 
	
	<a href="/tags/#tag-index-ruby" style="font-size:15px">ruby</a>
	, 
	
	<a href="/tags/#tag-index-アプリケーション" style="font-size:15px">アプリケーション</a>
	, 
	
	<a href="/tags/#tag-index-HTTP" style="font-size:15px">HTTP</a>
	, 
	
	<a href="/tags/#tag-index-HTML" style="font-size:16px">HTML</a>
	, 
	
	<a href="/tags/#tag-index-CSS" style="font-size:16px">CSS</a>
	, 
	
	<a href="/tags/#tag-index-Active Record" style="font-size:15px">Active Record</a>
	, 
	
	<a href="/tags/#tag-index-SQLite3" style="font-size:15px">SQLite3</a>
	, 
	
	<a href="/tags/#tag-index-JQuiry" style="font-size:15px">JQuiry</a>
	, 
	
	<a href="/tags/#tag-index-ドットインストール" style="font-size:15px">ドットインストール</a>
	, 
	
	<a href="/tags/#tag-index-時計" style="font-size:16px">時計</a>
	, 
	
	<a href="/tags/#tag-index-電流計" style="font-size:15px">電流計</a>
	, 
	
	<a href="/tags/#tag-index-電圧計" style="font-size:15px">電圧計</a>
	, 
	
	<a href="/tags/#tag-index-Wi-Fi" style="font-size:15px">Wi-Fi</a>
	, 
	
	<a href="/tags/#tag-index-Twitter" style="font-size:15px">Twitter</a>
	, 
	
	<a href="/tags/#tag-index-bot" style="font-size:15px">bot</a>
	, 
	
	<a href="/tags/#tag-index-電力計測" style="font-size:15px">電力計測</a>
	, 
	
	<a href="/tags/#tag-index-C++" style="font-size:15px">C++</a>
	, 
	
	<a href="/tags/#tag-index-PIC18F26K22" style="font-size:15px">PIC18F26K22</a>
	, 
	
	<a href="/tags/#tag-index-電光掲示板" style="font-size:15px">電光掲示板</a>
	, 
	
	<a href="/tags/#tag-index-ドットマトリクスLED" style="font-size:15px">ドットマトリクスLED</a>
	, 
	
	<a href="/tags/#tag-index-スクロール" style="font-size:15px">スクロール</a>
	, 
	
	<a href="/tags/#tag-index-exiftool" style="font-size:15px">exiftool</a>
	, 
	
	<a href="/tags/#tag-index-geotag" style="font-size:15px">geotag</a>
	, 
	
	<a href="/tags/#tag-index-写真" style="font-size:15px">写真</a>
	, 
	
	<a href="/tags/#tag-index-位置情報" style="font-size:15px">位置情報</a>
	, 
	
	<a href="/tags/#tag-index-タグ" style="font-size:15px">タグ</a>
	, 
	
	<a href="/tags/#tag-index-ThingSpeak" style="font-size:15px">ThingSpeak</a>
	, 
	
	<a href="/tags/#tag-index-IoT" style="font-size:16px">IoT</a>
	, 
	
	<a href="/tags/#tag-index-Solar Power" style="font-size:15px">Solar Power</a>
	, 
	
	<a href="/tags/#tag-index-太陽光発電" style="font-size:15px">太陽光発電</a>
	, 
	
	<a href="/tags/#tag-index-KiCad" style="font-size:17px">KiCad</a>
	, 
	
	<a href="/tags/#tag-index-自動配線" style="font-size:15px">自動配線</a>
	, 
	
	<a href="/tags/#tag-index-回路" style="font-size:16px">回路</a>
	, 
	
	<a href="/tags/#tag-index-基板" style="font-size:17px">基板</a>
	, 
	
	<a href="/tags/#tag-index-講習会" style="font-size:15px">講習会</a>
	, 
	
	<a href="/tags/#tag-index-ロボット技術研究会" style="font-size:15px">ロボット技術研究会</a>
	, 
	
	<a href="/tags/#tag-index-初心者" style="font-size:15px">初心者</a>
	, 
	
	<a href="/tags/#tag-index-トランジスタ" style="font-size:15px">トランジスタ</a>
	, 
	
	<a href="/tags/#tag-index-FFT" style="font-size:15px">FFT</a>
	, 
	
	<a href="/tags/#tag-index-高速フーリエ変換" style="font-size:15px">高速フーリエ変換</a>
	, 
	
	<a href="/tags/#tag-index-Nucleo" style="font-size:15px">Nucleo</a>
	, 
	
	<a href="/tags/#tag-index-音声解析" style="font-size:15px">音声解析</a>
	, 
	
	<a href="/tags/#tag-index-グラフィック液晶" style="font-size:15px">グラフィック液晶</a>
	, 
	
	<a href="/tags/#tag-index-シリアル通信" style="font-size:15px">シリアル通信</a>
	, 
	
	<a href="/tags/#tag-index-Jekyll" style="font-size:15px">Jekyll</a>
	, 
	
	<a href="/tags/#tag-index-Asciidoc" style="font-size:15px">Asciidoc</a>
	, 
	
	<a href="/tags/#tag-index-Blog" style="font-size:16px">Blog</a>
	, 
	
	<a href="/tags/#tag-index-Source Code" style="font-size:15px">Source Code</a>
	, 
	
	<a href="/tags/#tag-index-SyntaxHighlighting" style="font-size:15px">SyntaxHighlighting</a>
	, 
	
	<a href="/tags/#tag-index-PC" style="font-size:15px">PC</a>
	, 
	
	<a href="/tags/#tag-index-pdf" style="font-size:15px">pdf</a>
	, 
	
	<a href="/tags/#tag-index-tex" style="font-size:15px">tex</a>
	, 
	
	<a href="/tags/#tag-index-viewer" style="font-size:15px">viewer</a>
	, 
	
	<a href="/tags/#tag-index-editor" style="font-size:15px">editor</a>
	, 
	
	<a href="/tags/#tag-index-iPhone" style="font-size:15px">iPhone</a>
	, 
	
	<a href="/tags/#tag-index-Apple" style="font-size:15px">Apple</a>
	, 
	
	<a href="/tags/#tag-index-分解" style="font-size:15px">分解</a>
	, 
	
	<a href="/tags/#tag-index-修理" style="font-size:15px">修理</a>
	, 
	
	<a href="/tags/#tag-index-赤外線学習リモコン" style="font-size:18px">赤外線学習リモコン</a>
	, 
	
	<a href="/tags/#tag-index-ペット" style="font-size:15px">ペット</a>
	, 
	
	<a href="/tags/#tag-index-Maker Faire Tokyo" style="font-size:15px">Maker Faire Tokyo</a>
	, 
	
	<a href="/tags/#tag-index-MFT2016" style="font-size:15px">MFT2016</a>
	, 
	
	<a href="/tags/#tag-index-JavaScript" style="font-size:15px">JavaScript</a>
	, 
	
	<a href="/tags/#tag-index-Raspberrypi" style="font-size:15px">Raspberrypi</a>
	, 
	
	<a href="/tags/#tag-index-シェルスクリプト" style="font-size:15px">シェルスクリプト</a>
	, 
	
	<a href="/tags/#tag-index-ミュージックサーバー" style="font-size:16px">ミュージックサーバー</a>
	, 
	
	<a href="/tags/#tag-index-Volumio" style="font-size:16px">Volumio</a>
	, 
	
	<a href="/tags/#tag-index-iTunes" style="font-size:15px">iTunes</a>
	, 
	
	<a href="/tags/#tag-index-プレイリスト" style="font-size:15px">プレイリスト</a>
	, 
	
	<a href="/tags/#tag-index-RTCC" style="font-size:15px">RTCC</a>
	, 
	
	<a href="/tags/#tag-index-7セグメントLED" style="font-size:15px">7セグメントLED</a>
	
	
</div>




<h1 class="page-heading" id="tag-index-ソーラー">ソーラー (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-電子工作">電子工作 (30) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-12-low-power-clock/">
		<img src="/posts/2016-09-12-low-power-clock/icon.jpg" title="PICで省エネ時計を作る" alt="PICで省エネ時計を作る">
		<div class="post-list-char">
			<span class="post-meta">2016年09月12日 Category: works</span>
			<h2>
				PICで省エネ時計を作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PICで時計

久しぶりにPICの話題です．しばらくESP8266やARMマイコンなど，上級のマイコンを使っていましたが，またPICを使ってみたくなりました．

他のマイコンには真似できないような超低消費電力の時計を作ってみました．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-09-02-pic-rtcc/">
		<img src="/home/icon.png" title="PICでリアルタイムクロック" alt="PICでリアルタイムクロック">
		<div class="post-list-char">
			<span class="post-meta">2016年09月02日 Category: memos</span>
			<h2>
				PICでリアルタイムクロック
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53は，リアルタイムクロック&amp;カレンダー(RTCC)モジュールをハードウェアで持っています．今回はそれを使用するためのライブラリを作ったので紹介します．

自作のRTCCライブラリ

必要なソースファイル


  My_RTCC.h
  My_RTCC.c
  My_button.h
  My_button.c
  main.c


概要

変数

このプログラムでは、時刻情報を持つ変数が３つある。


  PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
  time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
  time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。


以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
#### 使い方


  TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
  CONFIGを設定する。RTCOSC = T1OSCREF
  その次に、RTCC_init();を書く。（初期設定関数）
  mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
  任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
  時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
  adjust_time_inc()とadjust_time_dec()で調整するとよい。
  時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。


RTCCライブラリ

My_RTCC.h

/* 
 * File:   My_RTCC.h
 * Author: Ryotaro Onuki
 *
 * Created on 2015/03/19, 0:02
 * 
 * PIC18F28J53用リアルタイムクロックプログラム
 * ○概要
 * このプログラムでは、時刻情報を持つ変数が３つある。
 * 1.PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
 * 2.time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
 * 3.time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。
 * 以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
 * ○使い方
 * 1.TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
 * 2.CONFIGを設定する。RTCOSC = T1OSCREF
 * 3.その次に、RTCC_init();を書く。（初期設定関数）
 * 4.mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
 * 5.任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
 * 6.時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
 * 7.adjust_time_inc()とadjust_time_dec()で調整するとよい。
 * 8.時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。
 */

#ifndef MY_RTCC_H
#define	MY_RTCC_H

/** INCLUDES *******************************************************/
#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include "My_button.h"

/** VALUES *********************************************************/
#define MINUTE ((epoch_t)60)
#define HOUR ((epoch_t)60*60)
#define DAY ((epoch_t)60*60*24)

/** STRUCTURE ******************************************************/
// epoch型を定義。2000年1月1日0時00分からの総秒数。

typedef uint32_t epoch_t;

// 時刻合わせ用のフラグの構造体を定義。

typedef struct {

    union {
        uint8_t flags;

        struct {
            uint8_t ss : 1;
            uint8_t mm : 1;
            uint8_t hh : 1;
            uint8_t DD : 1;
            uint8_t MM : 1;
            uint8_t YY : 1;
        } flag;
    };
} edit_t;

// RTCC関連すべてを詰めた構造体。実際に使用する。

typedef struct {
    epoch_t epoch;
    uint8_t ss;
    uint8_t mm;
    uint8_t hh;
    uint8_t EE;
    uint8_t DD;
    uint8_t MM;
    uint8_t YY;
    uint8_t colon;
    uint8_t halfsec;
    edit_t edit;
} time_t;

/** VARIABLES ******************************************************/
// 表示用の曜日charをconstで定義。
extern const char weekday_3char[7][4];
// 現在時刻
extern time_t now;
// 時間が変わった時だけフラグが経つ。表示器の時刻の更新はこのフラグの監視をして行えばよい。
extern uint8_t time_change_flag;
// main_init()に書くこと。
void RTCC_init(void);
// Call this in the main loop
void RTCC_task(void);

/** USER FUNCTIONS *************************************************/
/** Transform time User Functions **/
// 時刻をRTCC基準でそろえる
void RTCC_from_RTCC(time_t *tm);
// 時刻をカレンダータイム基準でそろえる
void RTCC_from_caltime(time_t *tm);
// 時刻をエポック基準でそろえる
void RTCC_from_epoch(time_t *tm);
// return month length
uint8_t month_length(uint8_t year, uint8_t month);

/** LCD display **/
// 各項目表示用関数。ユーザーは使わない。
static void display_dec(char *str, uint8_t dec, uint8_t edit);
// 0802サイズ液晶用、文字列作成関数
void display_time_0802(time_t *tm, char *line0, char *line1);
// 1608サイズ液晶用、文字列作成関数
void display_time_1602(time_t *tm, char *line0, char *line1);

/** adjust the time **/
// 時刻編集モードを切り替える
void RTCC_adjust_time_toggle(time_t *tm);
// 編集中の時刻針を切り替える
void RTCC_adjust_time_cursor(time_t *tm);
// 編集中の時刻針を１つ増やす
void RTCC_adjust_time_inc(time_t *tm);
// 編集中の時刻針を１つ減らす
void RTCC_adjust_time_dec(time_t *tm);
// 3つのボタンで時刻合わせ
void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec);

/** FUNCTIONS ******************************************************/
/** en/decode number **/
// from decimal to hex
static uint8_t d_to_x(uint8_t dec);
// from hex to decimal
static uint8_t x_to_d(uint8_t hex);
// quotをdivで割って、余りを返す。よく使うので関数化した。
static epoch_t get_quot_rem(epoch_t *quot, uint8_t div);

/** Transform time **/
// RTCCをカレンダタイムに変換、上書き。
static void RTCC_to_caltime(time_t *tm);
// カレンダタイムをRTCCに変換、上書き。
static void caltime_to_RTCC(time_t *tm);
// Epochをカレンダタイムに変換、上書き。
static void epoch_to_caltime(time_t *tm);
// get epoch from caltime
static void caltime_to_epoch(time_t *tm);

#endif	/* MY_RTCC_H */



My_RTCC.c

#include "My_RTCC.h"

/** INCLUDES *******************************************************/
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/** VALUES *********************************************************/


/** VARIABLES ******************************************************/
const char weekday_3char[7][4] = {"SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"};
time_t now;
uint8_t time_change_flag;

/** USER FUNCTIONS *************************************************/

void RTCC_init(void) {
    RTCCFGbits.RTCWREN = 1;
    if (RTCCFGbits.RTCWREN != 1) {
        EECON2 = 0x55;
        EECON2 = 0xAA;
        RTCCFGbits.RTCWREN = 1;
    }
    RTCCFGbits.RTCEN = 1;
    RTCCFGbits.RTCOE = 0;
    PADCFG1bits.RTSECSEL0 = 1;
    PADCFG1bits.RTSECSEL1 = 1;
    RTCCAL = 0x00;
    T1CONbits.T1OSCEN = 1;

    RTCC_from_RTCC(&amp;now);
    if (now.DD == 0) {
        now.epoch = 0;
        RTCC_from_epoch(&amp;now);
    }
}

void RTCC_task(void) {
    static uint8_t prev_halfsec;
    if (RTCCFGbits.RTCSYNC)return;
    now.halfsec = RTCCFGbits.HALFSEC;
    if (prev_halfsec != now.halfsec) {
        prev_halfsec = now.halfsec;
        now.colon = now.halfsec;
        time_change_flag = 1;
        RTCC_from_RTCC(&amp;now);
    }
}

/** Transform time User Functions **/

void RTCC_from_RTCC(time_t *tm) {
    RTCC_to_caltime(tm);
    caltime_to_epoch(tm);
}

void RTCC_from_caltime(time_t *tm) {
    caltime_to_epoch(tm);
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

void RTCC_from_epoch(time_t *tm) {
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

uint8_t month_length(uint8_t year, uint8_t month) {
    if (month == 2) return 28 + !(year &amp; 3)-!(year % 100)+!(year % 400);
    else return 31 - (((-(month &amp; 1)^month)&amp;13) == 4);

    //    switch (month) {
    //        case 1:
    //        case 3:
    //        case 5:
    //        case 7:
    //        case 8:
    //        case 10:
    //        case 12:
    //            return 31;
    //        case 4:
    //        case 6:
    //        case 9:
    //        case 11:
    //            return 30;
    //        case 2:
    //            if (year % 400 == 0)return 29;
    //            else if (year % 100 == 0)return 28;
    //            else if (year % 4 == 0) return 29;
    //            else return 28;
}

/** LCD display **/

static void display_dec(char *str, uint8_t dec, uint8_t edit) {
    char s[4];
    sprintf(s, "%02d", dec);
    if (edit &amp;&amp; now.halfsec)strcat(str, "  ");
    else strcat(str, s);
}

void display_time_0802(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);

    strcpy(line1, "");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (now.colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

void display_time_1602(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, 20, tm-&gt;edit.flag.YY);
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);
    strcat(line0, "(");
    strcat(line0, weekday_3char[tm-&gt;EE]);
    strcat(line0, ")");

    strcpy(line1, "        ");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (tm-&gt;colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

/** adjust the time **/

void RTCC_adjust_time_toggle(time_t *tm) {
    if (tm-&gt;edit.flags) {
        tm-&gt;edit.flags = 0;
    } else {
        tm-&gt;edit.flag.ss = 1;
    }
}

void RTCC_adjust_time_cursor(time_t *tm) {
    if (tm-&gt;edit.flag.ss)tm-&gt;edit.flags = 0x02;
    else if (tm-&gt;edit.flag.mm)tm-&gt;edit.flags = 0x04;
    else if (tm-&gt;edit.flag.hh)tm-&gt;edit.flags = 0x08;
    else if (tm-&gt;edit.flag.DD)tm-&gt;edit.flags = 0x10;
    else if (tm-&gt;edit.flag.MM)tm-&gt;edit.flags = 0x20;
    else if (tm-&gt;edit.flag.YY)tm-&gt;edit.flags = 0x01;
    else tm-&gt;edit.flags = 0x00;
}

void RTCC_adjust_time_inc(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch += 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch += MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch += HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch += DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch += DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &lt;= 12; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 1; i &lt; tm-&gt;MM; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY + 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch -= 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_dec(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch -= 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch -= MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch -= HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch -= DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &gt;= 1; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 12; i &gt; tm-&gt;MM; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY - 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch += 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec) {
    if (mode-&gt;flag.long_holding_3) {
        mode-&gt;flag.long_holding_3 = 0;
        RTCC_adjust_time_toggle(tm);
        mode-&gt;flags = 0;
        cnt_inc-&gt;flags = 0;
        cnt_dec-&gt;flags = 0;
    }
    if (tm-&gt;edit.flags) {
        if (mode-&gt;flag.press) {
            mode-&gt;flag.press = 0;
            RTCC_adjust_time_cursor(tm);
        }
        if (cnt_inc-&gt;flag.press) {
            cnt_inc-&gt;flag.press = 0;
            RTCC_adjust_time_inc(tm);
        }
        if (cnt_dec-&gt;flag.press) {
            cnt_dec-&gt;flag.press = 0;
            RTCC_adjust_time_dec(tm);
        }
    }
}

/** FUNCTIONS ******************************************************/

/** en/decode number **/

static uint8_t d_to_x(uint8_t dec) {
    // uint8_t quot = dec / 10;
    // return quot * 16 + dec - quot * 10;
    return dec / 10 * 6 + dec;
}

static uint8_t x_to_d(uint8_t hex) {
    return 10 * (0x0F &amp; (hex &gt;&gt; 4)) + (0x0F &amp; hex);
}

static epoch_t get_quot_rem(epoch_t *quot, uint8_t div) {
    // num /= div;
    // return rem;
    epoch_t num = *quot;
    return num - (*quot = num / div) * div; // returns rem
}

/** Transform time **/

static void RTCC_to_caltime(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);

    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;

    tm-&gt;YY = x_to_d(RTCVALL); // YY
    uint8_t dumy = RTCVALH; // Reserved
    tm-&gt;DD = x_to_d(RTCVALL); // DD
    tm-&gt;MM = x_to_d(RTCVALH); // MM
    tm-&gt;hh = x_to_d(RTCVALL); // hh
    tm-&gt;EE = x_to_d(RTCVALH); // EE
    tm-&gt;ss = x_to_d(RTCVALL); // ss
    tm-&gt;mm = x_to_d(RTCVALH); // mm
}

static void caltime_to_RTCC(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;YY);
    RTCVALH = 0x00;
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;DD);
    RTCVALH = d_to_x(tm-&gt;MM);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;hh);
    RTCVALH = d_to_x(tm-&gt;EE);
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;ss);
    RTCVALH = d_to_x(tm-&gt;mm);
}

static void epoch_to_caltime(time_t *tm) {
    // to get epoch on terminal
    // echo $(( (`date -d '2015/03/01' '+%s'` - `date -d '2000/01/01' '+%s'`) / 86400 ))
    static uint16_t day_cache = 0; //2015.03.01
    static uint8_t month_cache = 1;
    static uint8_t year_cache = 0;
    uint16_t day_since_epoch;
    uint16_t day;
    uint8_t year = 0;
    uint8_t month = 1; // month is one-based.
    epoch_t num;

    num = tm-&gt;epoch;
    tm-&gt;ss = get_quot_rem(&amp;num, 60);
    tm-&gt;mm = get_quot_rem(&amp;num, 60);
    tm-&gt;hh = get_quot_rem(&amp;num, 24);
    day = num;
    day_since_epoch = day;

    num += 6; // 2000.1.1 is Saturday(6).
    tm-&gt;EE = get_quot_rem(&amp;num, 7);

    //    if (day == day_cache) {
    //        year = year_cache;
    //        month = month_cache;
    //        day -= day_cache;
    //    }

    // day is zero - based here.
    while (day &gt;= month_length(year, month)) {
        LATB2 = 1;
        day = day - month_length(year, month);
        if (month == 12) {
            month = 1; // month is one-based.
            year++;
            //3155760000 is 2000~2100?100?????
            if (year &gt;= 100) {
                tm-&gt;epoch -= 3155760000;
                year = 0;
            }
        } else {
            month++;
        }
        month_cache = month;
        year_cache = year;
    }
    day_cache = day_since_epoch - day;
    day++; // day is one-based, not zero-based.

    tm-&gt;YY = year;
    tm-&gt;MM = month;
    tm-&gt;DD = day;
}

static void caltime_to_epoch(time_t *tm) {
    epoch_t epoch = 0;
    for (uint8_t year = 0; year &lt; tm-&gt;YY; year++) {
        for (uint8_t month = 1; month &lt;= 12; month++) {
            epoch += DAY * month_length(year, month);
        }
    }
    for (uint8_t month = 1; month &lt; tm-&gt;MM; month++) {
        epoch += DAY * month_length(tm-&gt;YY, month);
    }
    epoch += DAY * (tm-&gt;DD - 1); //day is one-based.
    epoch += HOUR * tm-&gt;hh;
    epoch += MINUTE * tm-&gt;mm;
    epoch += tm-&gt;ss;

    tm-&gt;epoch = epoch;
}



ボタンライブラリ

My_button.h

/* 
 * File:   My_button.h
 * Author: kerikun11
 *
 * Created on 2015/02/26, 19:19
 */

#ifndef MY_BUTTON_H
#define	MY_BUTTON_H

#include &lt;stdint.h&gt;

//*************************** button ***************************//
//タイマー割り込み関数にbutton_timer_interrupt(&amp;button_t,!SW)を書いておくこと。
// 48MHz, 16bit, prescaler=1:4

#define PRESS_LEVEL 2
#define LONG_HOLD_LEVEL1  16
#define LONG_HOLD_LEVEL2  60
#define LONG_HOLD_LEVEL3  150
#define LONG_HOLD_LEVEL4  300
#define LONG_HOLD_LEVEL5  500
#define LONG_HOLD_LEVEL6  700
#define LONG_HOLD_LEVEL7  900

typedef struct button {
    uint16_t cnt_sw;

    union {
        uint16_t flags;

        struct {
            uint8_t press : 1;
            uint8_t long_hold_1 : 1;
            uint8_t long_hold_2 : 1;
            uint8_t long_hold_3 : 1;
            uint8_t long_hold_4 : 1;
            uint8_t long_hold_5 : 1;
            uint8_t long_hold_6 : 1;
            uint8_t long_hold_7 : 1;
            uint8_t pressing : 1;
            uint8_t long_holding_1 : 1;
            uint8_t long_holding_2 : 1;
            uint8_t long_holding_3 : 1;
            uint8_t long_holding_4 : 1;
            uint8_t long_holding_5 : 1;
            uint8_t long_holding_6 : 1;
            uint8_t long_holding_7 : 1;
        } flag;
    };
} button_t;

void button_timer_interrupt(button_t *bt, uint8_t sw_value);

#endif	/* MY_BUTTON_H */



My_button.h

#include "My_button.h"

void button_timer_interrupt(button_t *bt, uint8_t sw_value) {
    if (sw_value) {
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL7)bt-&gt;flag.long_holding_7 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL6)bt-&gt;flag.long_holding_6 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL5)bt-&gt;flag.long_holding_5 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL4)bt-&gt;flag.long_holding_4 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL3)bt-&gt;flag.long_holding_3 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL2)bt-&gt;flag.long_holding_2 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL1)bt-&gt;flag.long_holding_1 = 1;
        if (bt-&gt;cnt_sw == PRESS_LEVEL)bt-&gt;flag.pressing = 1;
        if (bt-&gt;cnt_sw &lt; LONG_HOLD_LEVEL7 + 1) bt-&gt;cnt_sw++;
    } else {
        if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL7)bt-&gt;flag.long_hold_7 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL6)bt-&gt;flag.long_hold_6 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL5)bt-&gt;flag.long_hold_5 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL4)bt-&gt;flag.long_hold_4 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL3)bt-&gt;flag.long_hold_3 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL2)bt-&gt;flag.long_hold_2 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL1)bt-&gt;flag.long_hold_1 = 1;
        else if (bt-&gt;cnt_sw &gt;= PRESS_LEVEL)bt-&gt;flag.press = 1;
        bt-&gt;cnt_sw = 0;
        bt-&gt;flags &amp;= 0x00FF;
    }
}



使用例

UARTで毎秒時刻を送信します．

main.c

/* 
 * Project: RTCC-Sample.X
 * File:    main.c
 * Author:  Ryotaro Onuki
 *
 * Created on 2015/10/06, 14:23
 */

#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
// CONFIG1L
#pragma config WDTEN = OFF, PLLDIV = 2, CFGPLLEN = ON, STVREN = OFF, XINST = OFF
// CONFIG1H
#pragma config CPUDIV = OSC1, CP0 = OFF
// CONFIG2L
#pragma config OSC = INTOSCPLL, SOSCSEL = HIGH, CLKOEC = OFF, FCMEN = OFF, IESO = OFF
// CONFIG2H
#pragma config WDTPS = 1024
// CONFIG3L
#pragma config DSWDTOSC = T1OSCREF, RTCOSC = T1OSCREF, DSBOREN = OFF, DSWDTEN = OFF, DSWDTPS = G2
// CONFIG3H
#pragma config IOL1WAY = OFF, ADCSEL = BIT12, MSSP7B_EN = MSK7
// CONFIG4L
#pragma config WPFP = PAGE_127, WPCFG = OFF
// CONFIG4H
#pragma config WPDIS = OFF, WPEND = PAGE_WPFP, LS48MHZ = SYS48X8

#define _XTAL_FREQ 48000000

#include "My_RTCC.h"
#include "My_button.h"

// I/O Mapping
#define MODE_BUTTON PORTBbits.RB0
#define INC_BUTTON PORTBbits.RB1
#define DEC_BUTTON PORTBbits.RB2

#define LED0 LATAbits.LATA0

button_t mode;
button_t inc;
button_t dec;

void interrupt ISR(void) {
    if (PIE1bits.TMR1IE &amp;&amp; PIR1bits.TMR1IF) {
        PIR1bits.TMR1IF = 0;
    }
    if (PIE2bits.TMR3IE &amp;&amp; PIR2bits.TMR3IF) {
        PIR2bits.TMR3IF = 0;
        LED0 = !LED0;
        button_timer_interrupt(&amp;mode, !MODE_BUTTON);
        button_timer_interrupt(&amp;inc, !INC_BUTTON);
        button_timer_interrupt(&amp;dec, !DEC_BUTTON);
    }
    if (PIR1bits.RCIF &amp;&amp; PIE1bits.RCIE) {
        while (!PIR1bits.TXIF); // 送信完了まで待つ。
        TXREG1 = RCREG1; // 受信データをそのまま送信
    }
}

void main_init(void) {
    OSCCONbits.IRCF = 7;
    OSCTUNEbits.PLLEN = 1;
    OSCCONbits.SCS = 0;
    TRISA = 0b00100000; // IO,IO,Vcap,IO,IO,IO,IO,IO
    TRISB = 0b00110111; // IO,IO,SDA,SCL,IO,IO,IO,IO
    TRISC = 0b10111010; // RX,TX,D+,D-,Vusb,IO,T1OSI,T1OSO
    ANCON0 = 0b11111111; // x,x,x,AN4,AN3,AN2,AN1,AN0
    ANCON1 = 0b11111111; // x,x,x,x,AN12,AN11,AN10,AN9,AN8
    INTCON2bits.RBPU = 0; // Port:B Pull-up enable
    // Timer 1 init
    T1CONbits.TMR1CS = 2; // Clock = T1OSC
    T1CONbits.T1OSCEN = 1; // Drive Crystal
    T1CONbits.T1CKPS = 0; // No devide
    T1CONbits.nT1SYNC = 1; // No Sync
    T1CONbits.RD16 = 0; // Timer1 = 2 x 8bit timer
    T1CONbits.TMR1ON = 1; // module enable
    IPR1bits.TMR1IP = 0; // low priority
    PIR1bits.TMR1IF = 0;
    PIE1bits.TMR1IE = 1;
    INTCONbits.PEIE = 1;
    // Timer 3 init
    T3CONbits.TMR3CS = 0; // Clock = Fosc/4
    T3CONbits.T3OSCEN = 0; // Not Drive Crystal
    T3CONbits.T3CKPS = 2; // clock/4
    T3CONbits.RD163 = 0; // Timer3=16bit timer
    T3CONbits.TMR3ON = 1; // module enable
    IPR2bits.TMR3IP = 0; // low priority
    PIR2bits.TMR3IF = 0;
    PIE2bits.TMR3IE = 1; // interrupt enable
    INTCONbits.PEIE = 1;
    // RTCC init
    RTCC_init();
    // UART init
    TXSTA1bits.TX9 = 0; // 0:8-bit
    TXSTA1bits.TXEN = 1; //1:enable
    TXSTA1bits.SYNC = 0; // 0:Asynchronous mode
    TXSTA1bits.BRGH = 0; // 1:High Speed
    RCSTA1bits.SPEN = 1; // 1:Serial Port enable
    RCSTA1bits.RX9 = 0; // 0:8-bit
    RCSTA1bits.CREN = 1; // 1:continuous receive enable
    BAUDCON1bits.BRG16 = 0; // 1:use 16-bit SPBRG
    SPBRG1 = _XTAL_FREQ / 64 / 9600 - 1;
    SPBRGH1 = 0;
    IPR1bits.RC1IP = 0; //0:low priority
    PIE1bits.RCIE = 1;
    INTCONbits.PEIE = 1;
}

void delay(uint16_t t) {
    while (t--)__delay_ms(1);
}

int main(void) {
    main_init();
    INTCONbits.GIE = 1;

    while (1) {
        RTCC_task();
        RTCC_adjust_time_button(&amp;now, &amp;mode, &amp;inc, &amp;dec);

        if (time_change_flag) {
            time_change_flag = 0;
            char str[30];
            sprintf(str, "\t20%02d/%02d/%02d(%s)%02d:%02d-%02d\n",
                    now.YY,
                    now.MM,
                    now.DD,
                    weekday_3char[now.EE],
                    now.hh,
                    now.mm,
                    now.ss);
            for (uint8_t i = 0; str[i]; i++) {
                while (!PIR1bits.TXIF); //送信完了まで待つ
                TXREG1 = str[i];
            }
        }
    }

    return 0;
}



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-05-maker-faire-tokyo-2016/">
		<img src="/posts/2016-08-05-maker-faire-tokyo-2016/logo.jpg" title="Maker Faire Tokyo 2016 に出展します！" alt="Maker Faire Tokyo 2016 に出展します！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月05日 Category: blogs</span>
			<h2>
				Maker Faire Tokyo 2016 に出展します！
			</h2>
			<span class="post-meta" style="max-height:4em;">Maker Faire Tokyo 2016

こんにちは．けりです．
8月6日(土)，8月7日(日)にお台場の国際展示場で開催される，ものつくりの展示イベントのMaker Faire Tokyo 2016に出展することになりました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-25-how-to-use-ir-station/">
		<img src="/posts/2016-07-25-how-to-use-ir-station/icon.png" title="IR-Stationの使い方" alt="IR-Stationの使い方">
		<div class="post-list-char">
			<span class="post-meta">2016年07月25日 Category: works</span>
			<h2>
				IR-Stationの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-22-freerouting/">
		<img src="/posts/2016-04-22-freerouting/icon.png" title="KiCadで自動配線" alt="KiCadで自動配線">
		<div class="post-list-char">
			<span class="post-meta">2016年04月22日 Category: explanations</span>
			<h2>
				KiCadで自動配線
			</h2>
			<span class="post-meta" style="max-height:4em;">概要



自動配線ツールを使おう

KiCadが流行ってきて，使う人が増えてきている．

しかし，自動配線ツールを使っている人は少ない．

それでははもったいない！！

今回は自動配線ツールの使い方を説明する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-raspi-serial/">
		<img src="/home/icon.png" title="ラズパイでシリアルモニタを使うには" alt="ラズパイでシリアルモニタを使うには">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: memos</span>
			<h2>
				ラズパイでシリアルモニタを使うには
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ラズパイのシリアルを使うときや、ラズパイにFT232などをつないだ時にターミナルをシリアルモニタにする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-robot/">
		<img src="/posts/2016-04-08-old-works-robot/icon.png" title="昔作った電子工作たち～ロボット編～" alt="昔作った電子工作たち～ロボット編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～ロボット編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-power/">
		<img src="/posts/2016-04-08-old-works-power/icon.png" title="昔作った電子工作たち～充電・電力編～" alt="昔作った電子工作たち～充電・電力編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～充電・電力編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-other/">
		<img src="/posts/2016-04-08-old-works-other/icon.jpg" title="昔作った電子工作たち～その他～" alt="昔作った電子工作たち～その他～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～その他～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

ヘッドライトを分解して調光機能を追加

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-illumination/">
		<img src="/posts/2016-04-08-old-works-illumination/icon.jpg" title="昔作った電子工作たち～LEDイルミネーション～" alt="昔作った電子工作たち～LEDイルミネーション～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～LEDイルミネーション～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-frisk/">
		<img src="/posts/2016-04-08-old-works-frisk/icon.jpg" title="昔作った電子工作たち～in FRISK 編～" alt="昔作った電子工作たち～in FRISK 編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～in FRISK 編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-audio/">
		<img src="/posts/2016-04-08-old-works-audio/icon.jpg" title="昔作った電子工作たち～オーディオ編～" alt="昔作った電子工作たち～オーディオ編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～オーディオ編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-10-pic-usb/">
		<img src="/posts/2016-01-10-pic-usb/icon.jpg" title="PICでUSB通信" alt="PICでUSB通信">
		<div class="post-list-char">
			<span class="post-meta">2016年01月10日 Category: explanations</span>
			<h2>
				PICでUSB通信
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBの使い方について書きたいと思います。

今回紹介する方法では、USBをUARTの代わりに使えるようにするものです。PICをPCにつなぐとCOMポートが現れます。

これならUSBシリアル変換モジュールを使う必要はなくります。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-08-pic18f27j53/">
		<img src="/posts/2016-01-08-pic18f27j53/icon.jpg" title="PIC18F27J53のすすめ" alt="PIC18F27J53のすすめ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月08日 Category: explanations</span>
			<h2>
				PIC18F27J53のすすめ
			</h2>
			<span class="post-meta" style="max-height:4em;">PIC18F27J53のいいところ

秋月で売っていること

電子工作をするうえでこれはとても大事なこと。「秋月で売っているなら使ってみるか」ってなりますよね。

もちろん、秋月なので値段が安い！！
1個270円です(2016年1月現在)。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-30-ir-station/">
		<img src="/posts/2015-12-30-ir-station/icon.jpg" title="ESP8266で赤外線学習リモコン" alt="ESP8266で赤外線学習リモコン">
		<div class="post-list-char">
			<span class="post-meta">2015年12月30日 Category: works</span>
			<h2>
				ESP8266で赤外線学習リモコン
			</h2>
			<span class="post-meta" style="max-height:4em;">ESP8266とは

日本の技適を取得済みWiFiモジュール！！

ESP8266とはWiFi制御用マイコンです。もともと中国で流行っていました。そのマイコンを内蔵したESP-WROOM-02というWiFiモジュールが日本の技適を取得したので、日本でも人気になりました。

とにかく安い！

その価格はなんと、たったの550円です！！
ESP-WROOM-02←秋月電子などで売っています。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-04-create-cpu/">
		<img src="/posts/2015-11-04-create-cpu/icon.jpg" title="CPUの創り方" alt="CPUの創り方">
		<div class="post-list-char">
			<span class="post-meta">2015年11月04日 Category: works</span>
			<h2>
				CPUの創り方
			</h2>
			<span class="post-meta" style="max-height:4em;">書籍「CPUの創り方」（2003年）渡波郁 著


　この本は電子工作の入門書です。しかし入門書と言っても内容は壮大で、CPUを設計して自作しようというものです。電子工作初心者だけでなく、ある程度電子工作をしてきた人にも読みごたえのある一冊になっています。

作ったもの : TD4


　この本の中で設計しているCPUを実際に作りました。TD4とはTada Dousa-suru-dakei-no 4-bit CPU という意味です。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-09-charge-station-6/">
		<img src="/posts/2015-10-09-charge-station-6/icon.jpg" title="Charge Station" alt="Charge Station">
		<div class="post-list-char">
			<span class="post-meta">2015年10月09日 Category: works</span>
			<h2>
				Charge Station
			</h2>
			<span class="post-meta" style="max-height:4em;">
	
	
	
	


	
		概要
		　ChargeStationとは自作の携帯電話充電器です。僕が命名しました。充電が終わると自動で給電を止めるので、電気の節約になります。
	


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-02-16-charge-station-1-5/">
		<img src="/posts/2015-02-16-charge-station-1-5/icon.jpg" title="ChargeStationの紹介" alt="ChargeStationの紹介">
		<div class="post-list-char">
			<span class="post-meta">2015年02月16日 Category: works</span>
			<h2>
				ChargeStationの紹介
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさん、こんにちは。
14の けり @Ryokeri14 です。
春休みになりました。
みなさん、進捗どうですか？

今日ご紹介するのは
Charge Station
です。

これだけだと何かわからないので簡単に説明すると、
自動制御の充電器です。携帯などを充電します。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-太陽光電池">太陽光電池 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-自作">自作 (9) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-robot/">
		<img src="/posts/2016-04-08-old-works-robot/icon.png" title="昔作った電子工作たち～ロボット編～" alt="昔作った電子工作たち～ロボット編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～ロボット編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-power/">
		<img src="/posts/2016-04-08-old-works-power/icon.png" title="昔作った電子工作たち～充電・電力編～" alt="昔作った電子工作たち～充電・電力編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～充電・電力編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-other/">
		<img src="/posts/2016-04-08-old-works-other/icon.jpg" title="昔作った電子工作たち～その他～" alt="昔作った電子工作たち～その他～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～その他～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

ヘッドライトを分解して調光機能を追加

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-illumination/">
		<img src="/posts/2016-04-08-old-works-illumination/icon.jpg" title="昔作った電子工作たち～LEDイルミネーション～" alt="昔作った電子工作たち～LEDイルミネーション～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～LEDイルミネーション～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-frisk/">
		<img src="/posts/2016-04-08-old-works-frisk/icon.jpg" title="昔作った電子工作たち～in FRISK 編～" alt="昔作った電子工作たち～in FRISK 編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～in FRISK 編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-08-old-works-audio/">
		<img src="/posts/2016-04-08-old-works-audio/icon.jpg" title="昔作った電子工作たち～オーディオ編～" alt="昔作った電子工作たち～オーディオ編～">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: works</span>
			<h2>
				昔作った電子工作たち～オーディオ編～
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

今回の記事では、昔作った(僕にとって)懐かしい電子工作たちを写真で簡単に紹介します。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-02-16-charge-station-1-5/">
		<img src="/posts/2015-02-16-charge-station-1-5/icon.jpg" title="ChargeStationの紹介" alt="ChargeStationの紹介">
		<div class="post-list-char">
			<span class="post-meta">2015年02月16日 Category: works</span>
			<h2>
				ChargeStationの紹介
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさん、こんにちは。
14の けり @Ryokeri14 です。
春休みになりました。
みなさん、進捗どうですか？

今日ご紹介するのは
Charge Station
です。

これだけだと何かわからないので簡単に説明すると、
自動制御の充電器です。携帯などを充電します。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-マイコン">マイコン (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-08-pic18f27j53/">
		<img src="/posts/2016-01-08-pic18f27j53/icon.jpg" title="PIC18F27J53のすすめ" alt="PIC18F27J53のすすめ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月08日 Category: explanations</span>
			<h2>
				PIC18F27J53のすすめ
			</h2>
			<span class="post-meta" style="max-height:4em;">PIC18F27J53のいいところ

秋月で売っていること

電子工作をするうえでこれはとても大事なこと。「秋月で売っているなら使ってみるか」ってなりますよね。

もちろん、秋月なので値段が安い！！
1個270円です(2016年1月現在)。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-充電器">充電器 (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-10-09-charge-station-6/">
		<img src="/posts/2015-10-09-charge-station-6/icon.jpg" title="Charge Station" alt="Charge Station">
		<div class="post-list-char">
			<span class="post-meta">2015年10月09日 Category: works</span>
			<h2>
				Charge Station
			</h2>
			<span class="post-meta" style="max-height:4em;">
	
	
	
	


	
		概要
		　ChargeStationとは自作の携帯電話充電器です。僕が命名しました。充電が終わると自動で給電を止めるので、電気の節約になります。
	


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-02-16-charge-station-1-5/">
		<img src="/posts/2015-02-16-charge-station-1-5/icon.jpg" title="ChargeStationの紹介" alt="ChargeStationの紹介">
		<div class="post-list-char">
			<span class="post-meta">2015年02月16日 Category: works</span>
			<h2>
				ChargeStationの紹介
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさん、こんにちは。
14の けり @Ryokeri14 です。
春休みになりました。
みなさん、進捗どうですか？

今日ご紹介するのは
Charge Station
です。

これだけだと何かわからないので簡単に説明すると、
自動制御の充電器です。携帯などを充電します。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-節電">節電 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2014-09-14-solar-system/">
		<img src="/posts/2014-09-14-solar-system/icon.jpg" title="100W級ソーラーシステムの自作" alt="100W級ソーラーシステムの自作">
		<div class="post-list-char">
			<span class="post-meta">2014年09月14日 Category: works</span>
			<h2>
				100W級ソーラーシステムの自作
			</h2>
			<span class="post-meta" style="max-height:4em;">どーも。椋けり（twitter:@Ryokeri14）です。id研です。

夏休みにもかかわらず、バイトを入れすぎて
全然遊んでないじゃないか！

じゃあ電子工作をしよう！


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Charge Station">Charge Station (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-10-09-charge-station-6/">
		<img src="/posts/2015-10-09-charge-station-6/icon.jpg" title="Charge Station" alt="Charge Station">
		<div class="post-list-char">
			<span class="post-meta">2015年10月09日 Category: works</span>
			<h2>
				Charge Station
			</h2>
			<span class="post-meta" style="max-height:4em;">
	
	
	
	


	
		概要
		　ChargeStationとは自作の携帯電話充電器です。僕が命名しました。充電が終わると自動で給電を止めるので、電気の節約になります。
	


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-02-16-charge-station-1-5/">
		<img src="/posts/2015-02-16-charge-station-1-5/icon.jpg" title="ChargeStationの紹介" alt="ChargeStationの紹介">
		<div class="post-list-char">
			<span class="post-meta">2015年02月16日 Category: works</span>
			<h2>
				ChargeStationの紹介
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさん、こんにちは。
14の けり @Ryokeri14 です。
春休みになりました。
みなさん、進捗どうですか？

今日ご紹介するのは
Charge Station
です。

これだけだと何かわからないので簡単に説明すると、
自動制御の充電器です。携帯などを充電します。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-PIC">PIC (9) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-12-low-power-clock/">
		<img src="/posts/2016-09-12-low-power-clock/icon.jpg" title="PICで省エネ時計を作る" alt="PICで省エネ時計を作る">
		<div class="post-list-char">
			<span class="post-meta">2016年09月12日 Category: works</span>
			<h2>
				PICで省エネ時計を作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PICで時計

久しぶりにPICの話題です．しばらくESP8266やARMマイコンなど，上級のマイコンを使っていましたが，またPICを使ってみたくなりました．

他のマイコンには真似できないような超低消費電力の時計を作ってみました．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-09-02-pic-rtcc/">
		<img src="/home/icon.png" title="PICでリアルタイムクロック" alt="PICでリアルタイムクロック">
		<div class="post-list-char">
			<span class="post-meta">2016年09月02日 Category: memos</span>
			<h2>
				PICでリアルタイムクロック
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53は，リアルタイムクロック&amp;カレンダー(RTCC)モジュールをハードウェアで持っています．今回はそれを使用するためのライブラリを作ったので紹介します．

自作のRTCCライブラリ

必要なソースファイル


  My_RTCC.h
  My_RTCC.c
  My_button.h
  My_button.c
  main.c


概要

変数

このプログラムでは、時刻情報を持つ変数が３つある。


  PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
  time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
  time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。


以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
#### 使い方


  TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
  CONFIGを設定する。RTCOSC = T1OSCREF
  その次に、RTCC_init();を書く。（初期設定関数）
  mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
  任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
  時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
  adjust_time_inc()とadjust_time_dec()で調整するとよい。
  時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。


RTCCライブラリ

My_RTCC.h

/* 
 * File:   My_RTCC.h
 * Author: Ryotaro Onuki
 *
 * Created on 2015/03/19, 0:02
 * 
 * PIC18F28J53用リアルタイムクロックプログラム
 * ○概要
 * このプログラムでは、時刻情報を持つ変数が３つある。
 * 1.PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
 * 2.time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
 * 3.time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。
 * 以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
 * ○使い方
 * 1.TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
 * 2.CONFIGを設定する。RTCOSC = T1OSCREF
 * 3.その次に、RTCC_init();を書く。（初期設定関数）
 * 4.mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
 * 5.任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
 * 6.時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
 * 7.adjust_time_inc()とadjust_time_dec()で調整するとよい。
 * 8.時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。
 */

#ifndef MY_RTCC_H
#define	MY_RTCC_H

/** INCLUDES *******************************************************/
#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include "My_button.h"

/** VALUES *********************************************************/
#define MINUTE ((epoch_t)60)
#define HOUR ((epoch_t)60*60)
#define DAY ((epoch_t)60*60*24)

/** STRUCTURE ******************************************************/
// epoch型を定義。2000年1月1日0時00分からの総秒数。

typedef uint32_t epoch_t;

// 時刻合わせ用のフラグの構造体を定義。

typedef struct {

    union {
        uint8_t flags;

        struct {
            uint8_t ss : 1;
            uint8_t mm : 1;
            uint8_t hh : 1;
            uint8_t DD : 1;
            uint8_t MM : 1;
            uint8_t YY : 1;
        } flag;
    };
} edit_t;

// RTCC関連すべてを詰めた構造体。実際に使用する。

typedef struct {
    epoch_t epoch;
    uint8_t ss;
    uint8_t mm;
    uint8_t hh;
    uint8_t EE;
    uint8_t DD;
    uint8_t MM;
    uint8_t YY;
    uint8_t colon;
    uint8_t halfsec;
    edit_t edit;
} time_t;

/** VARIABLES ******************************************************/
// 表示用の曜日charをconstで定義。
extern const char weekday_3char[7][4];
// 現在時刻
extern time_t now;
// 時間が変わった時だけフラグが経つ。表示器の時刻の更新はこのフラグの監視をして行えばよい。
extern uint8_t time_change_flag;
// main_init()に書くこと。
void RTCC_init(void);
// Call this in the main loop
void RTCC_task(void);

/** USER FUNCTIONS *************************************************/
/** Transform time User Functions **/
// 時刻をRTCC基準でそろえる
void RTCC_from_RTCC(time_t *tm);
// 時刻をカレンダータイム基準でそろえる
void RTCC_from_caltime(time_t *tm);
// 時刻をエポック基準でそろえる
void RTCC_from_epoch(time_t *tm);
// return month length
uint8_t month_length(uint8_t year, uint8_t month);

/** LCD display **/
// 各項目表示用関数。ユーザーは使わない。
static void display_dec(char *str, uint8_t dec, uint8_t edit);
// 0802サイズ液晶用、文字列作成関数
void display_time_0802(time_t *tm, char *line0, char *line1);
// 1608サイズ液晶用、文字列作成関数
void display_time_1602(time_t *tm, char *line0, char *line1);

/** adjust the time **/
// 時刻編集モードを切り替える
void RTCC_adjust_time_toggle(time_t *tm);
// 編集中の時刻針を切り替える
void RTCC_adjust_time_cursor(time_t *tm);
// 編集中の時刻針を１つ増やす
void RTCC_adjust_time_inc(time_t *tm);
// 編集中の時刻針を１つ減らす
void RTCC_adjust_time_dec(time_t *tm);
// 3つのボタンで時刻合わせ
void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec);

/** FUNCTIONS ******************************************************/
/** en/decode number **/
// from decimal to hex
static uint8_t d_to_x(uint8_t dec);
// from hex to decimal
static uint8_t x_to_d(uint8_t hex);
// quotをdivで割って、余りを返す。よく使うので関数化した。
static epoch_t get_quot_rem(epoch_t *quot, uint8_t div);

/** Transform time **/
// RTCCをカレンダタイムに変換、上書き。
static void RTCC_to_caltime(time_t *tm);
// カレンダタイムをRTCCに変換、上書き。
static void caltime_to_RTCC(time_t *tm);
// Epochをカレンダタイムに変換、上書き。
static void epoch_to_caltime(time_t *tm);
// get epoch from caltime
static void caltime_to_epoch(time_t *tm);

#endif	/* MY_RTCC_H */



My_RTCC.c

#include "My_RTCC.h"

/** INCLUDES *******************************************************/
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/** VALUES *********************************************************/


/** VARIABLES ******************************************************/
const char weekday_3char[7][4] = {"SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"};
time_t now;
uint8_t time_change_flag;

/** USER FUNCTIONS *************************************************/

void RTCC_init(void) {
    RTCCFGbits.RTCWREN = 1;
    if (RTCCFGbits.RTCWREN != 1) {
        EECON2 = 0x55;
        EECON2 = 0xAA;
        RTCCFGbits.RTCWREN = 1;
    }
    RTCCFGbits.RTCEN = 1;
    RTCCFGbits.RTCOE = 0;
    PADCFG1bits.RTSECSEL0 = 1;
    PADCFG1bits.RTSECSEL1 = 1;
    RTCCAL = 0x00;
    T1CONbits.T1OSCEN = 1;

    RTCC_from_RTCC(&amp;now);
    if (now.DD == 0) {
        now.epoch = 0;
        RTCC_from_epoch(&amp;now);
    }
}

void RTCC_task(void) {
    static uint8_t prev_halfsec;
    if (RTCCFGbits.RTCSYNC)return;
    now.halfsec = RTCCFGbits.HALFSEC;
    if (prev_halfsec != now.halfsec) {
        prev_halfsec = now.halfsec;
        now.colon = now.halfsec;
        time_change_flag = 1;
        RTCC_from_RTCC(&amp;now);
    }
}

/** Transform time User Functions **/

void RTCC_from_RTCC(time_t *tm) {
    RTCC_to_caltime(tm);
    caltime_to_epoch(tm);
}

void RTCC_from_caltime(time_t *tm) {
    caltime_to_epoch(tm);
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

void RTCC_from_epoch(time_t *tm) {
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

uint8_t month_length(uint8_t year, uint8_t month) {
    if (month == 2) return 28 + !(year &amp; 3)-!(year % 100)+!(year % 400);
    else return 31 - (((-(month &amp; 1)^month)&amp;13) == 4);

    //    switch (month) {
    //        case 1:
    //        case 3:
    //        case 5:
    //        case 7:
    //        case 8:
    //        case 10:
    //        case 12:
    //            return 31;
    //        case 4:
    //        case 6:
    //        case 9:
    //        case 11:
    //            return 30;
    //        case 2:
    //            if (year % 400 == 0)return 29;
    //            else if (year % 100 == 0)return 28;
    //            else if (year % 4 == 0) return 29;
    //            else return 28;
}

/** LCD display **/

static void display_dec(char *str, uint8_t dec, uint8_t edit) {
    char s[4];
    sprintf(s, "%02d", dec);
    if (edit &amp;&amp; now.halfsec)strcat(str, "  ");
    else strcat(str, s);
}

void display_time_0802(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);

    strcpy(line1, "");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (now.colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

void display_time_1602(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, 20, tm-&gt;edit.flag.YY);
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);
    strcat(line0, "(");
    strcat(line0, weekday_3char[tm-&gt;EE]);
    strcat(line0, ")");

    strcpy(line1, "        ");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (tm-&gt;colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

/** adjust the time **/

void RTCC_adjust_time_toggle(time_t *tm) {
    if (tm-&gt;edit.flags) {
        tm-&gt;edit.flags = 0;
    } else {
        tm-&gt;edit.flag.ss = 1;
    }
}

void RTCC_adjust_time_cursor(time_t *tm) {
    if (tm-&gt;edit.flag.ss)tm-&gt;edit.flags = 0x02;
    else if (tm-&gt;edit.flag.mm)tm-&gt;edit.flags = 0x04;
    else if (tm-&gt;edit.flag.hh)tm-&gt;edit.flags = 0x08;
    else if (tm-&gt;edit.flag.DD)tm-&gt;edit.flags = 0x10;
    else if (tm-&gt;edit.flag.MM)tm-&gt;edit.flags = 0x20;
    else if (tm-&gt;edit.flag.YY)tm-&gt;edit.flags = 0x01;
    else tm-&gt;edit.flags = 0x00;
}

void RTCC_adjust_time_inc(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch += 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch += MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch += HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch += DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch += DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &lt;= 12; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 1; i &lt; tm-&gt;MM; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY + 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch -= 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_dec(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch -= 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch -= MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch -= HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch -= DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &gt;= 1; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 12; i &gt; tm-&gt;MM; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY - 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch += 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec) {
    if (mode-&gt;flag.long_holding_3) {
        mode-&gt;flag.long_holding_3 = 0;
        RTCC_adjust_time_toggle(tm);
        mode-&gt;flags = 0;
        cnt_inc-&gt;flags = 0;
        cnt_dec-&gt;flags = 0;
    }
    if (tm-&gt;edit.flags) {
        if (mode-&gt;flag.press) {
            mode-&gt;flag.press = 0;
            RTCC_adjust_time_cursor(tm);
        }
        if (cnt_inc-&gt;flag.press) {
            cnt_inc-&gt;flag.press = 0;
            RTCC_adjust_time_inc(tm);
        }
        if (cnt_dec-&gt;flag.press) {
            cnt_dec-&gt;flag.press = 0;
            RTCC_adjust_time_dec(tm);
        }
    }
}

/** FUNCTIONS ******************************************************/

/** en/decode number **/

static uint8_t d_to_x(uint8_t dec) {
    // uint8_t quot = dec / 10;
    // return quot * 16 + dec - quot * 10;
    return dec / 10 * 6 + dec;
}

static uint8_t x_to_d(uint8_t hex) {
    return 10 * (0x0F &amp; (hex &gt;&gt; 4)) + (0x0F &amp; hex);
}

static epoch_t get_quot_rem(epoch_t *quot, uint8_t div) {
    // num /= div;
    // return rem;
    epoch_t num = *quot;
    return num - (*quot = num / div) * div; // returns rem
}

/** Transform time **/

static void RTCC_to_caltime(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);

    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;

    tm-&gt;YY = x_to_d(RTCVALL); // YY
    uint8_t dumy = RTCVALH; // Reserved
    tm-&gt;DD = x_to_d(RTCVALL); // DD
    tm-&gt;MM = x_to_d(RTCVALH); // MM
    tm-&gt;hh = x_to_d(RTCVALL); // hh
    tm-&gt;EE = x_to_d(RTCVALH); // EE
    tm-&gt;ss = x_to_d(RTCVALL); // ss
    tm-&gt;mm = x_to_d(RTCVALH); // mm
}

static void caltime_to_RTCC(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;YY);
    RTCVALH = 0x00;
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;DD);
    RTCVALH = d_to_x(tm-&gt;MM);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;hh);
    RTCVALH = d_to_x(tm-&gt;EE);
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;ss);
    RTCVALH = d_to_x(tm-&gt;mm);
}

static void epoch_to_caltime(time_t *tm) {
    // to get epoch on terminal
    // echo $(( (`date -d '2015/03/01' '+%s'` - `date -d '2000/01/01' '+%s'`) / 86400 ))
    static uint16_t day_cache = 0; //2015.03.01
    static uint8_t month_cache = 1;
    static uint8_t year_cache = 0;
    uint16_t day_since_epoch;
    uint16_t day;
    uint8_t year = 0;
    uint8_t month = 1; // month is one-based.
    epoch_t num;

    num = tm-&gt;epoch;
    tm-&gt;ss = get_quot_rem(&amp;num, 60);
    tm-&gt;mm = get_quot_rem(&amp;num, 60);
    tm-&gt;hh = get_quot_rem(&amp;num, 24);
    day = num;
    day_since_epoch = day;

    num += 6; // 2000.1.1 is Saturday(6).
    tm-&gt;EE = get_quot_rem(&amp;num, 7);

    //    if (day == day_cache) {
    //        year = year_cache;
    //        month = month_cache;
    //        day -= day_cache;
    //    }

    // day is zero - based here.
    while (day &gt;= month_length(year, month)) {
        LATB2 = 1;
        day = day - month_length(year, month);
        if (month == 12) {
            month = 1; // month is one-based.
            year++;
            //3155760000 is 2000~2100?100?????
            if (year &gt;= 100) {
                tm-&gt;epoch -= 3155760000;
                year = 0;
            }
        } else {
            month++;
        }
        month_cache = month;
        year_cache = year;
    }
    day_cache = day_since_epoch - day;
    day++; // day is one-based, not zero-based.

    tm-&gt;YY = year;
    tm-&gt;MM = month;
    tm-&gt;DD = day;
}

static void caltime_to_epoch(time_t *tm) {
    epoch_t epoch = 0;
    for (uint8_t year = 0; year &lt; tm-&gt;YY; year++) {
        for (uint8_t month = 1; month &lt;= 12; month++) {
            epoch += DAY * month_length(year, month);
        }
    }
    for (uint8_t month = 1; month &lt; tm-&gt;MM; month++) {
        epoch += DAY * month_length(tm-&gt;YY, month);
    }
    epoch += DAY * (tm-&gt;DD - 1); //day is one-based.
    epoch += HOUR * tm-&gt;hh;
    epoch += MINUTE * tm-&gt;mm;
    epoch += tm-&gt;ss;

    tm-&gt;epoch = epoch;
}



ボタンライブラリ

My_button.h

/* 
 * File:   My_button.h
 * Author: kerikun11
 *
 * Created on 2015/02/26, 19:19
 */

#ifndef MY_BUTTON_H
#define	MY_BUTTON_H

#include &lt;stdint.h&gt;

//*************************** button ***************************//
//タイマー割り込み関数にbutton_timer_interrupt(&amp;button_t,!SW)を書いておくこと。
// 48MHz, 16bit, prescaler=1:4

#define PRESS_LEVEL 2
#define LONG_HOLD_LEVEL1  16
#define LONG_HOLD_LEVEL2  60
#define LONG_HOLD_LEVEL3  150
#define LONG_HOLD_LEVEL4  300
#define LONG_HOLD_LEVEL5  500
#define LONG_HOLD_LEVEL6  700
#define LONG_HOLD_LEVEL7  900

typedef struct button {
    uint16_t cnt_sw;

    union {
        uint16_t flags;

        struct {
            uint8_t press : 1;
            uint8_t long_hold_1 : 1;
            uint8_t long_hold_2 : 1;
            uint8_t long_hold_3 : 1;
            uint8_t long_hold_4 : 1;
            uint8_t long_hold_5 : 1;
            uint8_t long_hold_6 : 1;
            uint8_t long_hold_7 : 1;
            uint8_t pressing : 1;
            uint8_t long_holding_1 : 1;
            uint8_t long_holding_2 : 1;
            uint8_t long_holding_3 : 1;
            uint8_t long_holding_4 : 1;
            uint8_t long_holding_5 : 1;
            uint8_t long_holding_6 : 1;
            uint8_t long_holding_7 : 1;
        } flag;
    };
} button_t;

void button_timer_interrupt(button_t *bt, uint8_t sw_value);

#endif	/* MY_BUTTON_H */



My_button.h

#include "My_button.h"

void button_timer_interrupt(button_t *bt, uint8_t sw_value) {
    if (sw_value) {
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL7)bt-&gt;flag.long_holding_7 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL6)bt-&gt;flag.long_holding_6 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL5)bt-&gt;flag.long_holding_5 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL4)bt-&gt;flag.long_holding_4 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL3)bt-&gt;flag.long_holding_3 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL2)bt-&gt;flag.long_holding_2 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL1)bt-&gt;flag.long_holding_1 = 1;
        if (bt-&gt;cnt_sw == PRESS_LEVEL)bt-&gt;flag.pressing = 1;
        if (bt-&gt;cnt_sw &lt; LONG_HOLD_LEVEL7 + 1) bt-&gt;cnt_sw++;
    } else {
        if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL7)bt-&gt;flag.long_hold_7 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL6)bt-&gt;flag.long_hold_6 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL5)bt-&gt;flag.long_hold_5 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL4)bt-&gt;flag.long_hold_4 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL3)bt-&gt;flag.long_hold_3 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL2)bt-&gt;flag.long_hold_2 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL1)bt-&gt;flag.long_hold_1 = 1;
        else if (bt-&gt;cnt_sw &gt;= PRESS_LEVEL)bt-&gt;flag.press = 1;
        bt-&gt;cnt_sw = 0;
        bt-&gt;flags &amp;= 0x00FF;
    }
}



使用例

UARTで毎秒時刻を送信します．

main.c

/* 
 * Project: RTCC-Sample.X
 * File:    main.c
 * Author:  Ryotaro Onuki
 *
 * Created on 2015/10/06, 14:23
 */

#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
// CONFIG1L
#pragma config WDTEN = OFF, PLLDIV = 2, CFGPLLEN = ON, STVREN = OFF, XINST = OFF
// CONFIG1H
#pragma config CPUDIV = OSC1, CP0 = OFF
// CONFIG2L
#pragma config OSC = INTOSCPLL, SOSCSEL = HIGH, CLKOEC = OFF, FCMEN = OFF, IESO = OFF
// CONFIG2H
#pragma config WDTPS = 1024
// CONFIG3L
#pragma config DSWDTOSC = T1OSCREF, RTCOSC = T1OSCREF, DSBOREN = OFF, DSWDTEN = OFF, DSWDTPS = G2
// CONFIG3H
#pragma config IOL1WAY = OFF, ADCSEL = BIT12, MSSP7B_EN = MSK7
// CONFIG4L
#pragma config WPFP = PAGE_127, WPCFG = OFF
// CONFIG4H
#pragma config WPDIS = OFF, WPEND = PAGE_WPFP, LS48MHZ = SYS48X8

#define _XTAL_FREQ 48000000

#include "My_RTCC.h"
#include "My_button.h"

// I/O Mapping
#define MODE_BUTTON PORTBbits.RB0
#define INC_BUTTON PORTBbits.RB1
#define DEC_BUTTON PORTBbits.RB2

#define LED0 LATAbits.LATA0

button_t mode;
button_t inc;
button_t dec;

void interrupt ISR(void) {
    if (PIE1bits.TMR1IE &amp;&amp; PIR1bits.TMR1IF) {
        PIR1bits.TMR1IF = 0;
    }
    if (PIE2bits.TMR3IE &amp;&amp; PIR2bits.TMR3IF) {
        PIR2bits.TMR3IF = 0;
        LED0 = !LED0;
        button_timer_interrupt(&amp;mode, !MODE_BUTTON);
        button_timer_interrupt(&amp;inc, !INC_BUTTON);
        button_timer_interrupt(&amp;dec, !DEC_BUTTON);
    }
    if (PIR1bits.RCIF &amp;&amp; PIE1bits.RCIE) {
        while (!PIR1bits.TXIF); // 送信完了まで待つ。
        TXREG1 = RCREG1; // 受信データをそのまま送信
    }
}

void main_init(void) {
    OSCCONbits.IRCF = 7;
    OSCTUNEbits.PLLEN = 1;
    OSCCONbits.SCS = 0;
    TRISA = 0b00100000; // IO,IO,Vcap,IO,IO,IO,IO,IO
    TRISB = 0b00110111; // IO,IO,SDA,SCL,IO,IO,IO,IO
    TRISC = 0b10111010; // RX,TX,D+,D-,Vusb,IO,T1OSI,T1OSO
    ANCON0 = 0b11111111; // x,x,x,AN4,AN3,AN2,AN1,AN0
    ANCON1 = 0b11111111; // x,x,x,x,AN12,AN11,AN10,AN9,AN8
    INTCON2bits.RBPU = 0; // Port:B Pull-up enable
    // Timer 1 init
    T1CONbits.TMR1CS = 2; // Clock = T1OSC
    T1CONbits.T1OSCEN = 1; // Drive Crystal
    T1CONbits.T1CKPS = 0; // No devide
    T1CONbits.nT1SYNC = 1; // No Sync
    T1CONbits.RD16 = 0; // Timer1 = 2 x 8bit timer
    T1CONbits.TMR1ON = 1; // module enable
    IPR1bits.TMR1IP = 0; // low priority
    PIR1bits.TMR1IF = 0;
    PIE1bits.TMR1IE = 1;
    INTCONbits.PEIE = 1;
    // Timer 3 init
    T3CONbits.TMR3CS = 0; // Clock = Fosc/4
    T3CONbits.T3OSCEN = 0; // Not Drive Crystal
    T3CONbits.T3CKPS = 2; // clock/4
    T3CONbits.RD163 = 0; // Timer3=16bit timer
    T3CONbits.TMR3ON = 1; // module enable
    IPR2bits.TMR3IP = 0; // low priority
    PIR2bits.TMR3IF = 0;
    PIE2bits.TMR3IE = 1; // interrupt enable
    INTCONbits.PEIE = 1;
    // RTCC init
    RTCC_init();
    // UART init
    TXSTA1bits.TX9 = 0; // 0:8-bit
    TXSTA1bits.TXEN = 1; //1:enable
    TXSTA1bits.SYNC = 0; // 0:Asynchronous mode
    TXSTA1bits.BRGH = 0; // 1:High Speed
    RCSTA1bits.SPEN = 1; // 1:Serial Port enable
    RCSTA1bits.RX9 = 0; // 0:8-bit
    RCSTA1bits.CREN = 1; // 1:continuous receive enable
    BAUDCON1bits.BRG16 = 0; // 1:use 16-bit SPBRG
    SPBRG1 = _XTAL_FREQ / 64 / 9600 - 1;
    SPBRGH1 = 0;
    IPR1bits.RC1IP = 0; //0:low priority
    PIE1bits.RCIE = 1;
    INTCONbits.PEIE = 1;
}

void delay(uint16_t t) {
    while (t--)__delay_ms(1);
}

int main(void) {
    main_init();
    INTCONbits.GIE = 1;

    while (1) {
        RTCC_task();
        RTCC_adjust_time_button(&amp;now, &amp;mode, &amp;inc, &amp;dec);

        if (time_change_flag) {
            time_change_flag = 0;
            char str[30];
            sprintf(str, "\t20%02d/%02d/%02d(%s)%02d:%02d-%02d\n",
                    now.YY,
                    now.MM,
                    now.DD,
                    weekday_3char[now.EE],
                    now.hh,
                    now.mm,
                    now.ss);
            for (uint8_t i = 0; str[i]; i++) {
                while (!PIR1bits.TXIF); //送信完了まで待つ
                TXREG1 = str[i];
            }
        }
    }

    return 0;
}



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-10-pic-usb/">
		<img src="/posts/2016-01-10-pic-usb/icon.jpg" title="PICでUSB通信" alt="PICでUSB通信">
		<div class="post-list-char">
			<span class="post-meta">2016年01月10日 Category: explanations</span>
			<h2>
				PICでUSB通信
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBの使い方について書きたいと思います。

今回紹介する方法では、USBをUARTの代わりに使えるようにするものです。PICをPCにつなぐとCOMポートが現れます。

これならUSBシリアル変換モジュールを使う必要はなくります。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-08-pic18f27j53/">
		<img src="/posts/2016-01-08-pic18f27j53/icon.jpg" title="PIC18F27J53のすすめ" alt="PIC18F27J53のすすめ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月08日 Category: explanations</span>
			<h2>
				PIC18F27J53のすすめ
			</h2>
			<span class="post-meta" style="max-height:4em;">PIC18F27J53のいいところ

秋月で売っていること

電子工作をするうえでこれはとても大事なこと。「秋月で売っているなら使ってみるか」ってなりますよね。

もちろん、秋月なので値段が安い！！
1個270円です(2016年1月現在)。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-02-16-charge-station-1-5/">
		<img src="/posts/2015-02-16-charge-station-1-5/icon.jpg" title="ChargeStationの紹介" alt="ChargeStationの紹介">
		<div class="post-list-char">
			<span class="post-meta">2015年02月16日 Category: works</span>
			<h2>
				ChargeStationの紹介
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさん、こんにちは。
14の けり @Ryokeri14 です。
春休みになりました。
みなさん、進捗どうですか？

今日ご紹介するのは
Charge Station
です。

これだけだと何かわからないので簡単に説明すると、
自動制御の充電器です。携帯などを充電します。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-めだか">めだか (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-13-new-fish/">
		<img src="/posts/2016-07-13-new-fish/icon.jpg" title="メダカが増えました！" alt="メダカが増えました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月13日 Category: blogs</span>
			<h2>
				メダカが増えました！
			</h2>
			<span class="post-meta" style="max-height:4em;">卵がいっぱい！！ 7/5
暖かくなってきたこの時期，ペットのメダカにたくさんの卵ができました．すでに卵の中から目が透けていて今にも孵化しそうです！

毎日水替えをしないとカビが生えてしまうので，目が離せません！

ちなみに，カビ防止のために，卵の段階では水道水の方がいいらしいです．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-LED">LED (4) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-PIC18F27J53">PIC18F27J53 (6) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-12-low-power-clock/">
		<img src="/posts/2016-09-12-low-power-clock/icon.jpg" title="PICで省エネ時計を作る" alt="PICで省エネ時計を作る">
		<div class="post-list-char">
			<span class="post-meta">2016年09月12日 Category: works</span>
			<h2>
				PICで省エネ時計を作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PICで時計

久しぶりにPICの話題です．しばらくESP8266やARMマイコンなど，上級のマイコンを使っていましたが，またPICを使ってみたくなりました．

他のマイコンには真似できないような超低消費電力の時計を作ってみました．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-09-02-pic-rtcc/">
		<img src="/home/icon.png" title="PICでリアルタイムクロック" alt="PICでリアルタイムクロック">
		<div class="post-list-char">
			<span class="post-meta">2016年09月02日 Category: memos</span>
			<h2>
				PICでリアルタイムクロック
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53は，リアルタイムクロック&amp;カレンダー(RTCC)モジュールをハードウェアで持っています．今回はそれを使用するためのライブラリを作ったので紹介します．

自作のRTCCライブラリ

必要なソースファイル


  My_RTCC.h
  My_RTCC.c
  My_button.h
  My_button.c
  main.c


概要

変数

このプログラムでは、時刻情報を持つ変数が３つある。


  PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
  time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
  time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。


以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
#### 使い方


  TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
  CONFIGを設定する。RTCOSC = T1OSCREF
  その次に、RTCC_init();を書く。（初期設定関数）
  mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
  任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
  時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
  adjust_time_inc()とadjust_time_dec()で調整するとよい。
  時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。


RTCCライブラリ

My_RTCC.h

/* 
 * File:   My_RTCC.h
 * Author: Ryotaro Onuki
 *
 * Created on 2015/03/19, 0:02
 * 
 * PIC18F28J53用リアルタイムクロックプログラム
 * ○概要
 * このプログラムでは、時刻情報を持つ変数が３つある。
 * 1.PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
 * 2.time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
 * 3.time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。
 * 以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
 * ○使い方
 * 1.TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
 * 2.CONFIGを設定する。RTCOSC = T1OSCREF
 * 3.その次に、RTCC_init();を書く。（初期設定関数）
 * 4.mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
 * 5.任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
 * 6.時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
 * 7.adjust_time_inc()とadjust_time_dec()で調整するとよい。
 * 8.時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。
 */

#ifndef MY_RTCC_H
#define	MY_RTCC_H

/** INCLUDES *******************************************************/
#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include "My_button.h"

/** VALUES *********************************************************/
#define MINUTE ((epoch_t)60)
#define HOUR ((epoch_t)60*60)
#define DAY ((epoch_t)60*60*24)

/** STRUCTURE ******************************************************/
// epoch型を定義。2000年1月1日0時00分からの総秒数。

typedef uint32_t epoch_t;

// 時刻合わせ用のフラグの構造体を定義。

typedef struct {

    union {
        uint8_t flags;

        struct {
            uint8_t ss : 1;
            uint8_t mm : 1;
            uint8_t hh : 1;
            uint8_t DD : 1;
            uint8_t MM : 1;
            uint8_t YY : 1;
        } flag;
    };
} edit_t;

// RTCC関連すべてを詰めた構造体。実際に使用する。

typedef struct {
    epoch_t epoch;
    uint8_t ss;
    uint8_t mm;
    uint8_t hh;
    uint8_t EE;
    uint8_t DD;
    uint8_t MM;
    uint8_t YY;
    uint8_t colon;
    uint8_t halfsec;
    edit_t edit;
} time_t;

/** VARIABLES ******************************************************/
// 表示用の曜日charをconstで定義。
extern const char weekday_3char[7][4];
// 現在時刻
extern time_t now;
// 時間が変わった時だけフラグが経つ。表示器の時刻の更新はこのフラグの監視をして行えばよい。
extern uint8_t time_change_flag;
// main_init()に書くこと。
void RTCC_init(void);
// Call this in the main loop
void RTCC_task(void);

/** USER FUNCTIONS *************************************************/
/** Transform time User Functions **/
// 時刻をRTCC基準でそろえる
void RTCC_from_RTCC(time_t *tm);
// 時刻をカレンダータイム基準でそろえる
void RTCC_from_caltime(time_t *tm);
// 時刻をエポック基準でそろえる
void RTCC_from_epoch(time_t *tm);
// return month length
uint8_t month_length(uint8_t year, uint8_t month);

/** LCD display **/
// 各項目表示用関数。ユーザーは使わない。
static void display_dec(char *str, uint8_t dec, uint8_t edit);
// 0802サイズ液晶用、文字列作成関数
void display_time_0802(time_t *tm, char *line0, char *line1);
// 1608サイズ液晶用、文字列作成関数
void display_time_1602(time_t *tm, char *line0, char *line1);

/** adjust the time **/
// 時刻編集モードを切り替える
void RTCC_adjust_time_toggle(time_t *tm);
// 編集中の時刻針を切り替える
void RTCC_adjust_time_cursor(time_t *tm);
// 編集中の時刻針を１つ増やす
void RTCC_adjust_time_inc(time_t *tm);
// 編集中の時刻針を１つ減らす
void RTCC_adjust_time_dec(time_t *tm);
// 3つのボタンで時刻合わせ
void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec);

/** FUNCTIONS ******************************************************/
/** en/decode number **/
// from decimal to hex
static uint8_t d_to_x(uint8_t dec);
// from hex to decimal
static uint8_t x_to_d(uint8_t hex);
// quotをdivで割って、余りを返す。よく使うので関数化した。
static epoch_t get_quot_rem(epoch_t *quot, uint8_t div);

/** Transform time **/
// RTCCをカレンダタイムに変換、上書き。
static void RTCC_to_caltime(time_t *tm);
// カレンダタイムをRTCCに変換、上書き。
static void caltime_to_RTCC(time_t *tm);
// Epochをカレンダタイムに変換、上書き。
static void epoch_to_caltime(time_t *tm);
// get epoch from caltime
static void caltime_to_epoch(time_t *tm);

#endif	/* MY_RTCC_H */



My_RTCC.c

#include "My_RTCC.h"

/** INCLUDES *******************************************************/
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/** VALUES *********************************************************/


/** VARIABLES ******************************************************/
const char weekday_3char[7][4] = {"SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"};
time_t now;
uint8_t time_change_flag;

/** USER FUNCTIONS *************************************************/

void RTCC_init(void) {
    RTCCFGbits.RTCWREN = 1;
    if (RTCCFGbits.RTCWREN != 1) {
        EECON2 = 0x55;
        EECON2 = 0xAA;
        RTCCFGbits.RTCWREN = 1;
    }
    RTCCFGbits.RTCEN = 1;
    RTCCFGbits.RTCOE = 0;
    PADCFG1bits.RTSECSEL0 = 1;
    PADCFG1bits.RTSECSEL1 = 1;
    RTCCAL = 0x00;
    T1CONbits.T1OSCEN = 1;

    RTCC_from_RTCC(&amp;now);
    if (now.DD == 0) {
        now.epoch = 0;
        RTCC_from_epoch(&amp;now);
    }
}

void RTCC_task(void) {
    static uint8_t prev_halfsec;
    if (RTCCFGbits.RTCSYNC)return;
    now.halfsec = RTCCFGbits.HALFSEC;
    if (prev_halfsec != now.halfsec) {
        prev_halfsec = now.halfsec;
        now.colon = now.halfsec;
        time_change_flag = 1;
        RTCC_from_RTCC(&amp;now);
    }
}

/** Transform time User Functions **/

void RTCC_from_RTCC(time_t *tm) {
    RTCC_to_caltime(tm);
    caltime_to_epoch(tm);
}

void RTCC_from_caltime(time_t *tm) {
    caltime_to_epoch(tm);
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

void RTCC_from_epoch(time_t *tm) {
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

uint8_t month_length(uint8_t year, uint8_t month) {
    if (month == 2) return 28 + !(year &amp; 3)-!(year % 100)+!(year % 400);
    else return 31 - (((-(month &amp; 1)^month)&amp;13) == 4);

    //    switch (month) {
    //        case 1:
    //        case 3:
    //        case 5:
    //        case 7:
    //        case 8:
    //        case 10:
    //        case 12:
    //            return 31;
    //        case 4:
    //        case 6:
    //        case 9:
    //        case 11:
    //            return 30;
    //        case 2:
    //            if (year % 400 == 0)return 29;
    //            else if (year % 100 == 0)return 28;
    //            else if (year % 4 == 0) return 29;
    //            else return 28;
}

/** LCD display **/

static void display_dec(char *str, uint8_t dec, uint8_t edit) {
    char s[4];
    sprintf(s, "%02d", dec);
    if (edit &amp;&amp; now.halfsec)strcat(str, "  ");
    else strcat(str, s);
}

void display_time_0802(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);

    strcpy(line1, "");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (now.colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

void display_time_1602(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, 20, tm-&gt;edit.flag.YY);
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);
    strcat(line0, "(");
    strcat(line0, weekday_3char[tm-&gt;EE]);
    strcat(line0, ")");

    strcpy(line1, "        ");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (tm-&gt;colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

/** adjust the time **/

void RTCC_adjust_time_toggle(time_t *tm) {
    if (tm-&gt;edit.flags) {
        tm-&gt;edit.flags = 0;
    } else {
        tm-&gt;edit.flag.ss = 1;
    }
}

void RTCC_adjust_time_cursor(time_t *tm) {
    if (tm-&gt;edit.flag.ss)tm-&gt;edit.flags = 0x02;
    else if (tm-&gt;edit.flag.mm)tm-&gt;edit.flags = 0x04;
    else if (tm-&gt;edit.flag.hh)tm-&gt;edit.flags = 0x08;
    else if (tm-&gt;edit.flag.DD)tm-&gt;edit.flags = 0x10;
    else if (tm-&gt;edit.flag.MM)tm-&gt;edit.flags = 0x20;
    else if (tm-&gt;edit.flag.YY)tm-&gt;edit.flags = 0x01;
    else tm-&gt;edit.flags = 0x00;
}

void RTCC_adjust_time_inc(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch += 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch += MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch += HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch += DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch += DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &lt;= 12; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 1; i &lt; tm-&gt;MM; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY + 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch -= 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_dec(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch -= 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch -= MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch -= HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch -= DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &gt;= 1; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 12; i &gt; tm-&gt;MM; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY - 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch += 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec) {
    if (mode-&gt;flag.long_holding_3) {
        mode-&gt;flag.long_holding_3 = 0;
        RTCC_adjust_time_toggle(tm);
        mode-&gt;flags = 0;
        cnt_inc-&gt;flags = 0;
        cnt_dec-&gt;flags = 0;
    }
    if (tm-&gt;edit.flags) {
        if (mode-&gt;flag.press) {
            mode-&gt;flag.press = 0;
            RTCC_adjust_time_cursor(tm);
        }
        if (cnt_inc-&gt;flag.press) {
            cnt_inc-&gt;flag.press = 0;
            RTCC_adjust_time_inc(tm);
        }
        if (cnt_dec-&gt;flag.press) {
            cnt_dec-&gt;flag.press = 0;
            RTCC_adjust_time_dec(tm);
        }
    }
}

/** FUNCTIONS ******************************************************/

/** en/decode number **/

static uint8_t d_to_x(uint8_t dec) {
    // uint8_t quot = dec / 10;
    // return quot * 16 + dec - quot * 10;
    return dec / 10 * 6 + dec;
}

static uint8_t x_to_d(uint8_t hex) {
    return 10 * (0x0F &amp; (hex &gt;&gt; 4)) + (0x0F &amp; hex);
}

static epoch_t get_quot_rem(epoch_t *quot, uint8_t div) {
    // num /= div;
    // return rem;
    epoch_t num = *quot;
    return num - (*quot = num / div) * div; // returns rem
}

/** Transform time **/

static void RTCC_to_caltime(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);

    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;

    tm-&gt;YY = x_to_d(RTCVALL); // YY
    uint8_t dumy = RTCVALH; // Reserved
    tm-&gt;DD = x_to_d(RTCVALL); // DD
    tm-&gt;MM = x_to_d(RTCVALH); // MM
    tm-&gt;hh = x_to_d(RTCVALL); // hh
    tm-&gt;EE = x_to_d(RTCVALH); // EE
    tm-&gt;ss = x_to_d(RTCVALL); // ss
    tm-&gt;mm = x_to_d(RTCVALH); // mm
}

static void caltime_to_RTCC(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;YY);
    RTCVALH = 0x00;
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;DD);
    RTCVALH = d_to_x(tm-&gt;MM);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;hh);
    RTCVALH = d_to_x(tm-&gt;EE);
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;ss);
    RTCVALH = d_to_x(tm-&gt;mm);
}

static void epoch_to_caltime(time_t *tm) {
    // to get epoch on terminal
    // echo $(( (`date -d '2015/03/01' '+%s'` - `date -d '2000/01/01' '+%s'`) / 86400 ))
    static uint16_t day_cache = 0; //2015.03.01
    static uint8_t month_cache = 1;
    static uint8_t year_cache = 0;
    uint16_t day_since_epoch;
    uint16_t day;
    uint8_t year = 0;
    uint8_t month = 1; // month is one-based.
    epoch_t num;

    num = tm-&gt;epoch;
    tm-&gt;ss = get_quot_rem(&amp;num, 60);
    tm-&gt;mm = get_quot_rem(&amp;num, 60);
    tm-&gt;hh = get_quot_rem(&amp;num, 24);
    day = num;
    day_since_epoch = day;

    num += 6; // 2000.1.1 is Saturday(6).
    tm-&gt;EE = get_quot_rem(&amp;num, 7);

    //    if (day == day_cache) {
    //        year = year_cache;
    //        month = month_cache;
    //        day -= day_cache;
    //    }

    // day is zero - based here.
    while (day &gt;= month_length(year, month)) {
        LATB2 = 1;
        day = day - month_length(year, month);
        if (month == 12) {
            month = 1; // month is one-based.
            year++;
            //3155760000 is 2000~2100?100?????
            if (year &gt;= 100) {
                tm-&gt;epoch -= 3155760000;
                year = 0;
            }
        } else {
            month++;
        }
        month_cache = month;
        year_cache = year;
    }
    day_cache = day_since_epoch - day;
    day++; // day is one-based, not zero-based.

    tm-&gt;YY = year;
    tm-&gt;MM = month;
    tm-&gt;DD = day;
}

static void caltime_to_epoch(time_t *tm) {
    epoch_t epoch = 0;
    for (uint8_t year = 0; year &lt; tm-&gt;YY; year++) {
        for (uint8_t month = 1; month &lt;= 12; month++) {
            epoch += DAY * month_length(year, month);
        }
    }
    for (uint8_t month = 1; month &lt; tm-&gt;MM; month++) {
        epoch += DAY * month_length(tm-&gt;YY, month);
    }
    epoch += DAY * (tm-&gt;DD - 1); //day is one-based.
    epoch += HOUR * tm-&gt;hh;
    epoch += MINUTE * tm-&gt;mm;
    epoch += tm-&gt;ss;

    tm-&gt;epoch = epoch;
}



ボタンライブラリ

My_button.h

/* 
 * File:   My_button.h
 * Author: kerikun11
 *
 * Created on 2015/02/26, 19:19
 */

#ifndef MY_BUTTON_H
#define	MY_BUTTON_H

#include &lt;stdint.h&gt;

//*************************** button ***************************//
//タイマー割り込み関数にbutton_timer_interrupt(&amp;button_t,!SW)を書いておくこと。
// 48MHz, 16bit, prescaler=1:4

#define PRESS_LEVEL 2
#define LONG_HOLD_LEVEL1  16
#define LONG_HOLD_LEVEL2  60
#define LONG_HOLD_LEVEL3  150
#define LONG_HOLD_LEVEL4  300
#define LONG_HOLD_LEVEL5  500
#define LONG_HOLD_LEVEL6  700
#define LONG_HOLD_LEVEL7  900

typedef struct button {
    uint16_t cnt_sw;

    union {
        uint16_t flags;

        struct {
            uint8_t press : 1;
            uint8_t long_hold_1 : 1;
            uint8_t long_hold_2 : 1;
            uint8_t long_hold_3 : 1;
            uint8_t long_hold_4 : 1;
            uint8_t long_hold_5 : 1;
            uint8_t long_hold_6 : 1;
            uint8_t long_hold_7 : 1;
            uint8_t pressing : 1;
            uint8_t long_holding_1 : 1;
            uint8_t long_holding_2 : 1;
            uint8_t long_holding_3 : 1;
            uint8_t long_holding_4 : 1;
            uint8_t long_holding_5 : 1;
            uint8_t long_holding_6 : 1;
            uint8_t long_holding_7 : 1;
        } flag;
    };
} button_t;

void button_timer_interrupt(button_t *bt, uint8_t sw_value);

#endif	/* MY_BUTTON_H */



My_button.h

#include "My_button.h"

void button_timer_interrupt(button_t *bt, uint8_t sw_value) {
    if (sw_value) {
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL7)bt-&gt;flag.long_holding_7 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL6)bt-&gt;flag.long_holding_6 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL5)bt-&gt;flag.long_holding_5 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL4)bt-&gt;flag.long_holding_4 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL3)bt-&gt;flag.long_holding_3 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL2)bt-&gt;flag.long_holding_2 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL1)bt-&gt;flag.long_holding_1 = 1;
        if (bt-&gt;cnt_sw == PRESS_LEVEL)bt-&gt;flag.pressing = 1;
        if (bt-&gt;cnt_sw &lt; LONG_HOLD_LEVEL7 + 1) bt-&gt;cnt_sw++;
    } else {
        if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL7)bt-&gt;flag.long_hold_7 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL6)bt-&gt;flag.long_hold_6 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL5)bt-&gt;flag.long_hold_5 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL4)bt-&gt;flag.long_hold_4 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL3)bt-&gt;flag.long_hold_3 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL2)bt-&gt;flag.long_hold_2 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL1)bt-&gt;flag.long_hold_1 = 1;
        else if (bt-&gt;cnt_sw &gt;= PRESS_LEVEL)bt-&gt;flag.press = 1;
        bt-&gt;cnt_sw = 0;
        bt-&gt;flags &amp;= 0x00FF;
    }
}



使用例

UARTで毎秒時刻を送信します．

main.c

/* 
 * Project: RTCC-Sample.X
 * File:    main.c
 * Author:  Ryotaro Onuki
 *
 * Created on 2015/10/06, 14:23
 */

#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
// CONFIG1L
#pragma config WDTEN = OFF, PLLDIV = 2, CFGPLLEN = ON, STVREN = OFF, XINST = OFF
// CONFIG1H
#pragma config CPUDIV = OSC1, CP0 = OFF
// CONFIG2L
#pragma config OSC = INTOSCPLL, SOSCSEL = HIGH, CLKOEC = OFF, FCMEN = OFF, IESO = OFF
// CONFIG2H
#pragma config WDTPS = 1024
// CONFIG3L
#pragma config DSWDTOSC = T1OSCREF, RTCOSC = T1OSCREF, DSBOREN = OFF, DSWDTEN = OFF, DSWDTPS = G2
// CONFIG3H
#pragma config IOL1WAY = OFF, ADCSEL = BIT12, MSSP7B_EN = MSK7
// CONFIG4L
#pragma config WPFP = PAGE_127, WPCFG = OFF
// CONFIG4H
#pragma config WPDIS = OFF, WPEND = PAGE_WPFP, LS48MHZ = SYS48X8

#define _XTAL_FREQ 48000000

#include "My_RTCC.h"
#include "My_button.h"

// I/O Mapping
#define MODE_BUTTON PORTBbits.RB0
#define INC_BUTTON PORTBbits.RB1
#define DEC_BUTTON PORTBbits.RB2

#define LED0 LATAbits.LATA0

button_t mode;
button_t inc;
button_t dec;

void interrupt ISR(void) {
    if (PIE1bits.TMR1IE &amp;&amp; PIR1bits.TMR1IF) {
        PIR1bits.TMR1IF = 0;
    }
    if (PIE2bits.TMR3IE &amp;&amp; PIR2bits.TMR3IF) {
        PIR2bits.TMR3IF = 0;
        LED0 = !LED0;
        button_timer_interrupt(&amp;mode, !MODE_BUTTON);
        button_timer_interrupt(&amp;inc, !INC_BUTTON);
        button_timer_interrupt(&amp;dec, !DEC_BUTTON);
    }
    if (PIR1bits.RCIF &amp;&amp; PIE1bits.RCIE) {
        while (!PIR1bits.TXIF); // 送信完了まで待つ。
        TXREG1 = RCREG1; // 受信データをそのまま送信
    }
}

void main_init(void) {
    OSCCONbits.IRCF = 7;
    OSCTUNEbits.PLLEN = 1;
    OSCCONbits.SCS = 0;
    TRISA = 0b00100000; // IO,IO,Vcap,IO,IO,IO,IO,IO
    TRISB = 0b00110111; // IO,IO,SDA,SCL,IO,IO,IO,IO
    TRISC = 0b10111010; // RX,TX,D+,D-,Vusb,IO,T1OSI,T1OSO
    ANCON0 = 0b11111111; // x,x,x,AN4,AN3,AN2,AN1,AN0
    ANCON1 = 0b11111111; // x,x,x,x,AN12,AN11,AN10,AN9,AN8
    INTCON2bits.RBPU = 0; // Port:B Pull-up enable
    // Timer 1 init
    T1CONbits.TMR1CS = 2; // Clock = T1OSC
    T1CONbits.T1OSCEN = 1; // Drive Crystal
    T1CONbits.T1CKPS = 0; // No devide
    T1CONbits.nT1SYNC = 1; // No Sync
    T1CONbits.RD16 = 0; // Timer1 = 2 x 8bit timer
    T1CONbits.TMR1ON = 1; // module enable
    IPR1bits.TMR1IP = 0; // low priority
    PIR1bits.TMR1IF = 0;
    PIE1bits.TMR1IE = 1;
    INTCONbits.PEIE = 1;
    // Timer 3 init
    T3CONbits.TMR3CS = 0; // Clock = Fosc/4
    T3CONbits.T3OSCEN = 0; // Not Drive Crystal
    T3CONbits.T3CKPS = 2; // clock/4
    T3CONbits.RD163 = 0; // Timer3=16bit timer
    T3CONbits.TMR3ON = 1; // module enable
    IPR2bits.TMR3IP = 0; // low priority
    PIR2bits.TMR3IF = 0;
    PIE2bits.TMR3IE = 1; // interrupt enable
    INTCONbits.PEIE = 1;
    // RTCC init
    RTCC_init();
    // UART init
    TXSTA1bits.TX9 = 0; // 0:8-bit
    TXSTA1bits.TXEN = 1; //1:enable
    TXSTA1bits.SYNC = 0; // 0:Asynchronous mode
    TXSTA1bits.BRGH = 0; // 1:High Speed
    RCSTA1bits.SPEN = 1; // 1:Serial Port enable
    RCSTA1bits.RX9 = 0; // 0:8-bit
    RCSTA1bits.CREN = 1; // 1:continuous receive enable
    BAUDCON1bits.BRG16 = 0; // 1:use 16-bit SPBRG
    SPBRG1 = _XTAL_FREQ / 64 / 9600 - 1;
    SPBRGH1 = 0;
    IPR1bits.RC1IP = 0; //0:low priority
    PIE1bits.RCIE = 1;
    INTCONbits.PEIE = 1;
}

void delay(uint16_t t) {
    while (t--)__delay_ms(1);
}

int main(void) {
    main_init();
    INTCONbits.GIE = 1;

    while (1) {
        RTCC_task();
        RTCC_adjust_time_button(&amp;now, &amp;mode, &amp;inc, &amp;dec);

        if (time_change_flag) {
            time_change_flag = 0;
            char str[30];
            sprintf(str, "\t20%02d/%02d/%02d(%s)%02d:%02d-%02d\n",
                    now.YY,
                    now.MM,
                    now.DD,
                    weekday_3char[now.EE],
                    now.hh,
                    now.mm,
                    now.ss);
            for (uint8_t i = 0; str[i]; i++) {
                while (!PIR1bits.TXIF); //送信完了まで待つ
                TXREG1 = str[i];
            }
        }
    }

    return 0;
}



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-10-pic-usb/">
		<img src="/posts/2016-01-10-pic-usb/icon.jpg" title="PICでUSB通信" alt="PICでUSB通信">
		<div class="post-list-char">
			<span class="post-meta">2016年01月10日 Category: explanations</span>
			<h2>
				PICでUSB通信
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBの使い方について書きたいと思います。

今回紹介する方法では、USBをUARTの代わりに使えるようにするものです。PICをPCにつなぐとCOMポートが現れます。

これならUSBシリアル変換モジュールを使う必要はなくります。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-08-pic18f27j53/">
		<img src="/posts/2016-01-08-pic18f27j53/icon.jpg" title="PIC18F27J53のすすめ" alt="PIC18F27J53のすすめ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月08日 Category: explanations</span>
			<h2>
				PIC18F27J53のすすめ
			</h2>
			<span class="post-meta" style="max-height:4em;">PIC18F27J53のいいところ

秋月で売っていること

電子工作をするうえでこれはとても大事なこと。「秋月で売っているなら使ってみるか」ってなりますよね。

もちろん、秋月なので値段が安い！！
1個270円です(2016年1月現在)。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-パワーLED">パワーLED (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-制御">制御 (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-シリアル">シリアル (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-20-raspi-serial/">
		<img src="/home/icon.png" title="ラズパイでシリアルモニタを使うには" alt="ラズパイでシリアルモニタを使うには">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: memos</span>
			<h2>
				ラズパイでシリアルモニタを使うには
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ラズパイのシリアルを使うときや、ラズパイにFT232などをつないだ時にターミナルをシリアルモニタにする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ターミナル">ターミナル (7) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-20-raspi-serial/">
		<img src="/home/icon.png" title="ラズパイでシリアルモニタを使うには" alt="ラズパイでシリアルモニタを使うには">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: memos</span>
			<h2>
				ラズパイでシリアルモニタを使うには
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ラズパイのシリアルを使うときや、ラズパイにFT232などをつないだ時にターミナルをシリアルモニタにする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-04-cygwin/">
		<img src="/posts/2015-12-04-cygwin/icon.png" title="Cygwinの使い方" alt="Cygwinの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年12月04日 Category: explanations</span>
			<h2>
				Cygwinの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Cygwinとは仮想UNIX環境をつくるソフトである。WindowsはUNIXベースの環境ではないので、コマンドライン操作がとてもやりづらい。Cygwinを使えば、C言語をはじめとしてrubyやpythonなど様々な開発をWindows上でできる。しかも、GUIでなくCUIなのでとても軽い。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-17-firewall/">
		<img src="/home/icon.png" title="ファイアウォールの設定" alt="ファイアウォールの設定">
		<div class="post-list-char">
			<span class="post-meta">2015年11月17日 Category: memos</span>
			<h2>
				ファイアウォールの設定
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ufw

iptablesという有名なファイアウォールソフトウェアがあるが初心者には使いにくいので，今回は初心者でも使いやすいufwというソフトを使う．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-28-link/">
		<img src="/home/icon.png" title="linkを作る「ln」コマンド" alt="linkを作る「ln」コマンド">
		<div class="post-list-char">
			<span class="post-meta">2015年10月28日 Category: memos</span>
			<h2>
				linkを作る「ln」コマンド
			</h2>
			<span class="post-meta" style="max-height:4em;">ハードリンクとシンボリックリンク

ハードリンクは、別名の同じファイルといえる。ターゲットとリンクの区別がなく、すべてのファイルに実体があり（ディスク容量を消費）、削除するにはすべてのファイルを削除する必要がある。
シンボリックリンクは、いわゆるショートカットと同じで、パス情報のみを保持している。したがって、実体を削除するとシンボリックリンはエラーになる。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-21-git/">
		<img src="/home/icon.png" title="Gitの使い方" alt="Gitの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年10月21日 Category: memos</span>
			<h2>
				Gitの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">ここではGithubを使ったGitの使い方を説明する。

主なコマンド

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-07-vim/">
		<img src="/home/icon.png" title="vimの設定" alt="vimの設定">
		<div class="post-list-char">
			<span class="post-meta">2015年10月07日 Category: memos</span>
			<h2>
				vimの設定
			</h2>
			<span class="post-meta" style="max-height:4em;">vim の設定

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-06-04-killifish-light/">
		<img src="/posts/2015-06-04-killifish-light/icon.jpg" title="メダカの照明の自作" alt="メダカの照明の自作">
		<div class="post-list-char">
			<span class="post-meta">2015年06月04日 Category: works</span>
			<h2>
				メダカの照明の自作
			</h2>
			<span class="post-meta" style="max-height:4em;">こんにちは。
けり(@Ryokeri14)です。
みなさん、進捗いかがですか？
僕は、ぼちぼちです。

今回紹介するのは、
メダカの水槽の照明です。

高校時代の親友の刺激を受け、
5月ごろからメダカを飼い始めました。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ロボコン">ロボコン (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-08-12-idc-robocon/">
		<img src="/posts/2015-08-12-idc-robocon/icon.jpg" title="シンガポールでロボコンしてきました" alt="シンガポールでロボコンしてきました">
		<div class="post-list-char">
			<span class="post-meta">2015年08月12日 Category: blogs</span>
			<h2>
				シンガポールでロボコンしてきました
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさんこんにちは！
椋けり(@Ryokeri14)です。
夏休みになりました。ロ技研のみなさんは進捗めまぐるしいことでしょう。

今回の話題は僕が参加してきたIDCロボコンについてです。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-シンガポール">シンガポール (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-08-12-idc-robocon/">
		<img src="/posts/2015-08-12-idc-robocon/icon.jpg" title="シンガポールでロボコンしてきました" alt="シンガポールでロボコンしてきました">
		<div class="post-list-char">
			<span class="post-meta">2015年08月12日 Category: blogs</span>
			<h2>
				シンガポールでロボコンしてきました
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさんこんにちは！
椋けり(@Ryokeri14)です。
夏休みになりました。ロ技研のみなさんは進捗めまぐるしいことでしょう。

今回の話題は僕が参加してきたIDCロボコンについてです。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-IDC">IDC (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-08-12-idc-robocon/">
		<img src="/posts/2015-08-12-idc-robocon/icon.jpg" title="シンガポールでロボコンしてきました" alt="シンガポールでロボコンしてきました">
		<div class="post-list-char">
			<span class="post-meta">2015年08月12日 Category: blogs</span>
			<h2>
				シンガポールでロボコンしてきました
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさんこんにちは！
椋けり(@Ryokeri14)です。
夏休みになりました。ロ技研のみなさんは進捗めまぐるしいことでしょう。

今回の話題は僕が参加してきたIDCロボコンについてです。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-創造設計第一">創造設計第一 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-08-12-idc-robocon/">
		<img src="/posts/2015-08-12-idc-robocon/icon.jpg" title="シンガポールでロボコンしてきました" alt="シンガポールでロボコンしてきました">
		<div class="post-list-char">
			<span class="post-meta">2015年08月12日 Category: blogs</span>
			<h2>
				シンガポールでロボコンしてきました
			</h2>
			<span class="post-meta" style="max-height:4em;">みなさんこんにちは！
椋けり(@Ryokeri14)です。
夏休みになりました。ロ技研のみなさんは進捗めまぐるしいことでしょう。

今回の話題は僕が参加してきたIDCロボコンについてです。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Raspberry Pi">Raspberry Pi (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-28-raspi-setup/">
		<img src="/posts/2016-08-28-raspi-setup/icon.png" title="ラズパイセットアップのコマンド群" alt="ラズパイセットアップのコマンド群">
		<div class="post-list-char">
			<span class="post-meta">2016年08月28日 Category: memos</span>
			<h2>
				ラズパイセットアップのコマンド群
			</h2>
			<span class="post-meta" style="max-height:4em;">はじめに

これらの作業はすべてSSHで行う．fingなどを使ってIPアドレスを調べる．

$ ssh pi@192.168.11.13



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-raspi-serial/">
		<img src="/home/icon.png" title="ラズパイでシリアルモニタを使うには" alt="ラズパイでシリアルモニタを使うには">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: memos</span>
			<h2>
				ラズパイでシリアルモニタを使うには
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ラズパイのシリアルを使うときや、ラズパイにFT232などをつないだ時にターミナルをシリアルモニタにする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-05-raspi-server/">
		<img src="/posts/2015-10-05-raspi-server/icon.jpg" title="Raspberry Pi 2 Type Bでサーバー作り" alt="Raspberry Pi 2 Type Bでサーバー作り">
		<div class="post-list-char">
			<span class="post-meta">2015年10月05日 Category: explanations</span>
			<h2>
				Raspberry Pi 2 Type Bでサーバー作り
			</h2>
			<span class="post-meta" style="max-height:4em;">ラズパイの用意


  ラズパイ用のOS「NOOBS」をraspberrypi.orgからDLして解凍する。
  microSDカードをFAT32でフォーマットする。
  解凍したファイルをSDカードにコピーする。
  ラズパイにSDカード、キーボード、LANケーブル（またはWiFiドングル）をつないで電源を入れる。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-サーバー">サーバー (7) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-20-ssh-port-forwarding/">
		<img src="/home/icon.png" title="SSHのPort Forwarding" alt="SSHのPort Forwarding">
		<div class="post-list-char">
			<span class="post-meta">2016年07月20日 Category: memos</span>
			<h2>
				SSHのPort Forwarding
			</h2>
			<span class="post-meta" style="max-height:4em;">Port Forwardingとは

SSHは通常ターミナル上で使うが，接続をlocalhostの適当なポートに転送してくれるのがPort Forwardingらしい．これにより，ブラウザからLAN内にアクセスできる．

LANの外からLAN内のルータの設定やNASなどを使えるようになるのだ．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-23-samba/">
		<img src="/home/icon.png" title="Raspberry Pi で NAS 作り" alt="Raspberry Pi で NAS 作り">
		<div class="post-list-char">
			<span class="post-meta">2015年11月23日 Category: memos</span>
			<h2>
				Raspberry Pi で NAS 作り
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

NASがほしい！
じゃあ作ろう。

スペック
サーバ：Raspberrypi 2 Type B
HDD：Western Digital 2TB 3.5 inch
転送速度：10MB/s（ラズパイのイーサーネットが100Baseなので仕方ない…）

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-17-firewall/">
		<img src="/home/icon.png" title="ファイアウォールの設定" alt="ファイアウォールの設定">
		<div class="post-list-char">
			<span class="post-meta">2015年11月17日 Category: memos</span>
			<h2>
				ファイアウォールの設定
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ufw

iptablesという有名なファイアウォールソフトウェアがあるが初心者には使いにくいので，今回は初心者でも使いやすいufwというソフトを使う．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-31-ssh/">
		<img src="/home/icon.png" title="SSHの使い方" alt="SSHの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年10月31日 Category: memos</span>
			<h2>
				SSHの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">SSH

SSHとは

　Secure Shell。暗号や認証の技術を利用して、安全にリモートコンピュータと通信するためのプロトコル。 パスワードなどの認証部分を含むすべてのネットワーク上の通信が暗号化される。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-05-raspi-server/">
		<img src="/posts/2015-10-05-raspi-server/icon.jpg" title="Raspberry Pi 2 Type Bでサーバー作り" alt="Raspberry Pi 2 Type Bでサーバー作り">
		<div class="post-list-char">
			<span class="post-meta">2015年10月05日 Category: explanations</span>
			<h2>
				Raspberry Pi 2 Type Bでサーバー作り
			</h2>
			<span class="post-meta" style="max-height:4em;">ラズパイの用意


  ラズパイ用のOS「NOOBS」をraspberrypi.orgからDLして解凍する。
  microSDカードをFAT32でフォーマットする。
  解凍したファイルをSDカードにコピーする。
  ラズパイにSDカード、キーボード、LANケーブル（またはWiFiドングル）をつないで電源を入れる。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ラズパイ">ラズパイ (9) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-01-raspi-music-server/">
		<img src="/posts/2016-09-01-raspi-music-server/icon.jpg" title="ラズパイでミュージックサーバー" alt="ラズパイでミュージックサーバー">
		<div class="post-list-char">
			<span class="post-meta">2016年09月01日 Category: works</span>
			<h2>
				ラズパイでミュージックサーバー
			</h2>
			<span class="post-meta" style="max-height:4em;">作ったもの

ラズパイミュージックサーバー

スマートフォンでコントロールできるステレオコンポです．



構成

Raspberry Pi 3 Type B

http://akizukidenshi.com/catalog/g/gM-10414/



Micro SDXC 64GB
https://www.amazon.co.jp/dp/B010SERHJY



AKI.DAC-U2704 REV.C

http://akizukidenshi.com/catalog/g/gK-05369/



アキバのジャンク街で買ったウーハー付きアンプ

5年前くらいにアキバのジャンク街で新品2,000円程で買ったウーハー付きアンプ．音がいいんだな．



家にあったBOSEのスピーカー



2.5A出力ACアダプタ

http://akizukidenshi.com/catalog/g/gM-10507/



マイクロUSBケーブル

http://akizukidenshi.com/catalog/g/gC-09314/



短いミニUSBケーブル

家に転がっていました．



RCA-ステレオミニジャック変換ケーブル



ソフトウェア

Volumio

Volumioとはラズパイ用OSであるraspbeanをもとに作られたミュージックサーバーOSです．ダウンロードしたimgファイルをマイクロSDカードに焼くだけで即使うことができます．

Volumio.orgよりダウンロードできます．

作り方


  SDカードにVolumioのOSを焼いて，ラズパイにセットする．
  ラズパイにDACとスピーカーをつなぐ．
  ラズパイにLANケーブルをさして，電源を投入する．
  パソコンでネットワーク上のPCを検索し，Volumioを見つける．
  見つけたVolumioドライブに曲をコピーする．
  ブラウザでhttp://volumio.local/にアクセスする．
  あとは使えばわかる．


操作画面

ブラウザから操作

わかりやすいGUIで，直感的に操作できます．



MPDクライアントから操作

もちろん，MPDクライアントにも対応しています．



まとめ

スマホからコントロールできるミュージックサーバーがとても簡単にできちゃいました！Volumioはすごいです．

次はDACやアンプを作りたいです．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-31-volumio-playlist/">
		<img src="/posts/2016-08-31-volumio-playlist/icon.png" title="VolumioでiTunesのプレイリストを使う" alt="VolumioでiTunesのプレイリストを使う">
		<div class="post-list-char">
			<span class="post-meta">2016年08月31日 Category: memos</span>
			<h2>
				VolumioでiTunesのプレイリストを使う
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Volumio

Volumioというミュージックサーバーソフトウェアがある．

ラズベリーパイにVolumioのOSを書き込むだけで，ミュージックサーバーが出来上がるし，Air Playや，SMBにも対応していて，素晴らしいものだ．

プレイリスト問題

しかし，そのプレイリストは独自の形式で，iTunesなどのプレイリストを読み込むことができず，新たに作らなくてはならない．

めんどくさい！

ということで，今回は，iTunesのプレイリストをvolumioのプレイリストに変換するスクリプトを紹介する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-28-update-blog-script/">
		<img src="/posts/2016-08-28-update-blog-script/icon.png" title="ブログを更新するスクリプト" alt="ブログを更新するスクリプト">
		<div class="post-list-char">
			<span class="post-meta">2016年08月28日 Category: memos</span>
			<h2>
				ブログを更新するスクリプト
			</h2>
			<span class="post-meta" style="max-height:4em;">github上にあるブログを同期するシェルスクリプト

自分用のメモ

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-28-raspi-setup/">
		<img src="/posts/2016-08-28-raspi-setup/icon.png" title="ラズパイセットアップのコマンド群" alt="ラズパイセットアップのコマンド群">
		<div class="post-list-char">
			<span class="post-meta">2016年08月28日 Category: memos</span>
			<h2>
				ラズパイセットアップのコマンド群
			</h2>
			<span class="post-meta" style="max-height:4em;">はじめに

これらの作業はすべてSSHで行う．fingなどを使ってIPアドレスを調べる．

$ ssh pi@192.168.11.13



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-21-raspi3/">
		<img src="/posts/2016-08-21-raspi3/icon.jpg" title="ブログのサーバーが新しくなりました！" alt="ブログのサーバーが新しくなりました！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月21日 Category: blogs</span>
			<h2>
				ブログのサーバーが新しくなりました！
			</h2>
			<span class="post-meta" style="max-height:4em;">ラズパイ3を購入

ハイスペックなラズパイ3

64bitのARM-CPUが搭載されたラズパイ3が話題になったのは記憶に新しいですが，ラズパイ3は，秋月では6,200円ですし，公式でも5,000円ほどします．

税込4,000円かつカード払いOK！

そんなラズパイ3が，Maker Faire Tokyo 2016 で税込4,000円かつカード払いOKで販売しているではありませんか！！

これは安い！と思い，使う予定もないのに衝動買いしちゃいました…(汗

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-raspi-serial/">
		<img src="/home/icon.png" title="ラズパイでシリアルモニタを使うには" alt="ラズパイでシリアルモニタを使うには">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: memos</span>
			<h2>
				ラズパイでシリアルモニタを使うには
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ラズパイのシリアルを使うときや、ラズパイにFT232などをつないだ時にターミナルをシリアルモニタにする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-23-samba/">
		<img src="/home/icon.png" title="Raspberry Pi で NAS 作り" alt="Raspberry Pi で NAS 作り">
		<div class="post-list-char">
			<span class="post-meta">2015年11月23日 Category: memos</span>
			<h2>
				Raspberry Pi で NAS 作り
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

NASがほしい！
じゃあ作ろう。

スペック
サーバ：Raspberrypi 2 Type B
HDD：Western Digital 2TB 3.5 inch
転送速度：10MB/s（ラズパイのイーサーネットが100Baseなので仕方ない…）

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-17-firewall/">
		<img src="/home/icon.png" title="ファイアウォールの設定" alt="ファイアウォールの設定">
		<div class="post-list-char">
			<span class="post-meta">2015年11月17日 Category: memos</span>
			<h2>
				ファイアウォールの設定
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ufw

iptablesという有名なファイアウォールソフトウェアがあるが初心者には使いにくいので，今回は初心者でも使いやすいufwというソフトを使う．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-05-raspi-server/">
		<img src="/posts/2015-10-05-raspi-server/icon.jpg" title="Raspberry Pi 2 Type Bでサーバー作り" alt="Raspberry Pi 2 Type Bでサーバー作り">
		<div class="post-list-char">
			<span class="post-meta">2015年10月05日 Category: explanations</span>
			<h2>
				Raspberry Pi 2 Type Bでサーバー作り
			</h2>
			<span class="post-meta" style="max-height:4em;">ラズパイの用意


  ラズパイ用のOS「NOOBS」をraspberrypi.orgからDLして解凍する。
  microSDカードをFAT32でフォーマットする。
  解凍したファイルをSDカードにコピーする。
  ラズパイにSDカード、キーボード、LANケーブル（またはWiFiドングル）をつないで電源を入れる。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-vim">vim (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-10-07-vim/">
		<img src="/home/icon.png" title="vimの設定" alt="vimの設定">
		<div class="post-list-char">
			<span class="post-meta">2015年10月07日 Category: memos</span>
			<h2>
				vimの設定
			</h2>
			<span class="post-meta" style="max-height:4em;">vim の設定

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Git">Git (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-10-21-git/">
		<img src="/home/icon.png" title="Gitの使い方" alt="Gitの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年10月21日 Category: memos</span>
			<h2>
				Gitの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">ここではGithubを使ったGitの使い方を説明する。

主なコマンド

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-link">link (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-10-28-link/">
		<img src="/home/icon.png" title="linkを作る「ln」コマンド" alt="linkを作る「ln」コマンド">
		<div class="post-list-char">
			<span class="post-meta">2015年10月28日 Category: memos</span>
			<h2>
				linkを作る「ln」コマンド
			</h2>
			<span class="post-meta" style="max-height:4em;">ハードリンクとシンボリックリンク

ハードリンクは、別名の同じファイルといえる。ターゲットとリンクの区別がなく、すべてのファイルに実体があり（ディスク容量を消費）、削除するにはすべてのファイルを削除する必要がある。
シンボリックリンクは、いわゆるショートカットと同じで、パス情報のみを保持している。したがって、実体を削除するとシンボリックリンはエラーになる。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-SSH">SSH (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-20-ssh-port-forwarding/">
		<img src="/home/icon.png" title="SSHのPort Forwarding" alt="SSHのPort Forwarding">
		<div class="post-list-char">
			<span class="post-meta">2016年07月20日 Category: memos</span>
			<h2>
				SSHのPort Forwarding
			</h2>
			<span class="post-meta" style="max-height:4em;">Port Forwardingとは

SSHは通常ターミナル上で使うが，接続をlocalhostの適当なポートに転送してくれるのがPort Forwardingらしい．これにより，ブラウザからLAN内にアクセスできる．

LANの外からLAN内のルータの設定やNASなどを使えるようになるのだ．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-10-31-ssh/">
		<img src="/home/icon.png" title="SSHの使い方" alt="SSHの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年10月31日 Category: memos</span>
			<h2>
				SSHの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">SSH

SSHとは

　Secure Shell。暗号や認証の技術を利用して、安全にリモートコンピュータと通信するためのプロトコル。 パスワードなどの認証部分を含むすべてのネットワーク上の通信が暗号化される。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Surface">Surface (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-03-surface-ubuntu/">
		<img src="/posts/2015-11-03-surface-ubuntu/icon.jpg" title="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)" alt="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)">
		<div class="post-list-char">
			<span class="post-meta">2015年11月03日 Category: explanations</span>
			<h2>
				Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)
			</h2>
			<span class="post-meta" style="max-height:4em;">UEFIとは
　BIOSの代わりに最近のパソコンに導入されたインターフェース。BIOS特有の制約を解消したものと言える。UEFI環境でブートするには、ディスクの先頭にUEFIシステムパティションというものを置かなければならない。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Windows">Windows (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-14-pdf/">
		<img src="/posts/2016-06-14-pdf/icon.jpg" title="おすすめ PDF Viewer" alt="おすすめ PDF Viewer">
		<div class="post-list-char">
			<span class="post-meta">2016年06月14日 Category: explanations</span>
			<h2>
				おすすめ PDF Viewer
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


世の中にはたくさんのPDF Viewerがあり一長一短である．AdobeのPDF Readerが有名であるが，もっと使いやすいものを見つけたのでそれを紹介する．



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-07-yamy/">
		<img src="/home/icon.png" title="yamyでキーボードをカスタマイズ" alt="yamyでキーボードをカスタマイズ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月07日 Category: explanations</span>
			<h2>
				yamyでキーボードをカスタマイズ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Windowsのキーボードをカスタマイズして使いやすくする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-03-surface-ubuntu/">
		<img src="/posts/2015-11-03-surface-ubuntu/icon.jpg" title="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)" alt="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)">
		<div class="post-list-char">
			<span class="post-meta">2015年11月03日 Category: explanations</span>
			<h2>
				Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)
			</h2>
			<span class="post-meta" style="max-height:4em;">UEFIとは
　BIOSの代わりに最近のパソコンに導入されたインターフェース。BIOS特有の制約を解消したものと言える。UEFI環境でブートするには、ディスクの先頭にUEFIシステムパティションというものを置かなければならない。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Ubuntu">Ubuntu (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-03-surface-ubuntu/">
		<img src="/posts/2015-11-03-surface-ubuntu/icon.jpg" title="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)" alt="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)">
		<div class="post-list-char">
			<span class="post-meta">2015年11月03日 Category: explanations</span>
			<h2>
				Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)
			</h2>
			<span class="post-meta" style="max-height:4em;">UEFIとは
　BIOSの代わりに最近のパソコンに導入されたインターフェース。BIOS特有の制約を解消したものと言える。UEFI環境でブートするには、ディスクの先頭にUEFIシステムパティションというものを置かなければならない。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Linux">Linux (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-03-surface-ubuntu/">
		<img src="/posts/2015-11-03-surface-ubuntu/icon.jpg" title="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)" alt="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)">
		<div class="post-list-char">
			<span class="post-meta">2015年11月03日 Category: explanations</span>
			<h2>
				Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)
			</h2>
			<span class="post-meta" style="max-height:4em;">UEFIとは
　BIOSの代わりに最近のパソコンに導入されたインターフェース。BIOS特有の制約を解消したものと言える。UEFI環境でブートするには、ディスクの先頭にUEFIシステムパティションというものを置かなければならない。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-UEFI">UEFI (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-03-surface-ubuntu/">
		<img src="/posts/2015-11-03-surface-ubuntu/icon.jpg" title="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)" alt="Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)">
		<div class="post-list-char">
			<span class="post-meta">2015年11月03日 Category: explanations</span>
			<h2>
				Surface Pro 3 に Ubuntu15.10を入れる(UEFI環境のデュアルブート)
			</h2>
			<span class="post-meta" style="max-height:4em;">UEFIとは
　BIOSの代わりに最近のパソコンに導入されたインターフェース。BIOS特有の制約を解消したものと言える。UEFI環境でブートするには、ディスクの先頭にUEFIシステムパティションというものを置かなければならない。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-CPU">CPU (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-04-create-cpu/">
		<img src="/posts/2015-11-04-create-cpu/icon.jpg" title="CPUの創り方" alt="CPUの創り方">
		<div class="post-list-char">
			<span class="post-meta">2015年11月04日 Category: works</span>
			<h2>
				CPUの創り方
			</h2>
			<span class="post-meta" style="max-height:4em;">書籍「CPUの創り方」（2003年）渡波郁 著


　この本は電子工作の入門書です。しかし入門書と言っても内容は壮大で、CPUを設計して自作しようというものです。電子工作初心者だけでなく、ある程度電子工作をしてきた人にも読みごたえのある一冊になっています。

作ったもの : TD4


　この本の中で設計しているCPUを実際に作りました。TD4とはTada Dousa-suru-dakei-no 4-bit CPU という意味です。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-入門">入門 (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-11-04-create-cpu/">
		<img src="/posts/2015-11-04-create-cpu/icon.jpg" title="CPUの創り方" alt="CPUの創り方">
		<div class="post-list-char">
			<span class="post-meta">2015年11月04日 Category: works</span>
			<h2>
				CPUの創り方
			</h2>
			<span class="post-meta" style="max-height:4em;">書籍「CPUの創り方」（2003年）渡波郁 著


　この本は電子工作の入門書です。しかし入門書と言っても内容は壮大で、CPUを設計して自作しようというものです。電子工作初心者だけでなく、ある程度電子工作をしてきた人にも読みごたえのある一冊になっています。

作ったもの : TD4


　この本の中で設計しているCPUを実際に作りました。TD4とはTada Dousa-suru-dakei-no 4-bit CPU という意味です。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-論理回路">論理回路 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-04-create-cpu/">
		<img src="/posts/2015-11-04-create-cpu/icon.jpg" title="CPUの創り方" alt="CPUの創り方">
		<div class="post-list-char">
			<span class="post-meta">2015年11月04日 Category: works</span>
			<h2>
				CPUの創り方
			</h2>
			<span class="post-meta" style="max-height:4em;">書籍「CPUの創り方」（2003年）渡波郁 著


　この本は電子工作の入門書です。しかし入門書と言っても内容は壮大で、CPUを設計して自作しようというものです。電子工作初心者だけでなく、ある程度電子工作をしてきた人にも読みごたえのある一冊になっています。

作ったもの : TD4


　この本の中で設計しているCPUを実際に作りました。TD4とはTada Dousa-suru-dakei-no 4-bit CPU という意味です。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-書籍">書籍 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-04-create-cpu/">
		<img src="/posts/2015-11-04-create-cpu/icon.jpg" title="CPUの創り方" alt="CPUの創り方">
		<div class="post-list-char">
			<span class="post-meta">2015年11月04日 Category: works</span>
			<h2>
				CPUの創り方
			</h2>
			<span class="post-meta" style="max-height:4em;">書籍「CPUの創り方」（2003年）渡波郁 著


　この本は電子工作の入門書です。しかし入門書と言っても内容は壮大で、CPUを設計して自作しようというものです。電子工作初心者だけでなく、ある程度電子工作をしてきた人にも読みごたえのある一冊になっています。

作ったもの : TD4


　この本の中で設計しているCPUを実際に作りました。TD4とはTada Dousa-suru-dakei-no 4-bit CPU という意味です。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-はんだ付け">はんだ付け (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-04-create-cpu/">
		<img src="/posts/2015-11-04-create-cpu/icon.jpg" title="CPUの創り方" alt="CPUの創り方">
		<div class="post-list-char">
			<span class="post-meta">2015年11月04日 Category: works</span>
			<h2>
				CPUの創り方
			</h2>
			<span class="post-meta" style="max-height:4em;">書籍「CPUの創り方」（2003年）渡波郁 著


　この本は電子工作の入門書です。しかし入門書と言っても内容は壮大で、CPUを設計して自作しようというものです。電子工作初心者だけでなく、ある程度電子工作をしてきた人にも読みごたえのある一冊になっています。

作ったもの : TD4


　この本の中で設計しているCPUを実際に作りました。TD4とはTada Dousa-suru-dakei-no 4-bit CPU という意味です。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ファイアウォール">ファイアウォール (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-17-firewall/">
		<img src="/home/icon.png" title="ファイアウォールの設定" alt="ファイアウォールの設定">
		<div class="post-list-char">
			<span class="post-meta">2015年11月17日 Category: memos</span>
			<h2>
				ファイアウォールの設定
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ufw

iptablesという有名なファイアウォールソフトウェアがあるが初心者には使いにくいので，今回は初心者でも使いやすいufwというソフトを使う．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-NAS">NAS (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-23-samba/">
		<img src="/home/icon.png" title="Raspberry Pi で NAS 作り" alt="Raspberry Pi で NAS 作り">
		<div class="post-list-char">
			<span class="post-meta">2015年11月23日 Category: memos</span>
			<h2>
				Raspberry Pi で NAS 作り
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

NASがほしい！
じゃあ作ろう。

スペック
サーバ：Raspberrypi 2 Type B
HDD：Western Digital 2TB 3.5 inch
転送速度：10MB/s（ラズパイのイーサーネットが100Baseなので仕方ない…）

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Samba">Samba (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-11-23-samba/">
		<img src="/home/icon.png" title="Raspberry Pi で NAS 作り" alt="Raspberry Pi で NAS 作り">
		<div class="post-list-char">
			<span class="post-meta">2015年11月23日 Category: memos</span>
			<h2>
				Raspberry Pi で NAS 作り
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

NASがほしい！
じゃあ作ろう。

スペック
サーバ：Raspberrypi 2 Type B
HDD：Western Digital 2TB 3.5 inch
転送速度：10MB/s（ラズパイのイーサーネットが100Baseなので仕方ない…）

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Cygwin">Cygwin (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-12-04-cygwin/">
		<img src="/posts/2015-12-04-cygwin/icon.png" title="Cygwinの使い方" alt="Cygwinの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年12月04日 Category: explanations</span>
			<h2>
				Cygwinの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Cygwinとは仮想UNIX環境をつくるソフトである。WindowsはUNIXベースの環境ではないので、コマンドライン操作がとてもやりづらい。Cygwinを使えば、C言語をはじめとしてrubyやpythonなど様々な開発をWindows上でできる。しかも、GUIでなくCUIなのでとても軽い。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-インストール">インストール (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2015-12-04-cygwin/">
		<img src="/posts/2015-12-04-cygwin/icon.png" title="Cygwinの使い方" alt="Cygwinの使い方">
		<div class="post-list-char">
			<span class="post-meta">2015年12月04日 Category: explanations</span>
			<h2>
				Cygwinの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Cygwinとは仮想UNIX環境をつくるソフトである。WindowsはUNIXベースの環境ではないので、コマンドライン操作がとてもやりづらい。Cygwinを使えば、C言語をはじめとしてrubyやpythonなど様々な開発をWindows上でできる。しかも、GUIでなくCUIなのでとても軽い。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-IR-Station">IR-Station (7) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-05-maker-faire-tokyo-2016/">
		<img src="/posts/2016-08-05-maker-faire-tokyo-2016/logo.jpg" title="Maker Faire Tokyo 2016 に出展します！" alt="Maker Faire Tokyo 2016 に出展します！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月05日 Category: blogs</span>
			<h2>
				Maker Faire Tokyo 2016 に出展します！
			</h2>
			<span class="post-meta" style="max-height:4em;">Maker Faire Tokyo 2016

こんにちは．けりです．
8月6日(土)，8月7日(日)にお台場の国際展示場で開催される，ものつくりの展示イベントのMaker Faire Tokyo 2016に出展することになりました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-25-how-to-use-ir-station/">
		<img src="/posts/2016-07-25-how-to-use-ir-station/icon.png" title="IR-Stationの使い方" alt="IR-Stationの使い方">
		<div class="post-list-char">
			<span class="post-meta">2016年07月25日 Category: works</span>
			<h2>
				IR-Stationの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-30-ir-station/">
		<img src="/posts/2015-12-30-ir-station/icon.jpg" title="ESP8266で赤外線学習リモコン" alt="ESP8266で赤外線学習リモコン">
		<div class="post-list-char">
			<span class="post-meta">2015年12月30日 Category: works</span>
			<h2>
				ESP8266で赤外線学習リモコン
			</h2>
			<span class="post-meta" style="max-height:4em;">ESP8266とは

日本の技適を取得済みWiFiモジュール！！

ESP8266とはWiFi制御用マイコンです。もともと中国で流行っていました。そのマイコンを内蔵したESP-WROOM-02というWiFiモジュールが日本の技適を取得したので、日本でも人気になりました。

とにかく安い！

その価格はなんと、たったの550円です！！
ESP-WROOM-02←秋月電子などで売っています。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ESP8266">ESP8266 (10) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-25-how-to-use-ir-station/">
		<img src="/posts/2016-07-25-how-to-use-ir-station/icon.png" title="IR-Stationの使い方" alt="IR-Stationの使い方">
		<div class="post-list-char">
			<span class="post-meta">2016年07月25日 Category: works</span>
			<h2>
				IR-Stationの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-30-ir-station/">
		<img src="/posts/2015-12-30-ir-station/icon.jpg" title="ESP8266で赤外線学習リモコン" alt="ESP8266で赤外線学習リモコン">
		<div class="post-list-char">
			<span class="post-meta">2015年12月30日 Category: works</span>
			<h2>
				ESP8266で赤外線学習リモコン
			</h2>
			<span class="post-meta" style="max-height:4em;">ESP8266とは

日本の技適を取得済みWiFiモジュール！！

ESP8266とはWiFi制御用マイコンです。もともと中国で流行っていました。そのマイコンを内蔵したESP-WROOM-02というWiFiモジュールが日本の技適を取得したので、日本でも人気になりました。

とにかく安い！

その価格はなんと、たったの550円です！！
ESP-WROOM-02←秋月電子などで売っています。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ESP-WROOM-02">ESP-WROOM-02 (10) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-25-how-to-use-ir-station/">
		<img src="/posts/2016-07-25-how-to-use-ir-station/icon.png" title="IR-Stationの使い方" alt="IR-Stationの使い方">
		<div class="post-list-char">
			<span class="post-meta">2016年07月25日 Category: works</span>
			<h2>
				IR-Stationの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-30-ir-station/">
		<img src="/posts/2015-12-30-ir-station/icon.jpg" title="ESP8266で赤外線学習リモコン" alt="ESP8266で赤外線学習リモコン">
		<div class="post-list-char">
			<span class="post-meta">2015年12月30日 Category: works</span>
			<h2>
				ESP8266で赤外線学習リモコン
			</h2>
			<span class="post-meta" style="max-height:4em;">ESP8266とは

日本の技適を取得済みWiFiモジュール！！

ESP8266とはWiFi制御用マイコンです。もともと中国で流行っていました。そのマイコンを内蔵したESP-WROOM-02というWiFiモジュールが日本の技適を取得したので、日本でも人気になりました。

とにかく安い！

その価格はなんと、たったの550円です！！
ESP-WROOM-02←秋月電子などで売っています。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Arduino">Arduino (9) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-raspi-serial/">
		<img src="/home/icon.png" title="ラズパイでシリアルモニタを使うには" alt="ラズパイでシリアルモニタを使うには">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: memos</span>
			<h2>
				ラズパイでシリアルモニタを使うには
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

ラズパイのシリアルを使うときや、ラズパイにFT232などをつないだ時にターミナルをシリアルモニタにする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-30-ir-station/">
		<img src="/posts/2015-12-30-ir-station/icon.jpg" title="ESP8266で赤外線学習リモコン" alt="ESP8266で赤外線学習リモコン">
		<div class="post-list-char">
			<span class="post-meta">2015年12月30日 Category: works</span>
			<h2>
				ESP8266で赤外線学習リモコン
			</h2>
			<span class="post-meta" style="max-height:4em;">ESP8266とは

日本の技適を取得済みWiFiモジュール！！

ESP8266とはWiFi制御用マイコンです。もともと中国で流行っていました。そのマイコンを内蔵したESP-WROOM-02というWiFiモジュールが日本の技適を取得したので、日本でも人気になりました。

とにかく安い！

その価格はなんと、たったの550円です！！
ESP-WROOM-02←秋月電子などで売っています。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-WiFi">WiFi (5) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2015-12-30-ir-station/">
		<img src="/posts/2015-12-30-ir-station/icon.jpg" title="ESP8266で赤外線学習リモコン" alt="ESP8266で赤外線学習リモコン">
		<div class="post-list-char">
			<span class="post-meta">2015年12月30日 Category: works</span>
			<h2>
				ESP8266で赤外線学習リモコン
			</h2>
			<span class="post-meta" style="max-height:4em;">ESP8266とは

日本の技適を取得済みWiFiモジュール！！

ESP8266とはWiFi制御用マイコンです。もともと中国で流行っていました。そのマイコンを内蔵したESP-WROOM-02というWiFiモジュールが日本の技適を取得したので、日本でも人気になりました。

とにかく安い！

その価格はなんと、たったの550円です！！
ESP-WROOM-02←秋月電子などで売っています。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-キーボード">キーボード (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-07-yamy/">
		<img src="/home/icon.png" title="yamyでキーボードをカスタマイズ" alt="yamyでキーボードをカスタマイズ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月07日 Category: explanations</span>
			<h2>
				yamyでキーボードをカスタマイズ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Windowsのキーボードをカスタマイズして使いやすくする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-yamy">yamy (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-07-yamy/">
		<img src="/home/icon.png" title="yamyでキーボードをカスタマイズ" alt="yamyでキーボードをカスタマイズ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月07日 Category: explanations</span>
			<h2>
				yamyでキーボードをカスタマイズ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Windowsのキーボードをカスタマイズして使いやすくする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Ctrl">Ctrl (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-07-yamy/">
		<img src="/home/icon.png" title="yamyでキーボードをカスタマイズ" alt="yamyでキーボードをカスタマイズ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月07日 Category: explanations</span>
			<h2>
				yamyでキーボードをカスタマイズ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Windowsのキーボードをカスタマイズして使いやすくする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-カスタマイズ">カスタマイズ (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-07-yamy/">
		<img src="/home/icon.png" title="yamyでキーボードをカスタマイズ" alt="yamyでキーボードをカスタマイズ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月07日 Category: explanations</span>
			<h2>
				yamyでキーボードをカスタマイズ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Windowsのキーボードをカスタマイズして使いやすくする。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-USB">USB (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-10-pic-usb/">
		<img src="/posts/2016-01-10-pic-usb/icon.jpg" title="PICでUSB通信" alt="PICでUSB通信">
		<div class="post-list-char">
			<span class="post-meta">2016年01月10日 Category: explanations</span>
			<h2>
				PICでUSB通信
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBの使い方について書きたいと思います。

今回紹介する方法では、USBをUARTの代わりに使えるようにするものです。PICをPCにつなぐとCOMポートが現れます。

これならUSBシリアル変換モジュールを使う必要はなくります。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-08-pic18f27j53/">
		<img src="/posts/2016-01-08-pic18f27j53/icon.jpg" title="PIC18F27J53のすすめ" alt="PIC18F27J53のすすめ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月08日 Category: explanations</span>
			<h2>
				PIC18F27J53のすすめ
			</h2>
			<span class="post-meta" style="max-height:4em;">PIC18F27J53のいいところ

秋月で売っていること

電子工作をするうえでこれはとても大事なこと。「秋月で売っているなら使ってみるか」ってなりますよね。

もちろん、秋月なので値段が安い！！
1個270円です(2016年1月現在)。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-FT232">FT232 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-10-pic-usb/">
		<img src="/posts/2016-01-10-pic-usb/icon.jpg" title="PICでUSB通信" alt="PICでUSB通信">
		<div class="post-list-char">
			<span class="post-meta">2016年01月10日 Category: explanations</span>
			<h2>
				PICでUSB通信
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBの使い方について書きたいと思います。

今回紹介する方法では、USBをUARTの代わりに使えるようにするものです。PICをPCにつなぐとCOMポートが現れます。

これならUSBシリアル変換モジュールを使う必要はなくります。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ブートローダ">ブートローダ (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-C言語">C言語 (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-02-pic-rtcc/">
		<img src="/home/icon.png" title="PICでリアルタイムクロック" alt="PICでリアルタイムクロック">
		<div class="post-list-char">
			<span class="post-meta">2016年09月02日 Category: memos</span>
			<h2>
				PICでリアルタイムクロック
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53は，リアルタイムクロック&amp;カレンダー(RTCC)モジュールをハードウェアで持っています．今回はそれを使用するためのライブラリを作ったので紹介します．

自作のRTCCライブラリ

必要なソースファイル


  My_RTCC.h
  My_RTCC.c
  My_button.h
  My_button.c
  main.c


概要

変数

このプログラムでは、時刻情報を持つ変数が３つある。


  PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
  time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
  time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。


以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
#### 使い方


  TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
  CONFIGを設定する。RTCOSC = T1OSCREF
  その次に、RTCC_init();を書く。（初期設定関数）
  mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
  任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
  時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
  adjust_time_inc()とadjust_time_dec()で調整するとよい。
  時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。


RTCCライブラリ

My_RTCC.h

/* 
 * File:   My_RTCC.h
 * Author: Ryotaro Onuki
 *
 * Created on 2015/03/19, 0:02
 * 
 * PIC18F28J53用リアルタイムクロックプログラム
 * ○概要
 * このプログラムでは、時刻情報を持つ変数が３つある。
 * 1.PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
 * 2.time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
 * 3.time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。
 * 以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
 * ○使い方
 * 1.TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
 * 2.CONFIGを設定する。RTCOSC = T1OSCREF
 * 3.その次に、RTCC_init();を書く。（初期設定関数）
 * 4.mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
 * 5.任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
 * 6.時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
 * 7.adjust_time_inc()とadjust_time_dec()で調整するとよい。
 * 8.時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。
 */

#ifndef MY_RTCC_H
#define	MY_RTCC_H

/** INCLUDES *******************************************************/
#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include "My_button.h"

/** VALUES *********************************************************/
#define MINUTE ((epoch_t)60)
#define HOUR ((epoch_t)60*60)
#define DAY ((epoch_t)60*60*24)

/** STRUCTURE ******************************************************/
// epoch型を定義。2000年1月1日0時00分からの総秒数。

typedef uint32_t epoch_t;

// 時刻合わせ用のフラグの構造体を定義。

typedef struct {

    union {
        uint8_t flags;

        struct {
            uint8_t ss : 1;
            uint8_t mm : 1;
            uint8_t hh : 1;
            uint8_t DD : 1;
            uint8_t MM : 1;
            uint8_t YY : 1;
        } flag;
    };
} edit_t;

// RTCC関連すべてを詰めた構造体。実際に使用する。

typedef struct {
    epoch_t epoch;
    uint8_t ss;
    uint8_t mm;
    uint8_t hh;
    uint8_t EE;
    uint8_t DD;
    uint8_t MM;
    uint8_t YY;
    uint8_t colon;
    uint8_t halfsec;
    edit_t edit;
} time_t;

/** VARIABLES ******************************************************/
// 表示用の曜日charをconstで定義。
extern const char weekday_3char[7][4];
// 現在時刻
extern time_t now;
// 時間が変わった時だけフラグが経つ。表示器の時刻の更新はこのフラグの監視をして行えばよい。
extern uint8_t time_change_flag;
// main_init()に書くこと。
void RTCC_init(void);
// Call this in the main loop
void RTCC_task(void);

/** USER FUNCTIONS *************************************************/
/** Transform time User Functions **/
// 時刻をRTCC基準でそろえる
void RTCC_from_RTCC(time_t *tm);
// 時刻をカレンダータイム基準でそろえる
void RTCC_from_caltime(time_t *tm);
// 時刻をエポック基準でそろえる
void RTCC_from_epoch(time_t *tm);
// return month length
uint8_t month_length(uint8_t year, uint8_t month);

/** LCD display **/
// 各項目表示用関数。ユーザーは使わない。
static void display_dec(char *str, uint8_t dec, uint8_t edit);
// 0802サイズ液晶用、文字列作成関数
void display_time_0802(time_t *tm, char *line0, char *line1);
// 1608サイズ液晶用、文字列作成関数
void display_time_1602(time_t *tm, char *line0, char *line1);

/** adjust the time **/
// 時刻編集モードを切り替える
void RTCC_adjust_time_toggle(time_t *tm);
// 編集中の時刻針を切り替える
void RTCC_adjust_time_cursor(time_t *tm);
// 編集中の時刻針を１つ増やす
void RTCC_adjust_time_inc(time_t *tm);
// 編集中の時刻針を１つ減らす
void RTCC_adjust_time_dec(time_t *tm);
// 3つのボタンで時刻合わせ
void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec);

/** FUNCTIONS ******************************************************/
/** en/decode number **/
// from decimal to hex
static uint8_t d_to_x(uint8_t dec);
// from hex to decimal
static uint8_t x_to_d(uint8_t hex);
// quotをdivで割って、余りを返す。よく使うので関数化した。
static epoch_t get_quot_rem(epoch_t *quot, uint8_t div);

/** Transform time **/
// RTCCをカレンダタイムに変換、上書き。
static void RTCC_to_caltime(time_t *tm);
// カレンダタイムをRTCCに変換、上書き。
static void caltime_to_RTCC(time_t *tm);
// Epochをカレンダタイムに変換、上書き。
static void epoch_to_caltime(time_t *tm);
// get epoch from caltime
static void caltime_to_epoch(time_t *tm);

#endif	/* MY_RTCC_H */



My_RTCC.c

#include "My_RTCC.h"

/** INCLUDES *******************************************************/
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/** VALUES *********************************************************/


/** VARIABLES ******************************************************/
const char weekday_3char[7][4] = {"SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"};
time_t now;
uint8_t time_change_flag;

/** USER FUNCTIONS *************************************************/

void RTCC_init(void) {
    RTCCFGbits.RTCWREN = 1;
    if (RTCCFGbits.RTCWREN != 1) {
        EECON2 = 0x55;
        EECON2 = 0xAA;
        RTCCFGbits.RTCWREN = 1;
    }
    RTCCFGbits.RTCEN = 1;
    RTCCFGbits.RTCOE = 0;
    PADCFG1bits.RTSECSEL0 = 1;
    PADCFG1bits.RTSECSEL1 = 1;
    RTCCAL = 0x00;
    T1CONbits.T1OSCEN = 1;

    RTCC_from_RTCC(&amp;now);
    if (now.DD == 0) {
        now.epoch = 0;
        RTCC_from_epoch(&amp;now);
    }
}

void RTCC_task(void) {
    static uint8_t prev_halfsec;
    if (RTCCFGbits.RTCSYNC)return;
    now.halfsec = RTCCFGbits.HALFSEC;
    if (prev_halfsec != now.halfsec) {
        prev_halfsec = now.halfsec;
        now.colon = now.halfsec;
        time_change_flag = 1;
        RTCC_from_RTCC(&amp;now);
    }
}

/** Transform time User Functions **/

void RTCC_from_RTCC(time_t *tm) {
    RTCC_to_caltime(tm);
    caltime_to_epoch(tm);
}

void RTCC_from_caltime(time_t *tm) {
    caltime_to_epoch(tm);
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

void RTCC_from_epoch(time_t *tm) {
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

uint8_t month_length(uint8_t year, uint8_t month) {
    if (month == 2) return 28 + !(year &amp; 3)-!(year % 100)+!(year % 400);
    else return 31 - (((-(month &amp; 1)^month)&amp;13) == 4);

    //    switch (month) {
    //        case 1:
    //        case 3:
    //        case 5:
    //        case 7:
    //        case 8:
    //        case 10:
    //        case 12:
    //            return 31;
    //        case 4:
    //        case 6:
    //        case 9:
    //        case 11:
    //            return 30;
    //        case 2:
    //            if (year % 400 == 0)return 29;
    //            else if (year % 100 == 0)return 28;
    //            else if (year % 4 == 0) return 29;
    //            else return 28;
}

/** LCD display **/

static void display_dec(char *str, uint8_t dec, uint8_t edit) {
    char s[4];
    sprintf(s, "%02d", dec);
    if (edit &amp;&amp; now.halfsec)strcat(str, "  ");
    else strcat(str, s);
}

void display_time_0802(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);

    strcpy(line1, "");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (now.colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

void display_time_1602(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, 20, tm-&gt;edit.flag.YY);
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);
    strcat(line0, "(");
    strcat(line0, weekday_3char[tm-&gt;EE]);
    strcat(line0, ")");

    strcpy(line1, "        ");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (tm-&gt;colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

/** adjust the time **/

void RTCC_adjust_time_toggle(time_t *tm) {
    if (tm-&gt;edit.flags) {
        tm-&gt;edit.flags = 0;
    } else {
        tm-&gt;edit.flag.ss = 1;
    }
}

void RTCC_adjust_time_cursor(time_t *tm) {
    if (tm-&gt;edit.flag.ss)tm-&gt;edit.flags = 0x02;
    else if (tm-&gt;edit.flag.mm)tm-&gt;edit.flags = 0x04;
    else if (tm-&gt;edit.flag.hh)tm-&gt;edit.flags = 0x08;
    else if (tm-&gt;edit.flag.DD)tm-&gt;edit.flags = 0x10;
    else if (tm-&gt;edit.flag.MM)tm-&gt;edit.flags = 0x20;
    else if (tm-&gt;edit.flag.YY)tm-&gt;edit.flags = 0x01;
    else tm-&gt;edit.flags = 0x00;
}

void RTCC_adjust_time_inc(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch += 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch += MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch += HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch += DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch += DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &lt;= 12; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 1; i &lt; tm-&gt;MM; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY + 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch -= 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_dec(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch -= 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch -= MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch -= HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch -= DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &gt;= 1; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 12; i &gt; tm-&gt;MM; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY - 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch += 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec) {
    if (mode-&gt;flag.long_holding_3) {
        mode-&gt;flag.long_holding_3 = 0;
        RTCC_adjust_time_toggle(tm);
        mode-&gt;flags = 0;
        cnt_inc-&gt;flags = 0;
        cnt_dec-&gt;flags = 0;
    }
    if (tm-&gt;edit.flags) {
        if (mode-&gt;flag.press) {
            mode-&gt;flag.press = 0;
            RTCC_adjust_time_cursor(tm);
        }
        if (cnt_inc-&gt;flag.press) {
            cnt_inc-&gt;flag.press = 0;
            RTCC_adjust_time_inc(tm);
        }
        if (cnt_dec-&gt;flag.press) {
            cnt_dec-&gt;flag.press = 0;
            RTCC_adjust_time_dec(tm);
        }
    }
}

/** FUNCTIONS ******************************************************/

/** en/decode number **/

static uint8_t d_to_x(uint8_t dec) {
    // uint8_t quot = dec / 10;
    // return quot * 16 + dec - quot * 10;
    return dec / 10 * 6 + dec;
}

static uint8_t x_to_d(uint8_t hex) {
    return 10 * (0x0F &amp; (hex &gt;&gt; 4)) + (0x0F &amp; hex);
}

static epoch_t get_quot_rem(epoch_t *quot, uint8_t div) {
    // num /= div;
    // return rem;
    epoch_t num = *quot;
    return num - (*quot = num / div) * div; // returns rem
}

/** Transform time **/

static void RTCC_to_caltime(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);

    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;

    tm-&gt;YY = x_to_d(RTCVALL); // YY
    uint8_t dumy = RTCVALH; // Reserved
    tm-&gt;DD = x_to_d(RTCVALL); // DD
    tm-&gt;MM = x_to_d(RTCVALH); // MM
    tm-&gt;hh = x_to_d(RTCVALL); // hh
    tm-&gt;EE = x_to_d(RTCVALH); // EE
    tm-&gt;ss = x_to_d(RTCVALL); // ss
    tm-&gt;mm = x_to_d(RTCVALH); // mm
}

static void caltime_to_RTCC(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;YY);
    RTCVALH = 0x00;
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;DD);
    RTCVALH = d_to_x(tm-&gt;MM);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;hh);
    RTCVALH = d_to_x(tm-&gt;EE);
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;ss);
    RTCVALH = d_to_x(tm-&gt;mm);
}

static void epoch_to_caltime(time_t *tm) {
    // to get epoch on terminal
    // echo $(( (`date -d '2015/03/01' '+%s'` - `date -d '2000/01/01' '+%s'`) / 86400 ))
    static uint16_t day_cache = 0; //2015.03.01
    static uint8_t month_cache = 1;
    static uint8_t year_cache = 0;
    uint16_t day_since_epoch;
    uint16_t day;
    uint8_t year = 0;
    uint8_t month = 1; // month is one-based.
    epoch_t num;

    num = tm-&gt;epoch;
    tm-&gt;ss = get_quot_rem(&amp;num, 60);
    tm-&gt;mm = get_quot_rem(&amp;num, 60);
    tm-&gt;hh = get_quot_rem(&amp;num, 24);
    day = num;
    day_since_epoch = day;

    num += 6; // 2000.1.1 is Saturday(6).
    tm-&gt;EE = get_quot_rem(&amp;num, 7);

    //    if (day == day_cache) {
    //        year = year_cache;
    //        month = month_cache;
    //        day -= day_cache;
    //    }

    // day is zero - based here.
    while (day &gt;= month_length(year, month)) {
        LATB2 = 1;
        day = day - month_length(year, month);
        if (month == 12) {
            month = 1; // month is one-based.
            year++;
            //3155760000 is 2000~2100?100?????
            if (year &gt;= 100) {
                tm-&gt;epoch -= 3155760000;
                year = 0;
            }
        } else {
            month++;
        }
        month_cache = month;
        year_cache = year;
    }
    day_cache = day_since_epoch - day;
    day++; // day is one-based, not zero-based.

    tm-&gt;YY = year;
    tm-&gt;MM = month;
    tm-&gt;DD = day;
}

static void caltime_to_epoch(time_t *tm) {
    epoch_t epoch = 0;
    for (uint8_t year = 0; year &lt; tm-&gt;YY; year++) {
        for (uint8_t month = 1; month &lt;= 12; month++) {
            epoch += DAY * month_length(year, month);
        }
    }
    for (uint8_t month = 1; month &lt; tm-&gt;MM; month++) {
        epoch += DAY * month_length(tm-&gt;YY, month);
    }
    epoch += DAY * (tm-&gt;DD - 1); //day is one-based.
    epoch += HOUR * tm-&gt;hh;
    epoch += MINUTE * tm-&gt;mm;
    epoch += tm-&gt;ss;

    tm-&gt;epoch = epoch;
}



ボタンライブラリ

My_button.h

/* 
 * File:   My_button.h
 * Author: kerikun11
 *
 * Created on 2015/02/26, 19:19
 */

#ifndef MY_BUTTON_H
#define	MY_BUTTON_H

#include &lt;stdint.h&gt;

//*************************** button ***************************//
//タイマー割り込み関数にbutton_timer_interrupt(&amp;button_t,!SW)を書いておくこと。
// 48MHz, 16bit, prescaler=1:4

#define PRESS_LEVEL 2
#define LONG_HOLD_LEVEL1  16
#define LONG_HOLD_LEVEL2  60
#define LONG_HOLD_LEVEL3  150
#define LONG_HOLD_LEVEL4  300
#define LONG_HOLD_LEVEL5  500
#define LONG_HOLD_LEVEL6  700
#define LONG_HOLD_LEVEL7  900

typedef struct button {
    uint16_t cnt_sw;

    union {
        uint16_t flags;

        struct {
            uint8_t press : 1;
            uint8_t long_hold_1 : 1;
            uint8_t long_hold_2 : 1;
            uint8_t long_hold_3 : 1;
            uint8_t long_hold_4 : 1;
            uint8_t long_hold_5 : 1;
            uint8_t long_hold_6 : 1;
            uint8_t long_hold_7 : 1;
            uint8_t pressing : 1;
            uint8_t long_holding_1 : 1;
            uint8_t long_holding_2 : 1;
            uint8_t long_holding_3 : 1;
            uint8_t long_holding_4 : 1;
            uint8_t long_holding_5 : 1;
            uint8_t long_holding_6 : 1;
            uint8_t long_holding_7 : 1;
        } flag;
    };
} button_t;

void button_timer_interrupt(button_t *bt, uint8_t sw_value);

#endif	/* MY_BUTTON_H */



My_button.h

#include "My_button.h"

void button_timer_interrupt(button_t *bt, uint8_t sw_value) {
    if (sw_value) {
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL7)bt-&gt;flag.long_holding_7 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL6)bt-&gt;flag.long_holding_6 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL5)bt-&gt;flag.long_holding_5 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL4)bt-&gt;flag.long_holding_4 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL3)bt-&gt;flag.long_holding_3 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL2)bt-&gt;flag.long_holding_2 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL1)bt-&gt;flag.long_holding_1 = 1;
        if (bt-&gt;cnt_sw == PRESS_LEVEL)bt-&gt;flag.pressing = 1;
        if (bt-&gt;cnt_sw &lt; LONG_HOLD_LEVEL7 + 1) bt-&gt;cnt_sw++;
    } else {
        if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL7)bt-&gt;flag.long_hold_7 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL6)bt-&gt;flag.long_hold_6 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL5)bt-&gt;flag.long_hold_5 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL4)bt-&gt;flag.long_hold_4 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL3)bt-&gt;flag.long_hold_3 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL2)bt-&gt;flag.long_hold_2 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL1)bt-&gt;flag.long_hold_1 = 1;
        else if (bt-&gt;cnt_sw &gt;= PRESS_LEVEL)bt-&gt;flag.press = 1;
        bt-&gt;cnt_sw = 0;
        bt-&gt;flags &amp;= 0x00FF;
    }
}



使用例

UARTで毎秒時刻を送信します．

main.c

/* 
 * Project: RTCC-Sample.X
 * File:    main.c
 * Author:  Ryotaro Onuki
 *
 * Created on 2015/10/06, 14:23
 */

#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
// CONFIG1L
#pragma config WDTEN = OFF, PLLDIV = 2, CFGPLLEN = ON, STVREN = OFF, XINST = OFF
// CONFIG1H
#pragma config CPUDIV = OSC1, CP0 = OFF
// CONFIG2L
#pragma config OSC = INTOSCPLL, SOSCSEL = HIGH, CLKOEC = OFF, FCMEN = OFF, IESO = OFF
// CONFIG2H
#pragma config WDTPS = 1024
// CONFIG3L
#pragma config DSWDTOSC = T1OSCREF, RTCOSC = T1OSCREF, DSBOREN = OFF, DSWDTEN = OFF, DSWDTPS = G2
// CONFIG3H
#pragma config IOL1WAY = OFF, ADCSEL = BIT12, MSSP7B_EN = MSK7
// CONFIG4L
#pragma config WPFP = PAGE_127, WPCFG = OFF
// CONFIG4H
#pragma config WPDIS = OFF, WPEND = PAGE_WPFP, LS48MHZ = SYS48X8

#define _XTAL_FREQ 48000000

#include "My_RTCC.h"
#include "My_button.h"

// I/O Mapping
#define MODE_BUTTON PORTBbits.RB0
#define INC_BUTTON PORTBbits.RB1
#define DEC_BUTTON PORTBbits.RB2

#define LED0 LATAbits.LATA0

button_t mode;
button_t inc;
button_t dec;

void interrupt ISR(void) {
    if (PIE1bits.TMR1IE &amp;&amp; PIR1bits.TMR1IF) {
        PIR1bits.TMR1IF = 0;
    }
    if (PIE2bits.TMR3IE &amp;&amp; PIR2bits.TMR3IF) {
        PIR2bits.TMR3IF = 0;
        LED0 = !LED0;
        button_timer_interrupt(&amp;mode, !MODE_BUTTON);
        button_timer_interrupt(&amp;inc, !INC_BUTTON);
        button_timer_interrupt(&amp;dec, !DEC_BUTTON);
    }
    if (PIR1bits.RCIF &amp;&amp; PIE1bits.RCIE) {
        while (!PIR1bits.TXIF); // 送信完了まで待つ。
        TXREG1 = RCREG1; // 受信データをそのまま送信
    }
}

void main_init(void) {
    OSCCONbits.IRCF = 7;
    OSCTUNEbits.PLLEN = 1;
    OSCCONbits.SCS = 0;
    TRISA = 0b00100000; // IO,IO,Vcap,IO,IO,IO,IO,IO
    TRISB = 0b00110111; // IO,IO,SDA,SCL,IO,IO,IO,IO
    TRISC = 0b10111010; // RX,TX,D+,D-,Vusb,IO,T1OSI,T1OSO
    ANCON0 = 0b11111111; // x,x,x,AN4,AN3,AN2,AN1,AN0
    ANCON1 = 0b11111111; // x,x,x,x,AN12,AN11,AN10,AN9,AN8
    INTCON2bits.RBPU = 0; // Port:B Pull-up enable
    // Timer 1 init
    T1CONbits.TMR1CS = 2; // Clock = T1OSC
    T1CONbits.T1OSCEN = 1; // Drive Crystal
    T1CONbits.T1CKPS = 0; // No devide
    T1CONbits.nT1SYNC = 1; // No Sync
    T1CONbits.RD16 = 0; // Timer1 = 2 x 8bit timer
    T1CONbits.TMR1ON = 1; // module enable
    IPR1bits.TMR1IP = 0; // low priority
    PIR1bits.TMR1IF = 0;
    PIE1bits.TMR1IE = 1;
    INTCONbits.PEIE = 1;
    // Timer 3 init
    T3CONbits.TMR3CS = 0; // Clock = Fosc/4
    T3CONbits.T3OSCEN = 0; // Not Drive Crystal
    T3CONbits.T3CKPS = 2; // clock/4
    T3CONbits.RD163 = 0; // Timer3=16bit timer
    T3CONbits.TMR3ON = 1; // module enable
    IPR2bits.TMR3IP = 0; // low priority
    PIR2bits.TMR3IF = 0;
    PIE2bits.TMR3IE = 1; // interrupt enable
    INTCONbits.PEIE = 1;
    // RTCC init
    RTCC_init();
    // UART init
    TXSTA1bits.TX9 = 0; // 0:8-bit
    TXSTA1bits.TXEN = 1; //1:enable
    TXSTA1bits.SYNC = 0; // 0:Asynchronous mode
    TXSTA1bits.BRGH = 0; // 1:High Speed
    RCSTA1bits.SPEN = 1; // 1:Serial Port enable
    RCSTA1bits.RX9 = 0; // 0:8-bit
    RCSTA1bits.CREN = 1; // 1:continuous receive enable
    BAUDCON1bits.BRG16 = 0; // 1:use 16-bit SPBRG
    SPBRG1 = _XTAL_FREQ / 64 / 9600 - 1;
    SPBRGH1 = 0;
    IPR1bits.RC1IP = 0; //0:low priority
    PIE1bits.RCIE = 1;
    INTCONbits.PEIE = 1;
}

void delay(uint16_t t) {
    while (t--)__delay_ms(1);
}

int main(void) {
    main_init();
    INTCONbits.GIE = 1;

    while (1) {
        RTCC_task();
        RTCC_adjust_time_button(&amp;now, &amp;mode, &amp;inc, &amp;dec);

        if (time_change_flag) {
            time_change_flag = 0;
            char str[30];
            sprintf(str, "\t20%02d/%02d/%02d(%s)%02d:%02d-%02d\n",
                    now.YY,
                    now.MM,
                    now.DD,
                    weekday_3char[now.EE],
                    now.hh,
                    now.mm,
                    now.ss);
            for (uint8_t i = 0; str[i]; i++) {
                while (!PIR1bits.TXIF); //送信完了まで待つ
                TXREG1 = str[i];
            }
        }
    }

    return 0;
}



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Microchip Library for Application">Microchip Library for Application (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-MLA">MLA (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-01-13-pic-bootloader/">
		<img src="/posts/2016-01-13-pic-bootloader/icon.jpg" title="PICでブートローダ" alt="PICでブートローダ">
		<div class="post-list-char">
			<span class="post-meta">2016年01月13日 Category: explanations</span>
			<h2>
				PICでブートローダ
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53を使おう

以前 PIC18F27J53のすすめ という記事を書きました。それの続きで、今回はUSBブートローダの使い方について書きたいと思います。

ブートローダとは

ブートローダとは自分自身にプログラムを書きこむプログラムです。これを使うとPICkitなどのライタを使わなくてもプログラムの書き込みをすることができるようになります。

ただし、初回に一度だけブートローダ用のプログラムをPICkitなどで書きこむ必要があります。

ユーザープログラム

ユーザープログラムとは、ブートローダーにより書き込むプログラムです。あなたが作った、実際に動かすプログラムということです。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-IR">IR (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Remote Control">Remote Control (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Server">Server (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-11-ir-station-reference/">
		<img src="/posts/2016-03-11-ir-station-reference/icon.jpg" title="IR Station" alt="IR Station">
		<div class="post-list-char">
			<span class="post-meta">2016年03月11日 Category: works</span>
			<h2>
				IR Station
			</h2>
			<span class="post-meta" style="max-height:4em;">IR Station

Infrared Remote Controller with ESP8266 WiFi-module
You can control your home appliances with your smartphone or laptop.

Main parts


  ESP-WROOM-02 (ESP8266 WiFi Module)
  IR Receiver
  IR LED
  Indicator LED


How to Use

Setup the Device


  Supply power to the device.
  Connect your cellphone or laptop to Wi-Fi SSID “IR-Station”.
  Access http://192.168.4.1 in a browser
  Enter Wi-Fi SSID of your home and its password
  Enter a device name you like. Because it will be a part of URL, you cannot use space or symbol character.
  Click OK button.
  If connection succeeded, Wi-Fi “IR-Station” will automatically disappear.
  Connect your cellphone or laptop to your home’s Wi-Fi.
  Access http://DEVICE_NAME.local in a browser. (the smart phones or laptops with Bonjour)
  Access http:/192.168.xx.xx (one example) in a browser. Please see the device log data to get the device IP address. (the smart phones or laptops with no Bonjour)
  If something appears, setup is complete.


Store Signals


  Access http://DEVICE_NAME.local in a browser. DEVICE_NAME is the device name you entered in the previous form.
  Look at the form of the bottom of the screen.
  Click “Recode a Signal” button.
  Select a channel you want to assign a signal.
  Enter a name of the signal. Don’t use Japanese character.
  Click Recode button. An LED indicator will light.
  Press the button on the remote controller toward the device to store the signal.


Remote Control


  Access http://DEVICE_NAME.local in a browser.
  Click a button which assigned a signal you want to send.


LED Indicator


  
    
      Color
      Status
    
  
  
    
      Red
      Error
    
    
      Green
      Booting, Sending Signal or Receiving Signal
    
    
      Blue
      Listening
    
  


Display Sample



How to Make

Required Library

Please Add the Libraries below to your Arduino IDE


  Arduino TimeLib (https://github.com/PaulStoffregen/Time/blob/master/TimeLib.h)
  Arduino Json (https://github.com/bblanchon/ArduinoJson)


Steps


  Gather the components.
  Assemble the components according to the circuit diagram.
  Connect the device and the PC with a serial-to-USB conversion module.
  Prepare Arduino IDE and serial-USB converter’s driver.
  Open the preferences of Arduino IDE and fill in this URL: http://arduino.esp8266.com/stable/package_esp8266com_index.json to “Additional Boards Manager URLs”.
  Add “Generic ESP8266 Module” in the Arduino IDE Board Manager.
  Add the required libraries to your Arduino IDE in the Arduino IDE Library Manager or zip files.
  Open IR-station firmware in the Arduino IDE.
  Select “Generic ESP8266 Module” and configure each item of board settings properly. See Arduino Board Settings below.
  Select correct serial COM port and upload program to the device. When upload program, GPIO0 and GPIO2 must be pulled-up, and GPIO15 must be pulled-down. It’s necessary to reset the devie immediately before upload. It’s a little difficult.
  The uploading takes about 30 seconds.
  Upload the SPIFFS data: menu -&gt; tool -&gt; ESP8266 Sketch Data Upload. (See https://github.com/esp8266/Arduino/blob/master/doc/filesystem.md)
  Process termination.


Arduino Board Settings


  
    
      item
      select
    
  
  
    
      Board
      ESPino (ESP-12 Module)
    
    
      Flash Mode
      QIO
    
    
      CPU Frequency
      80MHz
    
    
      Flash Size
      4M(3M SPIFFS)
    
    
      Reset Method
      ck
    
    
      Upload Speed
      115200
    
  


Components

Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      ESP8266 WiFi Module
      ESP-WROOM-02
      1
    
    
      IR receiver
      PL-IRM0101-3 or equivalents
      1
    
    
      IR LED
      anything good
      2 or 4
    
    
      Nch FET
      BS170 or equivalents
      1
    
    
      IR LED Current Regulation Resistor
      4.7 ohms, 1W
      1~2
    
    
      Pull-up/down Resistor
      10k ohms
      5
    
    
      Indicator LED
      RGB full-color LED
      1
    
    
      Voltage Regulator
      output: 3.3V 150mA or more
      1
    
    
      Bypass Capacitor
      0.1uF
      2~3
    
    
      Power Stabilization Capacitor
      470uF~1000uF
      1
    
  


Optional Device Components


  
    
      Components
      Details
      Quantity
    
  
  
    
      Reset Switch
      tact switch
      1
    
    
      Program Upload Switch
      tact switch
      1
    
  


Requires


  
    
      Requires
      Details
      Quantity
    
  
  
    
      Serial-to-USB conversion Module
      such as FT232
      1
    
    
      Power Supplyer
      over 3.3V
      1
    
  


Circuit Diagram



Sample



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Sinatra">Sinatra (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ruby">ruby (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-アプリケーション">アプリケーション (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-HTTP">HTTP (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-HTML">HTML (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-CSS">CSS (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Active Record">Active Record (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-SQLite3">SQLite3 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-JQuiry">JQuiry (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ドットインストール">ドットインストール (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-12-sinatra/">
		<img src="/posts/2016-03-12-sinatra/icon.png" title="Sinatraでアプリケーションを作る" alt="Sinatraでアプリケーションを作る">
		<div class="post-list-char">
			<span class="post-meta">2016年03月12日 Category: memos</span>
			<h2>
				Sinatraでアプリケーションを作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

格安WiFiモジュールESP-WROOM-02を使って電流を計測してそれを受信し表示するアプリケーションを作りました。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-時計">時計 (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-12-low-power-clock/">
		<img src="/posts/2016-09-12-low-power-clock/icon.jpg" title="PICで省エネ時計を作る" alt="PICで省エネ時計を作る">
		<div class="post-list-char">
			<span class="post-meta">2016年09月12日 Category: works</span>
			<h2>
				PICで省エネ時計を作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PICで時計

久しぶりにPICの話題です．しばらくESP8266やARMマイコンなど，上級のマイコンを使っていましたが，またPICを使ってみたくなりました．

他のマイコンには真似できないような超低消費電力の時計を作ってみました．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-03-14-killifish-light-2/">
		<img src="/posts/2016-03-14-killifish-light-2/icon.png" title="メダカの照明 Ver.2" alt="メダカの照明 Ver.2">
		<div class="post-list-char">
			<span class="post-meta">2016年03月14日 Category: works</span>
			<h2>
				メダカの照明 Ver.2
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

メダカの水槽の照明

以前、PICで作ったメダカの水槽の照明(←リンク)を紹介しましたが、今回はこれをバージョンアップしました。めだかの照明がどのようなものかは以前の記事を参考にしてください。



格安WiFiモジュール

今注目のWiFiモジュールであるESP-WROOM-02を使ってWiFiに対応しました。これにより、スマートフォンなどからブラウザ経由で操作できます。

このWiFiモジュールを使った赤外線学習リモコンの記事も書きましたので合わせてご覧ください。


  赤外線学習リモコン（日本語による紹介記事）
  赤外線学習リモコン（英語によるリファレンス）


ESP-WROOM-02 WiFiモジュール　秋月電子にて550円(2016/3/14現在)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-電流計">電流計 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-電圧計">電圧計 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Wi-Fi">Wi-Fi (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-03-23-relay-sensor/">
		<img src="/posts/2016-03-23-relay-sensor/icon.jpg" title="ESP-WROOM-02による中継型電力計" alt="ESP-WROOM-02による中継型電力計">
		<div class="post-list-char">
			<span class="post-meta">2016年03月23日 Category: works</span>
			<h2>
				ESP-WROOM-02による中継型電力計
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

話題のESP-WROOM-02

ESP8266という高性能マイコンを積んだ話題のESP-WROOM-02モジュール。

今回はこれを使って中継型電力計を作りました。



中継型とは

電源端子としてよく使われてるDCジャックに中継するだけで、そこから電力をもらいつつ電力を計測します。

WiFi経由でサーバーへ

測定した電力データはWiFiを使って任意のサーバーに送ることができます。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Twitter">Twitter (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-bot">bot (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-電力計測">電力計測 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-C++">C++ (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-03-power-tweeter/">
		<img src="/posts/2016-04-03-power-tweeter/icon.png" title="電力つぶやきbot" alt="電力つぶやきbot">
		<div class="post-list-char">
			<span class="post-meta">2016年04月03日 Category: works</span>
			<h2>
				電力つぶやきbot
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

中継型電力計
先日の記事でESP-WROOM-02による中継型電力計を紹介しましたが、それを使って、電力を自動でつぶやくbotを作りました。

何の電力をつぶやくのか

僕の家には自作の100W級ソーラーシステムがあります。このソーラーシステムの発電量を定期的にツイートすることにしました。



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-PIC18F26K22">PIC18F26K22 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-電光掲示板">電光掲示板 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ドットマトリクスLED">ドットマトリクスLED (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-スクロール">スクロール (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-05-strange-keyboard/">
		<img src="/posts/2016-04-05-strange-keyboard/icon.jpg" title="変なキーボード" alt="変なキーボード">
		<div class="post-list-char">
			<span class="post-meta">2016年04月05日 Category: works</span>
			<h2>
				変なキーボード
			</h2>
			<span class="post-meta" style="max-height:4em;">つくったもの

ASCIIキーボードとスクロール表示器を作りました。



変なキーボード


  キーボードの表面には２つのロータリースイッチがついています。それらを回すことで文字を選び、送信ボタンを押して送信します。
  もし間違った文字を送信してしまったら、送信ボタンを長押しすることで１文字ずつ削除することができます。
  文章ができたら、送信ボタンをさらに長押しすることで、Enterになり、文を始めからスクロールします。


</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-exiftool">exiftool (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-08-remove-geotag/">
		<img src="/home/icon.png" title="写真から位置情報タグを削除する" alt="写真から位置情報タグを削除する">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: memos</span>
			<h2>
				写真から位置情報タグを削除する
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

写真をブログやSNSにアップロードするときに位置情報のタグをつけたままだと自宅を特定される可能性があり、非常に危険である。今回はそれを削除する方法を紹介する。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-geotag">geotag (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-08-remove-geotag/">
		<img src="/home/icon.png" title="写真から位置情報タグを削除する" alt="写真から位置情報タグを削除する">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: memos</span>
			<h2>
				写真から位置情報タグを削除する
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

写真をブログやSNSにアップロードするときに位置情報のタグをつけたままだと自宅を特定される可能性があり、非常に危険である。今回はそれを削除する方法を紹介する。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-写真">写真 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-08-remove-geotag/">
		<img src="/home/icon.png" title="写真から位置情報タグを削除する" alt="写真から位置情報タグを削除する">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: memos</span>
			<h2>
				写真から位置情報タグを削除する
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

写真をブログやSNSにアップロードするときに位置情報のタグをつけたままだと自宅を特定される可能性があり、非常に危険である。今回はそれを削除する方法を紹介する。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-位置情報">位置情報 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-08-remove-geotag/">
		<img src="/home/icon.png" title="写真から位置情報タグを削除する" alt="写真から位置情報タグを削除する">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: memos</span>
			<h2>
				写真から位置情報タグを削除する
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

写真をブログやSNSにアップロードするときに位置情報のタグをつけたままだと自宅を特定される可能性があり、非常に危険である。今回はそれを削除する方法を紹介する。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-タグ">タグ (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-08-remove-geotag/">
		<img src="/home/icon.png" title="写真から位置情報タグを削除する" alt="写真から位置情報タグを削除する">
		<div class="post-list-char">
			<span class="post-meta">2016年04月08日 Category: memos</span>
			<h2>
				写真から位置情報タグを削除する
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

写真をブログやSNSにアップロードするときに位置情報のタグをつけたままだと自宅を特定される可能性があり、非常に危険である。今回はそれを削除する方法を紹介する。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ThingSpeak">ThingSpeak (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-IoT">IoT (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Solar Power">Solar Power (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-太陽光発電">太陽光発電 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-20-power-monitor/">
		<img src="/posts/2016-04-20-power-monitor/img.jpg" title="ソーラー発電量モニター" alt="ソーラー発電量モニター">
		<div class="post-list-char">
			<span class="post-meta">2016年04月20日 Category: works</span>
			<h2>
				ソーラー発電量モニター
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

100W級ソーラーシステムの発電量をThingSpeak.comというサイトに送ってグラフ化しました。

データの送信には、自作の中継型電力計を使用しています。

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-KiCad">KiCad (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-22-freerouting/">
		<img src="/posts/2016-04-22-freerouting/icon.png" title="KiCadで自動配線" alt="KiCadで自動配線">
		<div class="post-list-char">
			<span class="post-meta">2016年04月22日 Category: explanations</span>
			<h2>
				KiCadで自動配線
			</h2>
			<span class="post-meta" style="max-height:4em;">概要



自動配線ツールを使おう

KiCadが流行ってきて，使う人が増えてきている．

しかし，自動配線ツールを使っている人は少ない．

それでははもったいない！！

今回は自動配線ツールの使い方を説明する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-自動配線">自動配線 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-04-22-freerouting/">
		<img src="/posts/2016-04-22-freerouting/icon.png" title="KiCadで自動配線" alt="KiCadで自動配線">
		<div class="post-list-char">
			<span class="post-meta">2016年04月22日 Category: explanations</span>
			<h2>
				KiCadで自動配線
			</h2>
			<span class="post-meta" style="max-height:4em;">概要



自動配線ツールを使おう

KiCadが流行ってきて，使う人が増えてきている．

しかし，自動配線ツールを使っている人は少ない．

それでははもったいない！！

今回は自動配線ツールの使い方を説明する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-回路">回路 (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-22-freerouting/">
		<img src="/posts/2016-04-22-freerouting/icon.png" title="KiCadで自動配線" alt="KiCadで自動配線">
		<div class="post-list-char">
			<span class="post-meta">2016年04月22日 Category: explanations</span>
			<h2>
				KiCadで自動配線
			</h2>
			<span class="post-meta" style="max-height:4em;">概要



自動配線ツールを使おう

KiCadが流行ってきて，使う人が増えてきている．

しかし，自動配線ツールを使っている人は少ない．

それでははもったいない！！

今回は自動配線ツールの使い方を説明する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-基板">基板 (3) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-04-22-freerouting/">
		<img src="/posts/2016-04-22-freerouting/icon.png" title="KiCadで自動配線" alt="KiCadで自動配線">
		<div class="post-list-char">
			<span class="post-meta">2016年04月22日 Category: explanations</span>
			<h2>
				KiCadで自動配線
			</h2>
			<span class="post-meta" style="max-height:4em;">概要



自動配線ツールを使おう

KiCadが流行ってきて，使う人が増えてきている．

しかし，自動配線ツールを使っている人は少ない．

それでははもったいない！！

今回は自動配線ツールの使い方を説明する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-講習会">講習会 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ロボット技術研究会">ロボット技術研究会 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-初心者">初心者 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-トランジスタ">トランジスタ (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-18-circuit-lecture/">
		<img src="/posts/2016-05-18-circuit-lecture/icon.png" title="回路講習会2015" alt="回路講習会2015">
		<div class="post-list-char">
			<span class="post-meta">2016年05月18日 Category: explanations</span>
			<h2>
				回路講習会2015
			</h2>
			<span class="post-meta" style="max-height:4em;">回路講習会

東京工業大学ロボット技術研究会の平成27年度回路講習会の資料です．
講習会は90分の講義を4回行いました．
気持ちを込めて作りました．スライド数は200枚を超えています．どうぞご覧ください．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-FFT">FFT (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-高速フーリエ変換">高速フーリエ変換 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Nucleo">Nucleo (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-音声解析">音声解析 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-グラフィック液晶">グラフィック液晶 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-シリアル通信">シリアル通信 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-22-fft-lcd/">
		<img src="/posts/2016-05-22-fft-lcd/icon.jpg" title="高速フーリエ変換でスペクトル表示" alt="高速フーリエ変換でスペクトル表示">
		<div class="post-list-char">
			<span class="post-meta">2016年05月22日 Category: works</span>
			<h2>
				高速フーリエ変換でスペクトル表示
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


Nucleoボードとグラフィック液晶を使って，音声解析機を作りました．マイクに入ってきた音を高速フーリエ変換して，周波数スペクトルを表示します．






</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Jekyll">Jekyll (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-26-syntax/">
		<img src="/posts/2016-05-26-syntax/icon.png" title="Jekyll & Asciidocでシンタックスハイライト" alt="Jekyll & Asciidocでシンタックスハイライト">
		<div class="post-list-char">
			<span class="post-meta">2016年05月26日 Category: memos</span>
			<h2>
				Jekyll & Asciidocでシンタックスハイライト
			</h2>
			<span class="post-meta" style="max-height:4em;">
Jekyllのシンタックスハイライトテーマを変更する


Jekyllのデフォルトのテーマはダサいので変更する．
https://github.com/jwarby/jekyll-pygments-themesから適当なテーマを持ってきて，中身を以下のファイルと差し替える．(バックアップを取ろう)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Asciidoc">Asciidoc (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-26-syntax/">
		<img src="/posts/2016-05-26-syntax/icon.png" title="Jekyll & Asciidocでシンタックスハイライト" alt="Jekyll & Asciidocでシンタックスハイライト">
		<div class="post-list-char">
			<span class="post-meta">2016年05月26日 Category: memos</span>
			<h2>
				Jekyll & Asciidocでシンタックスハイライト
			</h2>
			<span class="post-meta" style="max-height:4em;">
Jekyllのシンタックスハイライトテーマを変更する


Jekyllのデフォルトのテーマはダサいので変更する．
https://github.com/jwarby/jekyll-pygments-themesから適当なテーマを持ってきて，中身を以下のファイルと差し替える．(バックアップを取ろう)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Blog">Blog (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-21-raspi3/">
		<img src="/posts/2016-08-21-raspi3/icon.jpg" title="ブログのサーバーが新しくなりました！" alt="ブログのサーバーが新しくなりました！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月21日 Category: blogs</span>
			<h2>
				ブログのサーバーが新しくなりました！
			</h2>
			<span class="post-meta" style="max-height:4em;">ラズパイ3を購入

ハイスペックなラズパイ3

64bitのARM-CPUが搭載されたラズパイ3が話題になったのは記憶に新しいですが，ラズパイ3は，秋月では6,200円ですし，公式でも5,000円ほどします．

税込4,000円かつカード払いOK！

そんなラズパイ3が，Maker Faire Tokyo 2016 で税込4,000円かつカード払いOKで販売しているではありませんか！！

これは安い！と思い，使う予定もないのに衝動買いしちゃいました…(汗

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-05-26-syntax/">
		<img src="/posts/2016-05-26-syntax/icon.png" title="Jekyll & Asciidocでシンタックスハイライト" alt="Jekyll & Asciidocでシンタックスハイライト">
		<div class="post-list-char">
			<span class="post-meta">2016年05月26日 Category: memos</span>
			<h2>
				Jekyll & Asciidocでシンタックスハイライト
			</h2>
			<span class="post-meta" style="max-height:4em;">
Jekyllのシンタックスハイライトテーマを変更する


Jekyllのデフォルトのテーマはダサいので変更する．
https://github.com/jwarby/jekyll-pygments-themesから適当なテーマを持ってきて，中身を以下のファイルと差し替える．(バックアップを取ろう)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Source Code">Source Code (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-26-syntax/">
		<img src="/posts/2016-05-26-syntax/icon.png" title="Jekyll & Asciidocでシンタックスハイライト" alt="Jekyll & Asciidocでシンタックスハイライト">
		<div class="post-list-char">
			<span class="post-meta">2016年05月26日 Category: memos</span>
			<h2>
				Jekyll & Asciidocでシンタックスハイライト
			</h2>
			<span class="post-meta" style="max-height:4em;">
Jekyllのシンタックスハイライトテーマを変更する


Jekyllのデフォルトのテーマはダサいので変更する．
https://github.com/jwarby/jekyll-pygments-themesから適当なテーマを持ってきて，中身を以下のファイルと差し替える．(バックアップを取ろう)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-SyntaxHighlighting">SyntaxHighlighting (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-05-26-syntax/">
		<img src="/posts/2016-05-26-syntax/icon.png" title="Jekyll & Asciidocでシンタックスハイライト" alt="Jekyll & Asciidocでシンタックスハイライト">
		<div class="post-list-char">
			<span class="post-meta">2016年05月26日 Category: memos</span>
			<h2>
				Jekyll & Asciidocでシンタックスハイライト
			</h2>
			<span class="post-meta" style="max-height:4em;">
Jekyllのシンタックスハイライトテーマを変更する


Jekyllのデフォルトのテーマはダサいので変更する．
https://github.com/jwarby/jekyll-pygments-themesから適当なテーマを持ってきて，中身を以下のファイルと差し替える．(バックアップを取ろう)



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-PC">PC (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-14-pdf/">
		<img src="/posts/2016-06-14-pdf/icon.jpg" title="おすすめ PDF Viewer" alt="おすすめ PDF Viewer">
		<div class="post-list-char">
			<span class="post-meta">2016年06月14日 Category: explanations</span>
			<h2>
				おすすめ PDF Viewer
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


世の中にはたくさんのPDF Viewerがあり一長一短である．AdobeのPDF Readerが有名であるが，もっと使いやすいものを見つけたのでそれを紹介する．



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-pdf">pdf (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-14-pdf/">
		<img src="/posts/2016-06-14-pdf/icon.jpg" title="おすすめ PDF Viewer" alt="おすすめ PDF Viewer">
		<div class="post-list-char">
			<span class="post-meta">2016年06月14日 Category: explanations</span>
			<h2>
				おすすめ PDF Viewer
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


世の中にはたくさんのPDF Viewerがあり一長一短である．AdobeのPDF Readerが有名であるが，もっと使いやすいものを見つけたのでそれを紹介する．



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-tex">tex (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-14-pdf/">
		<img src="/posts/2016-06-14-pdf/icon.jpg" title="おすすめ PDF Viewer" alt="おすすめ PDF Viewer">
		<div class="post-list-char">
			<span class="post-meta">2016年06月14日 Category: explanations</span>
			<h2>
				おすすめ PDF Viewer
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


世の中にはたくさんのPDF Viewerがあり一長一短である．AdobeのPDF Readerが有名であるが，もっと使いやすいものを見つけたのでそれを紹介する．



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-viewer">viewer (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-14-pdf/">
		<img src="/posts/2016-06-14-pdf/icon.jpg" title="おすすめ PDF Viewer" alt="おすすめ PDF Viewer">
		<div class="post-list-char">
			<span class="post-meta">2016年06月14日 Category: explanations</span>
			<h2>
				おすすめ PDF Viewer
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


世の中にはたくさんのPDF Viewerがあり一長一短である．AdobeのPDF Readerが有名であるが，もっと使いやすいものを見つけたのでそれを紹介する．



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-editor">editor (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-14-pdf/">
		<img src="/posts/2016-06-14-pdf/icon.jpg" title="おすすめ PDF Viewer" alt="おすすめ PDF Viewer">
		<div class="post-list-char">
			<span class="post-meta">2016年06月14日 Category: explanations</span>
			<h2>
				おすすめ PDF Viewer
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


世の中にはたくさんのPDF Viewerがあり一長一短である．AdobeのPDF Readerが有名であるが，もっと使いやすいものを見つけたのでそれを紹介する．



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-iPhone">iPhone (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-15-repairing-iphone6plus/">
		<img src="/posts/2016-06-15-repairing-iphone6plus/icon.jpg" title="割れちゃったiPhoneの液晶を直したお話" alt="割れちゃったiPhoneの液晶を直したお話">
		<div class="post-list-char">
			<span class="post-meta">2016年06月15日 Category: blogs</span>
			<h2>
				割れちゃったiPhoneの液晶を直したお話
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


割れた iPhone 6 Plus

他のことに夢中になっているときに机から落として割ってしまいました．ショックです&#8230;&#8203;






自力で液晶パネルを交換する

割れた液晶を使用して手を怪我したり，Appleに高いお金を支払って修理するのは嫌なので，ここは技術者として自力で交換してみたいと思います．




</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Apple">Apple (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-15-repairing-iphone6plus/">
		<img src="/posts/2016-06-15-repairing-iphone6plus/icon.jpg" title="割れちゃったiPhoneの液晶を直したお話" alt="割れちゃったiPhoneの液晶を直したお話">
		<div class="post-list-char">
			<span class="post-meta">2016年06月15日 Category: blogs</span>
			<h2>
				割れちゃったiPhoneの液晶を直したお話
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


割れた iPhone 6 Plus

他のことに夢中になっているときに机から落として割ってしまいました．ショックです&#8230;&#8203;






自力で液晶パネルを交換する

割れた液晶を使用して手を怪我したり，Appleに高いお金を支払って修理するのは嫌なので，ここは技術者として自力で交換してみたいと思います．




</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-分解">分解 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-15-repairing-iphone6plus/">
		<img src="/posts/2016-06-15-repairing-iphone6plus/icon.jpg" title="割れちゃったiPhoneの液晶を直したお話" alt="割れちゃったiPhoneの液晶を直したお話">
		<div class="post-list-char">
			<span class="post-meta">2016年06月15日 Category: blogs</span>
			<h2>
				割れちゃったiPhoneの液晶を直したお話
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


割れた iPhone 6 Plus

他のことに夢中になっているときに机から落として割ってしまいました．ショックです&#8230;&#8203;






自力で液晶パネルを交換する

割れた液晶を使用して手を怪我したり，Appleに高いお金を支払って修理するのは嫌なので，ここは技術者として自力で交換してみたいと思います．




</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-修理">修理 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-06-15-repairing-iphone6plus/">
		<img src="/posts/2016-06-15-repairing-iphone6plus/icon.jpg" title="割れちゃったiPhoneの液晶を直したお話" alt="割れちゃったiPhoneの液晶を直したお話">
		<div class="post-list-char">
			<span class="post-meta">2016年06月15日 Category: blogs</span>
			<h2>
				割れちゃったiPhoneの液晶を直したお話
			</h2>
			<span class="post-meta" style="max-height:4em;">
概要


割れた iPhone 6 Plus

他のことに夢中になっているときに机から落として割ってしまいました．ショックです&#8230;&#8203;






自力で液晶パネルを交換する

割れた液晶を使用して手を怪我したり，Appleに高いお金を支払って修理するのは嫌なので，ここは技術者として自力で交換してみたいと思います．




</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-赤外線学習リモコン">赤外線学習リモコン (4) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-25-how-to-use-ir-station/">
		<img src="/posts/2016-07-25-how-to-use-ir-station/icon.png" title="IR-Stationの使い方" alt="IR-Stationの使い方">
		<div class="post-list-char">
			<span class="post-meta">2016年07月25日 Category: works</span>
			<h2>
				IR-Stationの使い方
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-18-ir-station/">
		<img src="/posts/2016-07-18-ir-station/icon.jpg" title="赤外線学習リモコン完成" alt="赤外線学習リモコン完成">
		<div class="post-list-char">
			<span class="post-meta">2016年07月18日 Category: works</span>
			<h2>
				赤外線学習リモコン完成
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

赤外線学習リモコンとは，市販の家電製品などのリモコンの赤外線信号を記憶し，送信することができるものです．

今回は，WiFi接続に対応した赤外線学習リモコンを作りました．スマートフォンやパソコンなどから，家電製品をコントロールすることができます．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-07-06-ir-station-board/">
		<img src="/posts/2016-07-06-ir-station-board/icon.jpg" title="赤外線学習リモコンの基板が届きました！" alt="赤外線学習リモコンの基板が届きました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月06日 Category: works</span>
			<h2>
				赤外線学習リモコンの基板が届きました！
			</h2>
			<span class="post-meta" style="max-height:4em;">基板が届きました

思ったより早かった

基板加工サービスElecrowに発注した基板が届きました！発送方法は一番安いRegistered Airmailだったのですが，なんと発注から10日で届きました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ペット">ペット (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-07-13-new-fish/">
		<img src="/posts/2016-07-13-new-fish/icon.jpg" title="メダカが増えました！" alt="メダカが増えました！">
		<div class="post-list-char">
			<span class="post-meta">2016年07月13日 Category: blogs</span>
			<h2>
				メダカが増えました！
			</h2>
			<span class="post-meta" style="max-height:4em;">卵がいっぱい！！ 7/5
暖かくなってきたこの時期，ペットのメダカにたくさんの卵ができました．すでに卵の中から目が透けていて今にも孵化しそうです！

毎日水替えをしないとカビが生えてしまうので，目が離せません！

ちなみに，カビ防止のために，卵の段階では水道水の方がいいらしいです．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Maker Faire Tokyo">Maker Faire Tokyo (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-05-maker-faire-tokyo-2016/">
		<img src="/posts/2016-08-05-maker-faire-tokyo-2016/logo.jpg" title="Maker Faire Tokyo 2016 に出展します！" alt="Maker Faire Tokyo 2016 に出展します！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月05日 Category: blogs</span>
			<h2>
				Maker Faire Tokyo 2016 に出展します！
			</h2>
			<span class="post-meta" style="max-height:4em;">Maker Faire Tokyo 2016

こんにちは．けりです．
8月6日(土)，8月7日(日)にお台場の国際展示場で開催される，ものつくりの展示イベントのMaker Faire Tokyo 2016に出展することになりました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-MFT2016">MFT2016 (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-05-maker-faire-tokyo-2016/">
		<img src="/posts/2016-08-05-maker-faire-tokyo-2016/logo.jpg" title="Maker Faire Tokyo 2016 に出展します！" alt="Maker Faire Tokyo 2016 に出展します！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月05日 Category: blogs</span>
			<h2>
				Maker Faire Tokyo 2016 に出展します！
			</h2>
			<span class="post-meta" style="max-height:4em;">Maker Faire Tokyo 2016

こんにちは．けりです．
8月6日(土)，8月7日(日)にお台場の国際展示場で開催される，ものつくりの展示イベントのMaker Faire Tokyo 2016に出展することになりました！

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-JavaScript">JavaScript (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-14-download-upload/">
		<img src="/posts/2016-08-14-download-upload/icon.png" title="IR-Stationの赤外線ダウンロード機能" alt="IR-Stationの赤外線ダウンロード機能">
		<div class="post-list-char">
			<span class="post-meta">2016年08月14日 Category: works</span>
			<h2>
				IR-Stationの赤外線ダウンロード機能
			</h2>
			<span class="post-meta" style="max-height:4em;">IR-Stationとは

自作のWiFi接続の赤外線学習リモコンです．IR-Stationを使えば，スマホやPCから家電製品をコントロールすることができます．

詳しくは，IR-Stationについての記事一覧をご覧ください．

IR-Stationの新機能

夏休みになり，IR-Stationを本格的に開発しています．今回は，いくつかの新機能を紹介します．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Raspberrypi">Raspberrypi (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-21-raspi3/">
		<img src="/posts/2016-08-21-raspi3/icon.jpg" title="ブログのサーバーが新しくなりました！" alt="ブログのサーバーが新しくなりました！">
		<div class="post-list-char">
			<span class="post-meta">2016年08月21日 Category: blogs</span>
			<h2>
				ブログのサーバーが新しくなりました！
			</h2>
			<span class="post-meta" style="max-height:4em;">ラズパイ3を購入

ハイスペックなラズパイ3

64bitのARM-CPUが搭載されたラズパイ3が話題になったのは記憶に新しいですが，ラズパイ3は，秋月では6,200円ですし，公式でも5,000円ほどします．

税込4,000円かつカード払いOK！

そんなラズパイ3が，Maker Faire Tokyo 2016 で税込4,000円かつカード払いOKで販売しているではありませんか！！

これは安い！と思い，使う予定もないのに衝動買いしちゃいました…(汗

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-シェルスクリプト">シェルスクリプト (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-28-update-blog-script/">
		<img src="/posts/2016-08-28-update-blog-script/icon.png" title="ブログを更新するスクリプト" alt="ブログを更新するスクリプト">
		<div class="post-list-char">
			<span class="post-meta">2016年08月28日 Category: memos</span>
			<h2>
				ブログを更新するスクリプト
			</h2>
			<span class="post-meta" style="max-height:4em;">github上にあるブログを同期するシェルスクリプト

自分用のメモ

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-ミュージックサーバー">ミュージックサーバー (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-01-raspi-music-server/">
		<img src="/posts/2016-09-01-raspi-music-server/icon.jpg" title="ラズパイでミュージックサーバー" alt="ラズパイでミュージックサーバー">
		<div class="post-list-char">
			<span class="post-meta">2016年09月01日 Category: works</span>
			<h2>
				ラズパイでミュージックサーバー
			</h2>
			<span class="post-meta" style="max-height:4em;">作ったもの

ラズパイミュージックサーバー

スマートフォンでコントロールできるステレオコンポです．



構成

Raspberry Pi 3 Type B

http://akizukidenshi.com/catalog/g/gM-10414/



Micro SDXC 64GB
https://www.amazon.co.jp/dp/B010SERHJY



AKI.DAC-U2704 REV.C

http://akizukidenshi.com/catalog/g/gK-05369/



アキバのジャンク街で買ったウーハー付きアンプ

5年前くらいにアキバのジャンク街で新品2,000円程で買ったウーハー付きアンプ．音がいいんだな．



家にあったBOSEのスピーカー



2.5A出力ACアダプタ

http://akizukidenshi.com/catalog/g/gM-10507/



マイクロUSBケーブル

http://akizukidenshi.com/catalog/g/gC-09314/



短いミニUSBケーブル

家に転がっていました．



RCA-ステレオミニジャック変換ケーブル



ソフトウェア

Volumio

Volumioとはラズパイ用OSであるraspbeanをもとに作られたミュージックサーバーOSです．ダウンロードしたimgファイルをマイクロSDカードに焼くだけで即使うことができます．

Volumio.orgよりダウンロードできます．

作り方


  SDカードにVolumioのOSを焼いて，ラズパイにセットする．
  ラズパイにDACとスピーカーをつなぐ．
  ラズパイにLANケーブルをさして，電源を投入する．
  パソコンでネットワーク上のPCを検索し，Volumioを見つける．
  見つけたVolumioドライブに曲をコピーする．
  ブラウザでhttp://volumio.local/にアクセスする．
  あとは使えばわかる．


操作画面

ブラウザから操作

わかりやすいGUIで，直感的に操作できます．



MPDクライアントから操作

もちろん，MPDクライアントにも対応しています．



まとめ

スマホからコントロールできるミュージックサーバーがとても簡単にできちゃいました！Volumioはすごいです．

次はDACやアンプを作りたいです．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-31-volumio-playlist/">
		<img src="/posts/2016-08-31-volumio-playlist/icon.png" title="VolumioでiTunesのプレイリストを使う" alt="VolumioでiTunesのプレイリストを使う">
		<div class="post-list-char">
			<span class="post-meta">2016年08月31日 Category: memos</span>
			<h2>
				VolumioでiTunesのプレイリストを使う
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Volumio

Volumioというミュージックサーバーソフトウェアがある．

ラズベリーパイにVolumioのOSを書き込むだけで，ミュージックサーバーが出来上がるし，Air Playや，SMBにも対応していて，素晴らしいものだ．

プレイリスト問題

しかし，そのプレイリストは独自の形式で，iTunesなどのプレイリストを読み込むことができず，新たに作らなくてはならない．

めんどくさい！

ということで，今回は，iTunesのプレイリストをvolumioのプレイリストに変換するスクリプトを紹介する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-Volumio">Volumio (2) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-01-raspi-music-server/">
		<img src="/posts/2016-09-01-raspi-music-server/icon.jpg" title="ラズパイでミュージックサーバー" alt="ラズパイでミュージックサーバー">
		<div class="post-list-char">
			<span class="post-meta">2016年09月01日 Category: works</span>
			<h2>
				ラズパイでミュージックサーバー
			</h2>
			<span class="post-meta" style="max-height:4em;">作ったもの

ラズパイミュージックサーバー

スマートフォンでコントロールできるステレオコンポです．



構成

Raspberry Pi 3 Type B

http://akizukidenshi.com/catalog/g/gM-10414/



Micro SDXC 64GB
https://www.amazon.co.jp/dp/B010SERHJY



AKI.DAC-U2704 REV.C

http://akizukidenshi.com/catalog/g/gK-05369/



アキバのジャンク街で買ったウーハー付きアンプ

5年前くらいにアキバのジャンク街で新品2,000円程で買ったウーハー付きアンプ．音がいいんだな．



家にあったBOSEのスピーカー



2.5A出力ACアダプタ

http://akizukidenshi.com/catalog/g/gM-10507/



マイクロUSBケーブル

http://akizukidenshi.com/catalog/g/gC-09314/



短いミニUSBケーブル

家に転がっていました．



RCA-ステレオミニジャック変換ケーブル



ソフトウェア

Volumio

Volumioとはラズパイ用OSであるraspbeanをもとに作られたミュージックサーバーOSです．ダウンロードしたimgファイルをマイクロSDカードに焼くだけで即使うことができます．

Volumio.orgよりダウンロードできます．

作り方


  SDカードにVolumioのOSを焼いて，ラズパイにセットする．
  ラズパイにDACとスピーカーをつなぐ．
  ラズパイにLANケーブルをさして，電源を投入する．
  パソコンでネットワーク上のPCを検索し，Volumioを見つける．
  見つけたVolumioドライブに曲をコピーする．
  ブラウザでhttp://volumio.local/にアクセスする．
  あとは使えばわかる．


操作画面

ブラウザから操作

わかりやすいGUIで，直感的に操作できます．



MPDクライアントから操作

もちろん，MPDクライアントにも対応しています．



まとめ

スマホからコントロールできるミュージックサーバーがとても簡単にできちゃいました！Volumioはすごいです．

次はDACやアンプを作りたいです．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
	<li>
	<a class="post-link" href="/posts/2016-08-31-volumio-playlist/">
		<img src="/posts/2016-08-31-volumio-playlist/icon.png" title="VolumioでiTunesのプレイリストを使う" alt="VolumioでiTunesのプレイリストを使う">
		<div class="post-list-char">
			<span class="post-meta">2016年08月31日 Category: memos</span>
			<h2>
				VolumioでiTunesのプレイリストを使う
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Volumio

Volumioというミュージックサーバーソフトウェアがある．

ラズベリーパイにVolumioのOSを書き込むだけで，ミュージックサーバーが出来上がるし，Air Playや，SMBにも対応していて，素晴らしいものだ．

プレイリスト問題

しかし，そのプレイリストは独自の形式で，iTunesなどのプレイリストを読み込むことができず，新たに作らなくてはならない．

めんどくさい！

ということで，今回は，iTunesのプレイリストをvolumioのプレイリストに変換するスクリプトを紹介する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-iTunes">iTunes (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-31-volumio-playlist/">
		<img src="/posts/2016-08-31-volumio-playlist/icon.png" title="VolumioでiTunesのプレイリストを使う" alt="VolumioでiTunesのプレイリストを使う">
		<div class="post-list-char">
			<span class="post-meta">2016年08月31日 Category: memos</span>
			<h2>
				VolumioでiTunesのプレイリストを使う
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Volumio

Volumioというミュージックサーバーソフトウェアがある．

ラズベリーパイにVolumioのOSを書き込むだけで，ミュージックサーバーが出来上がるし，Air Playや，SMBにも対応していて，素晴らしいものだ．

プレイリスト問題

しかし，そのプレイリストは独自の形式で，iTunesなどのプレイリストを読み込むことができず，新たに作らなくてはならない．

めんどくさい！

ということで，今回は，iTunesのプレイリストをvolumioのプレイリストに変換するスクリプトを紹介する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-プレイリスト">プレイリスト (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-08-31-volumio-playlist/">
		<img src="/posts/2016-08-31-volumio-playlist/icon.png" title="VolumioでiTunesのプレイリストを使う" alt="VolumioでiTunesのプレイリストを使う">
		<div class="post-list-char">
			<span class="post-meta">2016年08月31日 Category: memos</span>
			<h2>
				VolumioでiTunesのプレイリストを使う
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

Volumio

Volumioというミュージックサーバーソフトウェアがある．

ラズベリーパイにVolumioのOSを書き込むだけで，ミュージックサーバーが出来上がるし，Air Playや，SMBにも対応していて，素晴らしいものだ．

プレイリスト問題

しかし，そのプレイリストは独自の形式で，iTunesなどのプレイリストを読み込むことができず，新たに作らなくてはならない．

めんどくさい！

ということで，今回は，iTunesのプレイリストをvolumioのプレイリストに変換するスクリプトを紹介する．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-RTCC">RTCC (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-02-pic-rtcc/">
		<img src="/home/icon.png" title="PICでリアルタイムクロック" alt="PICでリアルタイムクロック">
		<div class="post-list-char">
			<span class="post-meta">2016年09月02日 Category: memos</span>
			<h2>
				PICでリアルタイムクロック
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PIC18F27J53は，リアルタイムクロック&amp;カレンダー(RTCC)モジュールをハードウェアで持っています．今回はそれを使用するためのライブラリを作ったので紹介します．

自作のRTCCライブラリ

必要なソースファイル


  My_RTCC.h
  My_RTCC.c
  My_button.h
  My_button.c
  main.c


概要

変数

このプログラムでは、時刻情報を持つ変数が３つある。


  PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
  time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
  time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。


以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
#### 使い方


  TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
  CONFIGを設定する。RTCOSC = T1OSCREF
  その次に、RTCC_init();を書く。（初期設定関数）
  mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
  任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
  時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
  adjust_time_inc()とadjust_time_dec()で調整するとよい。
  時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。


RTCCライブラリ

My_RTCC.h

/* 
 * File:   My_RTCC.h
 * Author: Ryotaro Onuki
 *
 * Created on 2015/03/19, 0:02
 * 
 * PIC18F28J53用リアルタイムクロックプログラム
 * ○概要
 * このプログラムでは、時刻情報を持つ変数が３つある。
 * 1.PICのRTCCモジュールのレジスタ→カレンダー表記、16進法表記（※厳密には10進だが便宜上16進とする。）
 * 2.time_t構造体内のepoch（uint32_t）→2000年1月1日0時00分からの総秒数
 * 3.time_t構造体内のYY,MM,DD,EE,hh,mm,ss→それぞれ、年、月、日、曜日、時、分、秒の10進法表記。
 * 以上３つがある。時刻が変わってもRTCC_loop()関数がすべての値を常に一致させているので安心して使用できる。
 * ○使い方
 * 1.TIOSCのピンに32.768kHzのクリスタルをつなぐ。（12pのコンデンサも）
 * 2.CONFIGを設定する。RTCOSC = T1OSCREF
 * 3.その次に、RTCC_init();を書く。（初期設定関数）
 * 4.mainループ内に、RTCC_loop();を書くこと。（時間の同期関数）
 * 5.任意で時計合わせをする。→時計合わせをしたら、RTCC_from_caltime()かRTCC_from_epoch()を呼んで変更を適用する。
 * 6.時計合わせには、adjust_time_toggle()を呼んでから、adjust_time_cursor()で、好きな項を選択する
 * 7.adjust_time_inc()とadjust_time_dec()で調整するとよい。
 * 8.時計合わせが終わったら、adjust_time_toggle()をもう一度呼ぶと時計合わせ終了。
 */

#ifndef MY_RTCC_H
#define	MY_RTCC_H

/** INCLUDES *******************************************************/
#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include "My_button.h"

/** VALUES *********************************************************/
#define MINUTE ((epoch_t)60)
#define HOUR ((epoch_t)60*60)
#define DAY ((epoch_t)60*60*24)

/** STRUCTURE ******************************************************/
// epoch型を定義。2000年1月1日0時00分からの総秒数。

typedef uint32_t epoch_t;

// 時刻合わせ用のフラグの構造体を定義。

typedef struct {

    union {
        uint8_t flags;

        struct {
            uint8_t ss : 1;
            uint8_t mm : 1;
            uint8_t hh : 1;
            uint8_t DD : 1;
            uint8_t MM : 1;
            uint8_t YY : 1;
        } flag;
    };
} edit_t;

// RTCC関連すべてを詰めた構造体。実際に使用する。

typedef struct {
    epoch_t epoch;
    uint8_t ss;
    uint8_t mm;
    uint8_t hh;
    uint8_t EE;
    uint8_t DD;
    uint8_t MM;
    uint8_t YY;
    uint8_t colon;
    uint8_t halfsec;
    edit_t edit;
} time_t;

/** VARIABLES ******************************************************/
// 表示用の曜日charをconstで定義。
extern const char weekday_3char[7][4];
// 現在時刻
extern time_t now;
// 時間が変わった時だけフラグが経つ。表示器の時刻の更新はこのフラグの監視をして行えばよい。
extern uint8_t time_change_flag;
// main_init()に書くこと。
void RTCC_init(void);
// Call this in the main loop
void RTCC_task(void);

/** USER FUNCTIONS *************************************************/
/** Transform time User Functions **/
// 時刻をRTCC基準でそろえる
void RTCC_from_RTCC(time_t *tm);
// 時刻をカレンダータイム基準でそろえる
void RTCC_from_caltime(time_t *tm);
// 時刻をエポック基準でそろえる
void RTCC_from_epoch(time_t *tm);
// return month length
uint8_t month_length(uint8_t year, uint8_t month);

/** LCD display **/
// 各項目表示用関数。ユーザーは使わない。
static void display_dec(char *str, uint8_t dec, uint8_t edit);
// 0802サイズ液晶用、文字列作成関数
void display_time_0802(time_t *tm, char *line0, char *line1);
// 1608サイズ液晶用、文字列作成関数
void display_time_1602(time_t *tm, char *line0, char *line1);

/** adjust the time **/
// 時刻編集モードを切り替える
void RTCC_adjust_time_toggle(time_t *tm);
// 編集中の時刻針を切り替える
void RTCC_adjust_time_cursor(time_t *tm);
// 編集中の時刻針を１つ増やす
void RTCC_adjust_time_inc(time_t *tm);
// 編集中の時刻針を１つ減らす
void RTCC_adjust_time_dec(time_t *tm);
// 3つのボタンで時刻合わせ
void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec);

/** FUNCTIONS ******************************************************/
/** en/decode number **/
// from decimal to hex
static uint8_t d_to_x(uint8_t dec);
// from hex to decimal
static uint8_t x_to_d(uint8_t hex);
// quotをdivで割って、余りを返す。よく使うので関数化した。
static epoch_t get_quot_rem(epoch_t *quot, uint8_t div);

/** Transform time **/
// RTCCをカレンダタイムに変換、上書き。
static void RTCC_to_caltime(time_t *tm);
// カレンダタイムをRTCCに変換、上書き。
static void caltime_to_RTCC(time_t *tm);
// Epochをカレンダタイムに変換、上書き。
static void epoch_to_caltime(time_t *tm);
// get epoch from caltime
static void caltime_to_epoch(time_t *tm);

#endif	/* MY_RTCC_H */



My_RTCC.c

#include "My_RTCC.h"

/** INCLUDES *******************************************************/
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/** VALUES *********************************************************/


/** VARIABLES ******************************************************/
const char weekday_3char[7][4] = {"SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"};
time_t now;
uint8_t time_change_flag;

/** USER FUNCTIONS *************************************************/

void RTCC_init(void) {
    RTCCFGbits.RTCWREN = 1;
    if (RTCCFGbits.RTCWREN != 1) {
        EECON2 = 0x55;
        EECON2 = 0xAA;
        RTCCFGbits.RTCWREN = 1;
    }
    RTCCFGbits.RTCEN = 1;
    RTCCFGbits.RTCOE = 0;
    PADCFG1bits.RTSECSEL0 = 1;
    PADCFG1bits.RTSECSEL1 = 1;
    RTCCAL = 0x00;
    T1CONbits.T1OSCEN = 1;

    RTCC_from_RTCC(&amp;now);
    if (now.DD == 0) {
        now.epoch = 0;
        RTCC_from_epoch(&amp;now);
    }
}

void RTCC_task(void) {
    static uint8_t prev_halfsec;
    if (RTCCFGbits.RTCSYNC)return;
    now.halfsec = RTCCFGbits.HALFSEC;
    if (prev_halfsec != now.halfsec) {
        prev_halfsec = now.halfsec;
        now.colon = now.halfsec;
        time_change_flag = 1;
        RTCC_from_RTCC(&amp;now);
    }
}

/** Transform time User Functions **/

void RTCC_from_RTCC(time_t *tm) {
    RTCC_to_caltime(tm);
    caltime_to_epoch(tm);
}

void RTCC_from_caltime(time_t *tm) {
    caltime_to_epoch(tm);
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

void RTCC_from_epoch(time_t *tm) {
    epoch_to_caltime(tm);
    caltime_to_RTCC(tm);
}

uint8_t month_length(uint8_t year, uint8_t month) {
    if (month == 2) return 28 + !(year &amp; 3)-!(year % 100)+!(year % 400);
    else return 31 - (((-(month &amp; 1)^month)&amp;13) == 4);

    //    switch (month) {
    //        case 1:
    //        case 3:
    //        case 5:
    //        case 7:
    //        case 8:
    //        case 10:
    //        case 12:
    //            return 31;
    //        case 4:
    //        case 6:
    //        case 9:
    //        case 11:
    //            return 30;
    //        case 2:
    //            if (year % 400 == 0)return 29;
    //            else if (year % 100 == 0)return 28;
    //            else if (year % 4 == 0) return 29;
    //            else return 28;
}

/** LCD display **/

static void display_dec(char *str, uint8_t dec, uint8_t edit) {
    char s[4];
    sprintf(s, "%02d", dec);
    if (edit &amp;&amp; now.halfsec)strcat(str, "  ");
    else strcat(str, s);
}

void display_time_0802(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);

    strcpy(line1, "");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (now.colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

void display_time_1602(time_t *tm, char *line0, char *line1) {
    RTCC_from_RTCC(&amp;now);

    strcpy(line0, "");
    display_dec(line0, 20, tm-&gt;edit.flag.YY);
    display_dec(line0, tm-&gt;YY, tm-&gt;edit.flag.YY);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;MM, tm-&gt;edit.flag.MM);
    strcat(line0, "/");
    display_dec(line0, tm-&gt;DD, tm-&gt;edit.flag.DD);
    strcat(line0, "(");
    strcat(line0, weekday_3char[tm-&gt;EE]);
    strcat(line0, ")");

    strcpy(line1, "        ");
    display_dec(line1, tm-&gt;hh, tm-&gt;edit.flag.hh);
    if (tm-&gt;colon) strcat(line1, ":");
    else strcat(line1, " ");
    display_dec(line1, tm-&gt;mm, tm-&gt;edit.flag.mm);
    strcat(line1, "-");
    display_dec(line1, tm-&gt;ss, tm-&gt;edit.flag.ss);
}

/** adjust the time **/

void RTCC_adjust_time_toggle(time_t *tm) {
    if (tm-&gt;edit.flags) {
        tm-&gt;edit.flags = 0;
    } else {
        tm-&gt;edit.flag.ss = 1;
    }
}

void RTCC_adjust_time_cursor(time_t *tm) {
    if (tm-&gt;edit.flag.ss)tm-&gt;edit.flags = 0x02;
    else if (tm-&gt;edit.flag.mm)tm-&gt;edit.flags = 0x04;
    else if (tm-&gt;edit.flag.hh)tm-&gt;edit.flags = 0x08;
    else if (tm-&gt;edit.flag.DD)tm-&gt;edit.flags = 0x10;
    else if (tm-&gt;edit.flag.MM)tm-&gt;edit.flags = 0x20;
    else if (tm-&gt;edit.flag.YY)tm-&gt;edit.flags = 0x01;
    else tm-&gt;edit.flags = 0x00;
}

void RTCC_adjust_time_inc(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch += 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch += MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch += HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch += DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch += DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &lt;= 12; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 1; i &lt; tm-&gt;MM; i++) {
            tm-&gt;epoch += DAY * month_length(tm-&gt;YY + 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch -= 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_dec(time_t *tm) {
    RTCC_from_RTCC(tm);
    if (tm-&gt;edit.flag.ss) tm-&gt;epoch -= 1;
    if (tm-&gt;edit.flag.mm) tm-&gt;epoch -= MINUTE;
    if (tm-&gt;edit.flag.hh) tm-&gt;epoch -= HOUR;
    if (tm-&gt;edit.flag.DD) tm-&gt;epoch -= DAY;
    if (tm-&gt;edit.flag.MM) tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, tm-&gt;MM);
    if (tm-&gt;edit.flag.YY) {
        for (uint8_t i = tm-&gt;MM; i &gt;= 1; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY, i);
        }
        for (uint8_t i = 12; i &gt; tm-&gt;MM; i--) {
            tm-&gt;epoch -= DAY * month_length(tm-&gt;YY - 1, i);
        }
    }

    if (tm-&gt;epoch &gt;= 3155760000)tm-&gt;epoch += 3155760000;
    RTCC_from_epoch(&amp;now);
    time_change_flag = 1;
}

void RTCC_adjust_time_button(time_t *tm, button_t *mode, button_t *cnt_inc, button_t *cnt_dec) {
    if (mode-&gt;flag.long_holding_3) {
        mode-&gt;flag.long_holding_3 = 0;
        RTCC_adjust_time_toggle(tm);
        mode-&gt;flags = 0;
        cnt_inc-&gt;flags = 0;
        cnt_dec-&gt;flags = 0;
    }
    if (tm-&gt;edit.flags) {
        if (mode-&gt;flag.press) {
            mode-&gt;flag.press = 0;
            RTCC_adjust_time_cursor(tm);
        }
        if (cnt_inc-&gt;flag.press) {
            cnt_inc-&gt;flag.press = 0;
            RTCC_adjust_time_inc(tm);
        }
        if (cnt_dec-&gt;flag.press) {
            cnt_dec-&gt;flag.press = 0;
            RTCC_adjust_time_dec(tm);
        }
    }
}

/** FUNCTIONS ******************************************************/

/** en/decode number **/

static uint8_t d_to_x(uint8_t dec) {
    // uint8_t quot = dec / 10;
    // return quot * 16 + dec - quot * 10;
    return dec / 10 * 6 + dec;
}

static uint8_t x_to_d(uint8_t hex) {
    return 10 * (0x0F &amp; (hex &gt;&gt; 4)) + (0x0F &amp; hex);
}

static epoch_t get_quot_rem(epoch_t *quot, uint8_t div) {
    // num /= div;
    // return rem;
    epoch_t num = *quot;
    return num - (*quot = num / div) * div; // returns rem
}

/** Transform time **/

static void RTCC_to_caltime(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);

    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;

    tm-&gt;YY = x_to_d(RTCVALL); // YY
    uint8_t dumy = RTCVALH; // Reserved
    tm-&gt;DD = x_to_d(RTCVALL); // DD
    tm-&gt;MM = x_to_d(RTCVALH); // MM
    tm-&gt;hh = x_to_d(RTCVALL); // hh
    tm-&gt;EE = x_to_d(RTCVALH); // EE
    tm-&gt;ss = x_to_d(RTCVALL); // ss
    tm-&gt;mm = x_to_d(RTCVALH); // mm
}

static void caltime_to_RTCC(time_t *tm) {
    while (RTCCFGbits.RTCSYNC);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;YY);
    RTCVALH = 0x00;
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 1;
    RTCVALL = d_to_x(tm-&gt;DD);
    RTCVALH = d_to_x(tm-&gt;MM);
    RTCCFGbits.RTCPTR0 = 1;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;hh);
    RTCVALH = d_to_x(tm-&gt;EE);
    RTCCFGbits.RTCPTR0 = 0;
    RTCCFGbits.RTCPTR1 = 0;
    RTCVALL = d_to_x(tm-&gt;ss);
    RTCVALH = d_to_x(tm-&gt;mm);
}

static void epoch_to_caltime(time_t *tm) {
    // to get epoch on terminal
    // echo $(( (`date -d '2015/03/01' '+%s'` - `date -d '2000/01/01' '+%s'`) / 86400 ))
    static uint16_t day_cache = 0; //2015.03.01
    static uint8_t month_cache = 1;
    static uint8_t year_cache = 0;
    uint16_t day_since_epoch;
    uint16_t day;
    uint8_t year = 0;
    uint8_t month = 1; // month is one-based.
    epoch_t num;

    num = tm-&gt;epoch;
    tm-&gt;ss = get_quot_rem(&amp;num, 60);
    tm-&gt;mm = get_quot_rem(&amp;num, 60);
    tm-&gt;hh = get_quot_rem(&amp;num, 24);
    day = num;
    day_since_epoch = day;

    num += 6; // 2000.1.1 is Saturday(6).
    tm-&gt;EE = get_quot_rem(&amp;num, 7);

    //    if (day == day_cache) {
    //        year = year_cache;
    //        month = month_cache;
    //        day -= day_cache;
    //    }

    // day is zero - based here.
    while (day &gt;= month_length(year, month)) {
        LATB2 = 1;
        day = day - month_length(year, month);
        if (month == 12) {
            month = 1; // month is one-based.
            year++;
            //3155760000 is 2000~2100?100?????
            if (year &gt;= 100) {
                tm-&gt;epoch -= 3155760000;
                year = 0;
            }
        } else {
            month++;
        }
        month_cache = month;
        year_cache = year;
    }
    day_cache = day_since_epoch - day;
    day++; // day is one-based, not zero-based.

    tm-&gt;YY = year;
    tm-&gt;MM = month;
    tm-&gt;DD = day;
}

static void caltime_to_epoch(time_t *tm) {
    epoch_t epoch = 0;
    for (uint8_t year = 0; year &lt; tm-&gt;YY; year++) {
        for (uint8_t month = 1; month &lt;= 12; month++) {
            epoch += DAY * month_length(year, month);
        }
    }
    for (uint8_t month = 1; month &lt; tm-&gt;MM; month++) {
        epoch += DAY * month_length(tm-&gt;YY, month);
    }
    epoch += DAY * (tm-&gt;DD - 1); //day is one-based.
    epoch += HOUR * tm-&gt;hh;
    epoch += MINUTE * tm-&gt;mm;
    epoch += tm-&gt;ss;

    tm-&gt;epoch = epoch;
}



ボタンライブラリ

My_button.h

/* 
 * File:   My_button.h
 * Author: kerikun11
 *
 * Created on 2015/02/26, 19:19
 */

#ifndef MY_BUTTON_H
#define	MY_BUTTON_H

#include &lt;stdint.h&gt;

//*************************** button ***************************//
//タイマー割り込み関数にbutton_timer_interrupt(&amp;button_t,!SW)を書いておくこと。
// 48MHz, 16bit, prescaler=1:4

#define PRESS_LEVEL 2
#define LONG_HOLD_LEVEL1  16
#define LONG_HOLD_LEVEL2  60
#define LONG_HOLD_LEVEL3  150
#define LONG_HOLD_LEVEL4  300
#define LONG_HOLD_LEVEL5  500
#define LONG_HOLD_LEVEL6  700
#define LONG_HOLD_LEVEL7  900

typedef struct button {
    uint16_t cnt_sw;

    union {
        uint16_t flags;

        struct {
            uint8_t press : 1;
            uint8_t long_hold_1 : 1;
            uint8_t long_hold_2 : 1;
            uint8_t long_hold_3 : 1;
            uint8_t long_hold_4 : 1;
            uint8_t long_hold_5 : 1;
            uint8_t long_hold_6 : 1;
            uint8_t long_hold_7 : 1;
            uint8_t pressing : 1;
            uint8_t long_holding_1 : 1;
            uint8_t long_holding_2 : 1;
            uint8_t long_holding_3 : 1;
            uint8_t long_holding_4 : 1;
            uint8_t long_holding_5 : 1;
            uint8_t long_holding_6 : 1;
            uint8_t long_holding_7 : 1;
        } flag;
    };
} button_t;

void button_timer_interrupt(button_t *bt, uint8_t sw_value);

#endif	/* MY_BUTTON_H */



My_button.h

#include "My_button.h"

void button_timer_interrupt(button_t *bt, uint8_t sw_value) {
    if (sw_value) {
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL7)bt-&gt;flag.long_holding_7 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL6)bt-&gt;flag.long_holding_6 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL5)bt-&gt;flag.long_holding_5 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL4)bt-&gt;flag.long_holding_4 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL3)bt-&gt;flag.long_holding_3 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL2)bt-&gt;flag.long_holding_2 = 1;
        if (bt-&gt;cnt_sw == LONG_HOLD_LEVEL1)bt-&gt;flag.long_holding_1 = 1;
        if (bt-&gt;cnt_sw == PRESS_LEVEL)bt-&gt;flag.pressing = 1;
        if (bt-&gt;cnt_sw &lt; LONG_HOLD_LEVEL7 + 1) bt-&gt;cnt_sw++;
    } else {
        if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL7)bt-&gt;flag.long_hold_7 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL6)bt-&gt;flag.long_hold_6 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL5)bt-&gt;flag.long_hold_5 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL4)bt-&gt;flag.long_hold_4 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL3)bt-&gt;flag.long_hold_3 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL2)bt-&gt;flag.long_hold_2 = 1;
        else if (bt-&gt;cnt_sw &gt;= LONG_HOLD_LEVEL1)bt-&gt;flag.long_hold_1 = 1;
        else if (bt-&gt;cnt_sw &gt;= PRESS_LEVEL)bt-&gt;flag.press = 1;
        bt-&gt;cnt_sw = 0;
        bt-&gt;flags &amp;= 0x00FF;
    }
}



使用例

UARTで毎秒時刻を送信します．

main.c

/* 
 * Project: RTCC-Sample.X
 * File:    main.c
 * Author:  Ryotaro Onuki
 *
 * Created on 2015/10/06, 14:23
 */

#include &lt;xc.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
// CONFIG1L
#pragma config WDTEN = OFF, PLLDIV = 2, CFGPLLEN = ON, STVREN = OFF, XINST = OFF
// CONFIG1H
#pragma config CPUDIV = OSC1, CP0 = OFF
// CONFIG2L
#pragma config OSC = INTOSCPLL, SOSCSEL = HIGH, CLKOEC = OFF, FCMEN = OFF, IESO = OFF
// CONFIG2H
#pragma config WDTPS = 1024
// CONFIG3L
#pragma config DSWDTOSC = T1OSCREF, RTCOSC = T1OSCREF, DSBOREN = OFF, DSWDTEN = OFF, DSWDTPS = G2
// CONFIG3H
#pragma config IOL1WAY = OFF, ADCSEL = BIT12, MSSP7B_EN = MSK7
// CONFIG4L
#pragma config WPFP = PAGE_127, WPCFG = OFF
// CONFIG4H
#pragma config WPDIS = OFF, WPEND = PAGE_WPFP, LS48MHZ = SYS48X8

#define _XTAL_FREQ 48000000

#include "My_RTCC.h"
#include "My_button.h"

// I/O Mapping
#define MODE_BUTTON PORTBbits.RB0
#define INC_BUTTON PORTBbits.RB1
#define DEC_BUTTON PORTBbits.RB2

#define LED0 LATAbits.LATA0

button_t mode;
button_t inc;
button_t dec;

void interrupt ISR(void) {
    if (PIE1bits.TMR1IE &amp;&amp; PIR1bits.TMR1IF) {
        PIR1bits.TMR1IF = 0;
    }
    if (PIE2bits.TMR3IE &amp;&amp; PIR2bits.TMR3IF) {
        PIR2bits.TMR3IF = 0;
        LED0 = !LED0;
        button_timer_interrupt(&amp;mode, !MODE_BUTTON);
        button_timer_interrupt(&amp;inc, !INC_BUTTON);
        button_timer_interrupt(&amp;dec, !DEC_BUTTON);
    }
    if (PIR1bits.RCIF &amp;&amp; PIE1bits.RCIE) {
        while (!PIR1bits.TXIF); // 送信完了まで待つ。
        TXREG1 = RCREG1; // 受信データをそのまま送信
    }
}

void main_init(void) {
    OSCCONbits.IRCF = 7;
    OSCTUNEbits.PLLEN = 1;
    OSCCONbits.SCS = 0;
    TRISA = 0b00100000; // IO,IO,Vcap,IO,IO,IO,IO,IO
    TRISB = 0b00110111; // IO,IO,SDA,SCL,IO,IO,IO,IO
    TRISC = 0b10111010; // RX,TX,D+,D-,Vusb,IO,T1OSI,T1OSO
    ANCON0 = 0b11111111; // x,x,x,AN4,AN3,AN2,AN1,AN0
    ANCON1 = 0b11111111; // x,x,x,x,AN12,AN11,AN10,AN9,AN8
    INTCON2bits.RBPU = 0; // Port:B Pull-up enable
    // Timer 1 init
    T1CONbits.TMR1CS = 2; // Clock = T1OSC
    T1CONbits.T1OSCEN = 1; // Drive Crystal
    T1CONbits.T1CKPS = 0; // No devide
    T1CONbits.nT1SYNC = 1; // No Sync
    T1CONbits.RD16 = 0; // Timer1 = 2 x 8bit timer
    T1CONbits.TMR1ON = 1; // module enable
    IPR1bits.TMR1IP = 0; // low priority
    PIR1bits.TMR1IF = 0;
    PIE1bits.TMR1IE = 1;
    INTCONbits.PEIE = 1;
    // Timer 3 init
    T3CONbits.TMR3CS = 0; // Clock = Fosc/4
    T3CONbits.T3OSCEN = 0; // Not Drive Crystal
    T3CONbits.T3CKPS = 2; // clock/4
    T3CONbits.RD163 = 0; // Timer3=16bit timer
    T3CONbits.TMR3ON = 1; // module enable
    IPR2bits.TMR3IP = 0; // low priority
    PIR2bits.TMR3IF = 0;
    PIE2bits.TMR3IE = 1; // interrupt enable
    INTCONbits.PEIE = 1;
    // RTCC init
    RTCC_init();
    // UART init
    TXSTA1bits.TX9 = 0; // 0:8-bit
    TXSTA1bits.TXEN = 1; //1:enable
    TXSTA1bits.SYNC = 0; // 0:Asynchronous mode
    TXSTA1bits.BRGH = 0; // 1:High Speed
    RCSTA1bits.SPEN = 1; // 1:Serial Port enable
    RCSTA1bits.RX9 = 0; // 0:8-bit
    RCSTA1bits.CREN = 1; // 1:continuous receive enable
    BAUDCON1bits.BRG16 = 0; // 1:use 16-bit SPBRG
    SPBRG1 = _XTAL_FREQ / 64 / 9600 - 1;
    SPBRGH1 = 0;
    IPR1bits.RC1IP = 0; //0:low priority
    PIE1bits.RCIE = 1;
    INTCONbits.PEIE = 1;
}

void delay(uint16_t t) {
    while (t--)__delay_ms(1);
}

int main(void) {
    main_init();
    INTCONbits.GIE = 1;

    while (1) {
        RTCC_task();
        RTCC_adjust_time_button(&amp;now, &amp;mode, &amp;inc, &amp;dec);

        if (time_change_flag) {
            time_change_flag = 0;
            char str[30];
            sprintf(str, "\t20%02d/%02d/%02d(%s)%02d:%02d-%02d\n",
                    now.YY,
                    now.MM,
                    now.DD,
                    weekday_3char[now.EE],
                    now.hh,
                    now.mm,
                    now.ss);
            for (uint8_t i = 0; str[i]; i++) {
                while (!PIR1bits.TXIF); //送信完了まで待つ
                TXREG1 = str[i];
            }
        }
    }

    return 0;
}



</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>



<h1 class="page-heading" id="tag-index-7セグメントLED">7セグメントLED (1) <a href="#" style="font-size:14px;">タグ一覧へ</a></h1>

<ul class="post-list">
	
	<li>
	<a class="post-link" href="/posts/2016-09-12-low-power-clock/">
		<img src="/posts/2016-09-12-low-power-clock/icon.jpg" title="PICで省エネ時計を作る" alt="PICで省エネ時計を作る">
		<div class="post-list-char">
			<span class="post-meta">2016年09月12日 Category: works</span>
			<h2>
				PICで省エネ時計を作る
			</h2>
			<span class="post-meta" style="max-height:4em;">概要

PICで時計

久しぶりにPICの話題です．しばらくESP8266やARMマイコンなど，上級のマイコンを使っていましたが，またPICを使ってみたくなりました．

他のマイコンには真似できないような超低消費電力の時計を作ってみました．

</span>
			<!--
			<p></p>
			-->
		</div>
	</a>
</li>


	
</ul>




      </div>
    </div>

    <footer class="site-footer">

	<div class="wrapper">

		<a href="/"><h2 class="footer-heading">KERI's Lab</h2></a>

		<div class="footer-col-wrapper">
			<div class="footer-col footer-col-1">
				<ul class="contact-list">
					<li>Contact KERI</li>
					<li>Mail : <a href="mailto:kerikun11+web@gmail.com">kerikun11+web@gmail.com</a></li>
				</ul>
			</div>

			<div class="footer-col footer-col-2">
				<ul class="social-media-list">
					
					<li>
						<a href="https://github.com/kerikun11" target="_blank"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">kerikun11</span></a>

					</li>
					

					
					<li>
						<a href="https://twitter.com/Ryokeri14" target="_blank"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">Ryokeri14</span></a>

					</li>
					
				</ul>
			</div>

			<div class="footer-col footer-col-3">
				<p>KERI's Lab へようこそ。ここでは、趣味の電子工作やサーバーづくりなどを紹介しています。</p>
			</div>

			<div class="footer-copyright">
				<p>Copyright© 2014-2016 KERI's Lab All Rights Reserved.</p>
			</div>
		</div>

	</div>

</footer>


  </body>

</html>
